{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// hystorique.js\n// Updated Historique modal where 'avance' is taken only from the pointage record of the current month.\n// Each month shows a table of personnel with columns: Jrs, Salaire, Avance (month only), Net.\n// Year navigation and totals are included.\nimport React,{useEffect,useState}from\"react\";import ReactDOM from\"react-dom/client\";/* ---------------- Helpers ---------------- */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function monthLabel(i){let locale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"fr\";const monthsFr=[\"Jan\",\"Fév\",\"Mar\",\"Avr\",\"Mai\",\"Juin\",\"Juil\",\"Août\",\"Sep\",\"Oct\",\"Nov\",\"Déc\"];const monthsAr=[\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];return locale===\"ar\"?monthsAr[i]:monthsFr[i];}function formatNumberSpaceDot(value){if(value===null||value===undefined||value===\"\")return\"\";const cleaned=String(value).replace(/\\s+/g,\"\").replace(\",\",\".\");const n=Number(cleaned);if(!Number.isFinite(n))return String(value);const parts=n.toFixed(2).split(\".\");parts[0]=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\" \");return parts.join(\".\");}function safeNum(v){if(v===null||v===undefined||v===\"\")return 0;const n=Number(String(v).toString().replace(/\\s+/g,\"\").replace(\",\",\".\"));return Number.isFinite(n)?n:0;}/* ---------------- Component ---------------- */function HistoriqueModal(_ref){let{detail={},onClose}=_ref;const locale=detail.locale||\"fr\";const[year,setYear]=useState(detail.year&&Number(detail.year)||new Date().getFullYear());const[personnel,setPersonnel]=useState([]);const[loading,setLoading]=useState(false);const[dataByPerson,setDataByPerson]=useState({});// { personId: [records] } records for the year\nconst[error,setError]=useState(null);// Load personnel list on mount\nuseEffect(()=>{let mounted=true;async function loadPersonnel(){try{setLoading(true);const ppl=window.pywebview&&window.pywebview.api&&window.pywebview.api.get_personnel?await window.pywebview.api.get_personnel():[];if(!mounted)return;setPersonnel(Array.isArray(ppl)?ppl:[]);}catch(e){console.warn(\"hystorique: failed to load personnel\",e);if(mounted)setPersonnel([]);}finally{if(mounted)setLoading(false);}}loadPersonnel();return()=>{mounted=false;};},[]);// Load pointage for each person for the selected year\nuseEffect(()=>{let mounted=true;async function loadAllPointage(){setLoading(true);setError(null);const map={};try{for(const p of personnel){try{const recs=window.pywebview&&window.pywebview.api&&window.pywebview.api.get_pointage?await window.pywebview.api.get_pointage(p.id,year,null):[];// normalize recs to array and ensure month integer\nmap[p.id]=Array.isArray(recs)?recs:[];}catch(e){console.warn(\"hystorique: failed to load pointage for person\",p.id,e);map[p.id]=[];}}if(!mounted)return;setDataByPerson(map);}catch(e){console.error(\"hystorique: unexpected error\",e);if(mounted)setError(\"Failed to load historique.\");}finally{if(mounted)setLoading(false);}}if(personnel.length>0){loadAllPointage();}else{setDataByPerson({});}return()=>{mounted=false;};},[personnel,year]);function prevYear(){setYear(y=>y-1);}function nextYear(){setYear(y=>y+1);}function onYearChange(e){const v=Number(e.target.value);if(!Number.isNaN(v))setYear(v);}// For a given person and month return computed values\nfunction computeMonthValues(p,month){// month: 1..12\nconst recs=dataByPerson[p.id]||[];const rec=recs.find(r=>Number(r.month)===Number(month))||null;const days=rec?safeNum(rec.days_present):0;const salaryPerDay=rec?safeNum(rec.salary_per_day):0;const gross=salaryPerDay*days;// IMPORTANT: avance must be only the month's advance (do NOT fallback to p.avance)\nconst avance=rec?safeNum(rec.avance):0;const net=rec&&\"salary_due\"in rec?safeNum(rec.salary_due):gross-avance;return{days,gross,avance,net};}// Totals across all personnel for a month\nfunction computeMonthTotals(month){let days=0,gross=0,avance=0,net=0;for(const p of personnel){const v=computeMonthValues(p,month);days+=safeNum(v.days);gross+=safeNum(v.gross);avance+=safeNum(v.avance);net+=safeNum(v.net);}return{days,gross,avance,net};}// Yearly totals (sum of monthly totals)\nfunction computeYearlyTotals(){let days=0,gross=0,avance=0,net=0;for(let m=1;m<=12;m++){const t=computeMonthTotals(m);days+=safeNum(t.days);gross+=safeNum(t.gross);avance+=safeNum(t.avance);net+=safeNum(t.net);}return{days,gross,avance,net};}const yearlyTotals=computeYearlyTotals();return/*#__PURE__*/_jsx(\"div\",{style:styles.overlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),{},{direction:locale===\"ar\"?\"rtl\":\"ltr\",textAlign:locale===\"ar\"?\"right\":\"left\"}),children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:locale===\"ar\"?\"سجل الحضور السنوي\":\"Historique \\u2014 \".concat(year)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:prevYear,style:styles.smallButton,children:\"\\u25C0\"}),/*#__PURE__*/_jsx(\"input\",{value:year,onChange:onYearChange,style:styles.yearInput}),/*#__PURE__*/_jsx(\"button\",{onClick:nextYear,style:styles.smallButton,children:\"\\u25B6\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:styles.closeButton,children:\"\\u2716\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryTop,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:locale===\"fr\"?\"Total Jours (année)\":\"إجمالي الأيام (سنة)\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.summaryValue,children:yearlyTotals.days})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:locale===\"fr\"?\"Salaire brut (année)\":\"إجمالي الرواتب\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryValue,children:[formatNumberSpaceDot(yearlyTotals.gross),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:locale===\"fr\"?\"Avance (année)\":\"إجمالي السلفة\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryValue,children:[formatNumberSpaceDot(yearlyTotals.avance),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:locale===\"fr\"?\"Net à payer (année)\":\"الصافي\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.summaryValue),{},{color:yearlyTotals.net<0?\"#c00\":\"#14355f\"}),children:[formatNumberSpaceDot(yearlyTotals.net),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:{padding:30,textAlign:\"center\"},children:locale===\"ar\"?\"جاري التحميل...\":\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}):/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12,display:\"grid\",gap:18},children:Array.from({length:12}).map((_,idx)=>{const m=idx+1;const monthTotals=computeMonthTotals(m);return/*#__PURE__*/_jsxs(\"div\",{style:styles.monthBlock,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.monthHeaderRow,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.monthTitle,children:[monthLabel(idx,locale),\" \",year]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.monthTotals,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:locale===\"fr\"?\"Jrs\":\"الأيام\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatValue,children:monthTotals.days})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:locale===\"fr\"?\"Salaire\":\"الراتب\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStatValue,children:[formatNumberSpaceDot(monthTotals.gross),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:locale===\"fr\"?\"Avance\":\"السلفة\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStatValue,children:[formatNumberSpaceDot(monthTotals.avance),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:locale===\"fr\"?\"Net\":\"الصافي\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.smallStatValue),{},{color:monthTotals.net<0?\"#c00\":\"#14355f\"}),children:[formatNumberSpaceDot(monthTotals.net),\" \",locale===\"ar\"?\"دج\":\"DZD\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.thName,children:locale===\"ar\"?\"الاسم\":\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.thName,children:locale===\"ar\"?\"اللقب\":\"Prénom\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Jrs\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Salaire\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Avance\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Net\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[personnel.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:6,style:{padding:16,textAlign:\"center\"},children:locale===\"ar\"?\"لا يوجد موظفون\":\"No personnel found\"})}):personnel.map(p=>{const v=computeMonthValues(p,m);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tdName,children:p.nom||\"-\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdName,children:p.prenom||\"-\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:v.days||0}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.gross)})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.avance)})}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.td),{},{fontWeight:700,color:v.net<0?\"#c00\":\"#14355f\"}),children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.net)})})]},\"\".concat(p.id,\"-\").concat(m));}),/*#__PURE__*/_jsxs(\"tr\",{style:styles.totalsRow,children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tdNameTotals,colSpan:2,children:locale===\"ar\"?\"المجموع\":\"Total\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdTotals,children:monthTotals.days}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdTotals,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.gross)})}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdTotals,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.avance)})}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.tdTotals),{},{fontWeight:900,color:monthTotals.net<0?\"#c00\":\"#14355f\"}),children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.net)})})]})]})]})})]},\"month-\".concat(m));})})]})]})});}/* ---------------- Programmatic opener & events ---------------- */export function openHistorique(){let detail=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};console.log(\"[hystorique] openHistorique called\",detail);const id=\"hystorique-modal-root\";let container=document.getElementById(id);if(!container){container=document.createElement(\"div\");container.id=id;document.body.appendChild(container);}function cleanup(root,containerEl){try{root.unmount();}catch(e){}try{containerEl.remove();}catch(e){}}try{const root=ReactDOM.createRoot(container);const onClose=()=>cleanup(root,container);root.render(/*#__PURE__*/_jsx(HistoriqueModal,{detail:detail,onClose:onClose}));}catch(err){try{// fallback for older React\n// eslint-disable-next-line\nReactDOM.render(/*#__PURE__*/_jsx(HistoriqueModal,{detail:detail,onClose:()=>{try{ReactDOM.unmountComponentAtNode(container);}catch(e){}try{container.remove();}catch(e){}}}),container);}catch(e){console.error(\"[hystorique] failed to render modal:\",e);alert(\"Failed to open historique (see console).\");}}}export default openHistorique;function onOpenEvent(e){try{const detail=(e===null||e===void 0?void 0:e.detail)||{};openHistorique(detail);}catch(err){console.error(\"[hystorique] event handler error:\",err);}}try{window.addEventListener(\"openHystorique\",onOpenEvent);window.addEventListener(\"openHistorique\",onOpenEvent);window.openHistorique=window.openHistorique||openHistorique;window.openHystorique=window.openHystorique||openHistorique;console.log(\"[hystorique] module loaded and listeners registered\");}catch(e){console.warn(\"[hystorique] could not register event listeners\",e);}/* ---------------- Styles ---------------- */const styles={overlay:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},modal:{width:\"96%\",maxWidth:1200,maxHeight:\"90vh\",overflow:\"auto\",background:\"#fff\",borderRadius:10,padding:14,boxShadow:\"0 16px 40px rgba(0,0,0,0.35)\"},header:{display:\"flex\",justifyContent:\"space-between\",gap:12,alignItems:\"center\",marginBottom:8},smallButton:{padding:\"6px 8px\",borderRadius:6,border:\"1px solid #dbe9ff\",background:\"#fff\",cursor:\"pointer\"},yearInput:{width:88,padding:\"6px 8px\",borderRadius:6,border:\"1px solid #e0e0e0\",textAlign:\"center\"},closeButton:{padding:\"6px 8px\",borderRadius:6,border:\"none\",background:\"#f4f6fb\",cursor:\"pointer\"},summaryTop:{display:\"flex\",gap:12,alignItems:\"center\",marginBottom:10,flexWrap:\"wrap\"},summaryItem:{background:\"#fbfdff\",padding:\"8px 12px\",borderRadius:8,border:\"1px solid #eef6ff\",minWidth:160},summaryLabel:{fontSize:12,color:\"#666\"},summaryValue:{fontSize:16,fontWeight:800},monthBlock:{border:\"1px solid #eaf3ff\",borderRadius:8,padding:8,background:\"#fff\"},monthHeaderRow:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:8},monthTitle:{fontWeight:800,fontSize:15},monthTotals:{display:\"flex\",gap:10,alignItems:\"center\"},smallStat:{padding:\"6px 8px\",borderRadius:6,background:\"#f7fbff\",border:\"1px solid #eef6ff\",textAlign:\"right\",minWidth:100},smallStatLabel:{fontSize:11,color:\"#666\"},smallStatValue:{fontWeight:800},table:{width:\"100%\",borderCollapse:\"collapse\",fontSize:13},thName:{padding:\"8px\",border:\"1px solid #eef6ff\",textAlign:\"left\",minWidth:180,background:\"#f7fbff\",fontWeight:700},th:{padding:\"8px\",border:\"1px solid #eef6ff\",textAlign:\"center\",width:110,background:\"#f7fbff\",fontWeight:700},tdName:{padding:\"8px\",border:\"1px solid #f2f7ff\",textAlign:\"left\",background:\"#fff\"},td:{padding:\"8px\",border:\"1px solid #f2f7ff\",textAlign:\"right\",background:\"#fff\",whiteSpace:\"nowrap\"},tdTotals:{padding:\"8px\",borderTop:\"2px solid #e6eefb\",borderLeft:\"1px solid #f2f7ff\",borderRight:\"1px solid #f2f7ff\",textAlign:\"right\",background:\"#fbfdff\",fontWeight:800},tdNameTotals:{padding:\"8px\",borderTop:\"2px solid #e6eefb\",borderLeft:\"1px solid #f2f7ff\",borderRight:\"1px solid #f2f7ff\",background:\"#fbfdff\",fontWeight:800,textAlign:\"left\"},totalsRow:{background:\"#fbfdff\"},ltr:{direction:\"ltr\",unicodeBidi:\"isolate\"}};","map":{"version":3,"names":["React","useEffect","useState","ReactDOM","jsx","_jsx","jsxs","_jsxs","monthLabel","i","locale","arguments","length","undefined","monthsFr","monthsAr","formatNumberSpaceDot","value","cleaned","String","replace","n","Number","isFinite","parts","toFixed","split","join","safeNum","v","toString","HistoriqueModal","_ref","detail","onClose","year","setYear","Date","getFullYear","personnel","setPersonnel","loading","setLoading","dataByPerson","setDataByPerson","error","setError","mounted","loadPersonnel","ppl","window","pywebview","api","get_personnel","Array","isArray","e","console","warn","loadAllPointage","map","p","recs","get_pointage","id","prevYear","y","nextYear","onYearChange","target","isNaN","computeMonthValues","month","rec","find","r","days","days_present","salaryPerDay","salary_per_day","gross","avance","net","salary_due","computeMonthTotals","computeYearlyTotals","m","t","yearlyTotals","style","styles","overlay","children","_objectSpread","modal","direction","textAlign","header","margin","concat","display","gap","alignItems","onClick","smallButton","onChange","yearInput","closeButton","marginTop","summaryTop","summaryItem","summaryLabel","summaryValue","color","padding","from","_","idx","monthTotals","monthBlock","monthHeaderRow","monthTitle","smallStat","smallStatLabel","smallStatValue","overflowX","table","thName","th","colSpan","tdName","nom","prenom","td","ltr","fontWeight","totalsRow","tdNameTotals","tdTotals","openHistorique","log","container","document","getElementById","createElement","body","appendChild","cleanup","root","containerEl","unmount","remove","createRoot","render","err","unmountComponentAtNode","alert","onOpenEvent","addEventListener","openHystorique","position","inset","background","justifyContent","zIndex","width","maxWidth","maxHeight","overflow","borderRadius","boxShadow","marginBottom","border","cursor","flexWrap","minWidth","fontSize","borderCollapse","whiteSpace","borderTop","borderLeft","borderRight","unicodeBidi"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/hystorique.js"],"sourcesContent":["// hystorique.js\n// Updated Historique modal where 'avance' is taken only from the pointage record of the current month.\n// Each month shows a table of personnel with columns: Jrs, Salaire, Avance (month only), Net.\n// Year navigation and totals are included.\n\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\n/* ---------------- Helpers ---------------- */\n\nfunction monthLabel(i, locale = \"fr\") {\n  const monthsFr = [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Août\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"];\n  const monthsAr = [\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];\n  return locale === \"ar\" ? monthsAr[i] : monthsFr[i];\n}\n\nfunction formatNumberSpaceDot(value) {\n  if (value === null || value === undefined || value === \"\") return \"\";\n  const cleaned = String(value).replace(/\\s+/g, \"\").replace(\",\", \".\");\n  const n = Number(cleaned);\n  if (!Number.isFinite(n)) return String(value);\n  const parts = n.toFixed(2).split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n  return parts.join(\".\");\n}\n\nfunction safeNum(v) {\n  if (v === null || v === undefined || v === \"\") return 0;\n  const n = Number(String(v).toString().replace(/\\s+/g, \"\").replace(\",\", \".\"));\n  return Number.isFinite(n) ? n : 0;\n}\n\n/* ---------------- Component ---------------- */\n\nfunction HistoriqueModal({ detail = {}, onClose }) {\n  const locale = detail.locale || \"fr\";\n  const [year, setYear] = useState((detail.year && Number(detail.year)) || new Date().getFullYear());\n  const [personnel, setPersonnel] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [dataByPerson, setDataByPerson] = useState({}); // { personId: [records] } records for the year\n  const [error, setError] = useState(null);\n\n  // Load personnel list on mount\n  useEffect(() => {\n    let mounted = true;\n    async function loadPersonnel() {\n      try {\n        setLoading(true);\n        const ppl = (window.pywebview && window.pywebview.api && window.pywebview.api.get_personnel)\n          ? await window.pywebview.api.get_personnel()\n          : [];\n        if (!mounted) return;\n        setPersonnel(Array.isArray(ppl) ? ppl : []);\n      } catch (e) {\n        console.warn(\"hystorique: failed to load personnel\", e);\n        if (mounted) setPersonnel([]);\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    }\n    loadPersonnel();\n    return () => { mounted = false; };\n  }, []);\n\n  // Load pointage for each person for the selected year\n  useEffect(() => {\n    let mounted = true;\n    async function loadAllPointage() {\n      setLoading(true);\n      setError(null);\n      const map = {};\n      try {\n        for (const p of personnel) {\n          try {\n            const recs = (window.pywebview && window.pywebview.api && window.pywebview.api.get_pointage)\n              ? await window.pywebview.api.get_pointage(p.id, year, null)\n              : [];\n            // normalize recs to array and ensure month integer\n            map[p.id] = Array.isArray(recs) ? recs : [];\n          } catch (e) {\n            console.warn(\"hystorique: failed to load pointage for person\", p.id, e);\n            map[p.id] = [];\n          }\n        }\n        if (!mounted) return;\n        setDataByPerson(map);\n      } catch (e) {\n        console.error(\"hystorique: unexpected error\", e);\n        if (mounted) setError(\"Failed to load historique.\");\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    }\n\n    if (personnel.length > 0) {\n      loadAllPointage();\n    } else {\n      setDataByPerson({});\n    }\n\n    return () => { mounted = false; };\n  }, [personnel, year]);\n\n  function prevYear() { setYear(y => y - 1); }\n  function nextYear() { setYear(y => y + 1); }\n  function onYearChange(e) {\n    const v = Number(e.target.value);\n    if (!Number.isNaN(v)) setYear(v);\n  }\n\n  // For a given person and month return computed values\n  function computeMonthValues(p, month) {\n    // month: 1..12\n    const recs = dataByPerson[p.id] || [];\n    const rec = recs.find(r => Number(r.month) === Number(month)) || null;\n    const days = rec ? safeNum(rec.days_present) : 0;\n    const salaryPerDay = rec ? safeNum(rec.salary_per_day) : 0;\n    const gross = salaryPerDay * days;\n    // IMPORTANT: avance must be only the month's advance (do NOT fallback to p.avance)\n    const avance = rec ? safeNum(rec.avance) : 0;\n    const net = rec && (\"salary_due\" in rec) ? safeNum(rec.salary_due) : (gross - avance);\n    return { days, gross, avance, net };\n  }\n\n  // Totals across all personnel for a month\n  function computeMonthTotals(month) {\n    let days = 0, gross = 0, avance = 0, net = 0;\n    for (const p of personnel) {\n      const v = computeMonthValues(p, month);\n      days += safeNum(v.days);\n      gross += safeNum(v.gross);\n      avance += safeNum(v.avance);\n      net += safeNum(v.net);\n    }\n    return { days, gross, avance, net };\n  }\n\n  // Yearly totals (sum of monthly totals)\n  function computeYearlyTotals() {\n    let days = 0, gross = 0, avance = 0, net = 0;\n    for (let m = 1; m <= 12; m++) {\n      const t = computeMonthTotals(m);\n      days += safeNum(t.days);\n      gross += safeNum(t.gross);\n      avance += safeNum(t.avance);\n      net += safeNum(t.net);\n    }\n    return { days, gross, avance, net };\n  }\n\n  const yearlyTotals = computeYearlyTotals();\n\n  return (\n    <div style={styles.overlay}>\n      <div style={{ ...styles.modal, direction: locale === \"ar\" ? \"rtl\" : \"ltr\", textAlign: locale === \"ar\" ? \"right\" : \"left\" }}>\n        <div style={styles.header}>\n          <h3 style={{ margin: 0 }}>{locale === \"ar\" ? \"سجل الحضور السنوي\" : `Historique — ${year}`}</h3>\n          <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n            <button onClick={prevYear} style={styles.smallButton}>◀</button>\n            <input value={year} onChange={onYearChange} style={styles.yearInput} />\n            <button onClick={nextYear} style={styles.smallButton}>▶</button>\n            <button onClick={onClose} style={styles.closeButton}>✖</button>\n          </div>\n        </div>\n\n        <div style={{ marginTop: 10 }}>\n          <div style={styles.summaryTop}>\n            <div style={styles.summaryItem}>\n              <div style={styles.summaryLabel}>{locale === \"fr\" ? \"Total Jours (année)\" : \"إجمالي الأيام (سنة)\"}</div>\n              <div style={styles.summaryValue}>{yearlyTotals.days}</div>\n            </div>\n            <div style={styles.summaryItem}>\n              <div style={styles.summaryLabel}>{locale === \"fr\" ? \"Salaire brut (année)\" : \"إجمالي الرواتب\"}</div>\n              <div style={styles.summaryValue}>{formatNumberSpaceDot(yearlyTotals.gross)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n            </div>\n            <div style={styles.summaryItem}>\n              <div style={styles.summaryLabel}>{locale === \"fr\" ? \"Avance (année)\" : \"إجمالي السلفة\"}</div>\n              <div style={styles.summaryValue}>{formatNumberSpaceDot(yearlyTotals.avance)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n            </div>\n            <div style={styles.summaryItem}>\n              <div style={styles.summaryLabel}>{locale === \"fr\" ? \"Net à payer (année)\" : \"الصافي\"}</div>\n              <div style={{ ...styles.summaryValue, color: yearlyTotals.net < 0 ? \"#c00\" : \"#14355f\" }}>{formatNumberSpaceDot(yearlyTotals.net)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n            </div>\n          </div>\n\n          {loading ? (\n            <div style={{ padding: 30, textAlign: \"center\" }}>{locale === \"ar\" ? \"جاري التحميل...\" : \"Loading...\"}</div>\n          ) : error ? (\n            <div style={{ color: \"red\" }}>{error}</div>\n          ) : (\n            <div style={{ marginTop: 12, display: \"grid\", gap: 18 }}>\n              {/* Render each month as a separate table block */}\n              {Array.from({ length: 12 }).map((_, idx) => {\n                const m = idx + 1;\n                const monthTotals = computeMonthTotals(m);\n                return (\n                  <div key={`month-${m}`} style={styles.monthBlock}>\n                    <div style={styles.monthHeaderRow}>\n                      <div style={styles.monthTitle}>{monthLabel(idx, locale)} {year}</div>\n                      <div style={styles.monthTotals}>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{locale === \"fr\" ? \"Jrs\" : \"الأيام\"}</div>\n                          <div style={styles.smallStatValue}>{monthTotals.days}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{locale === \"fr\" ? \"Salaire\" : \"الراتب\"}</div>\n                          <div style={styles.smallStatValue}>{formatNumberSpaceDot(monthTotals.gross)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{locale === \"fr\" ? \"Avance\" : \"السلفة\"}</div>\n                          <div style={styles.smallStatValue}>{formatNumberSpaceDot(monthTotals.avance)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{locale === \"fr\" ? \"Net\" : \"الصافي\"}</div>\n                          <div style={{ ...styles.smallStatValue, color: monthTotals.net < 0 ? \"#c00\" : \"#14355f\" }}>{formatNumberSpaceDot(monthTotals.net)} {locale === \"ar\" ? \"دج\" : \"DZD\"}</div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div style={{ overflowX: \"auto\" }}>\n                      <table style={styles.table}>\n                        <thead>\n                          <tr>\n                            <th style={styles.thName}>{locale === \"ar\" ? \"الاسم\" : \"Nom\"}</th>\n                            <th style={styles.thName}>{locale === \"ar\" ? \"اللقب\" : \"Prénom\"}</th>\n                            <th style={styles.th}>Jrs</th>\n                            <th style={styles.th}>Salaire</th>\n                            <th style={styles.th}>Avance</th>\n                            <th style={styles.th}>Net</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {personnel.length === 0 ? (\n                            <tr><td colSpan={6} style={{ padding: 16, textAlign: \"center\" }}>{locale === \"ar\" ? \"لا يوجد موظفون\" : \"No personnel found\"}</td></tr>\n                          ) : personnel.map(p => {\n                            const v = computeMonthValues(p, m);\n                            return (\n                              <tr key={`${p.id}-${m}`}>\n                                <td style={styles.tdName}>{p.nom || \"-\"}</td>\n                                <td style={styles.tdName}>{p.prenom || \"-\"}</td>\n                                <td style={styles.td}>{v.days || 0}</td>\n                                <td style={styles.td}><span style={styles.ltr}>{formatNumberSpaceDot(v.gross)}</span></td>\n                                <td style={styles.td}><span style={styles.ltr}>{formatNumberSpaceDot(v.avance)}</span></td>\n                                <td style={{ ...styles.td, fontWeight: 700, color: v.net < 0 ? \"#c00\" : \"#14355f\" }}>\n                                  <span style={styles.ltr}>{formatNumberSpaceDot(v.net)}</span>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                          {/* Totals row for the month */}\n                          <tr style={styles.totalsRow}>\n                            <td style={styles.tdNameTotals} colSpan={2}>{locale === \"ar\" ? \"المجموع\" : \"Total\"}</td>\n                            <td style={styles.tdTotals}>{monthTotals.days}</td>\n                            <td style={styles.tdTotals}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.gross)}</span></td>\n                            <td style={styles.tdTotals}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.avance)}</span></td>\n                            <td style={{ ...styles.tdTotals, fontWeight: 900, color: monthTotals.net < 0 ? \"#c00\" : \"#14355f\" }}>\n                              <span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.net)}</span>\n                            </td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ---------------- Programmatic opener & events ---------------- */\n\nexport function openHistorique(detail = {}) {\n  console.log(\"[hystorique] openHistorique called\", detail);\n  const id = \"hystorique-modal-root\";\n  let container = document.getElementById(id);\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.id = id;\n    document.body.appendChild(container);\n  }\n\n  function cleanup(root, containerEl) {\n    try { root.unmount(); } catch (e) {}\n    try { containerEl.remove(); } catch (e) {}\n  }\n\n  try {\n    const root = ReactDOM.createRoot(container);\n    const onClose = () => cleanup(root, container);\n    root.render(<HistoriqueModal detail={detail} onClose={onClose} />);\n  } catch (err) {\n    try {\n      // fallback for older React\n      // eslint-disable-next-line\n      ReactDOM.render(<HistoriqueModal detail={detail} onClose={() => {\n        try { ReactDOM.unmountComponentAtNode(container); } catch (e) {}\n        try { container.remove(); } catch (e) {}\n      }} />, container);\n    } catch (e) {\n      console.error(\"[hystorique] failed to render modal:\", e);\n      alert(\"Failed to open historique (see console).\");\n    }\n  }\n}\n\nexport default openHistorique;\n\nfunction onOpenEvent(e) {\n  try {\n    const detail = e?.detail || {};\n    openHistorique(detail);\n  } catch (err) {\n    console.error(\"[hystorique] event handler error:\", err);\n  }\n}\n\ntry {\n  window.addEventListener(\"openHystorique\", onOpenEvent);\n  window.addEventListener(\"openHistorique\", onOpenEvent);\n  window.openHistorique = window.openHistorique || openHistorique;\n  window.openHystorique = window.openHystorique || openHistorique;\n  console.log(\"[hystorique] module loaded and listeners registered\");\n} catch (e) {\n  console.warn(\"[hystorique] could not register event listeners\", e);\n}\n\n/* ---------------- Styles ---------------- */\n\nconst styles = {\n  overlay: {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,0.45)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 9999\n  },\n  modal: {\n    width: \"96%\",\n    maxWidth: 1200,\n    maxHeight: \"90vh\",\n    overflow: \"auto\",\n    background: \"#fff\",\n    borderRadius: 10,\n    padding: 14,\n    boxShadow: \"0 16px 40px rgba(0,0,0,0.35)\"\n  },\n  header: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: 12,\n    alignItems: \"center\",\n    marginBottom: 8\n  },\n  smallButton: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"1px solid #dbe9ff\",\n    background: \"#fff\",\n    cursor: \"pointer\"\n  },\n  yearInput: {\n    width: 88,\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"1px solid #e0e0e0\",\n    textAlign: \"center\"\n  },\n  closeButton: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"none\",\n    background: \"#f4f6fb\",\n    cursor: \"pointer\"\n  },\n  summaryTop: {\n    display: \"flex\",\n    gap: 12,\n    alignItems: \"center\",\n    marginBottom: 10,\n    flexWrap: \"wrap\"\n  },\n  summaryItem: {\n    background: \"#fbfdff\",\n    padding: \"8px 12px\",\n    borderRadius: 8,\n    border: \"1px solid #eef6ff\",\n    minWidth: 160\n  },\n  summaryLabel: {\n    fontSize: 12,\n    color: \"#666\"\n  },\n  summaryValue: {\n    fontSize: 16,\n    fontWeight: 800\n  },\n  monthBlock: {\n    border: \"1px solid #eaf3ff\",\n    borderRadius: 8,\n    padding: 8,\n    background: \"#fff\"\n  },\n  monthHeaderRow: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 8\n  },\n  monthTitle: {\n    fontWeight: 800,\n    fontSize: 15\n  },\n  monthTotals: {\n    display: \"flex\",\n    gap: 10,\n    alignItems: \"center\"\n  },\n  smallStat: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    background: \"#f7fbff\",\n    border: \"1px solid #eef6ff\",\n    textAlign: \"right\",\n    minWidth: 100\n  },\n  smallStatLabel: { fontSize: 11, color: \"#666\" },\n  smallStatValue: { fontWeight: 800 },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    fontSize: 13\n  },\n  thName: {\n    padding: \"8px\",\n    border: \"1px solid #eef6ff\",\n    textAlign: \"left\",\n    minWidth: 180,\n    background: \"#f7fbff\",\n    fontWeight: 700\n  },\n  th: {\n    padding: \"8px\",\n    border: \"1px solid #eef6ff\",\n    textAlign: \"center\",\n    width: 110,\n    background: \"#f7fbff\",\n    fontWeight: 700\n  },\n  tdName: {\n    padding: \"8px\",\n    border: \"1px solid #f2f7ff\",\n    textAlign: \"left\",\n    background: \"#fff\"\n  },\n  td: {\n    padding: \"8px\",\n    border: \"1px solid #f2f7ff\",\n    textAlign: \"right\",\n    background: \"#fff\",\n    whiteSpace: \"nowrap\"\n  },\n  tdTotals: {\n    padding: \"8px\",\n    borderTop: \"2px solid #e6eefb\",\n    borderLeft: \"1px solid #f2f7ff\",\n    borderRight: \"1px solid #f2f7ff\",\n    textAlign: \"right\",\n    background: \"#fbfdff\",\n    fontWeight: 800\n  },\n  tdNameTotals: {\n    padding: \"8px\",\n    borderTop: \"2px solid #e6eefb\",\n    borderLeft: \"1px solid #f2f7ff\",\n    borderRight: \"1px solid #f2f7ff\",\n    background: \"#fbfdff\",\n    fontWeight: 800,\n    textAlign: \"left\"\n  },\n  totalsRow: {\n    background: \"#fbfdff\"\n  },\n  ltr: {\n    direction: \"ltr\",\n    unicodeBidi: \"isolate\"\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}