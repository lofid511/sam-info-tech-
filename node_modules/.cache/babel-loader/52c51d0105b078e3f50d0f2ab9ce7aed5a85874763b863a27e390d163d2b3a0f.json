{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// pointage.js\n// Opens a modal window to record monthly attendance (\"pointage\") for a personnel.\n// - Registers window event listener \"openPointage\" and exports openPointage(detail).\n// - If detail.personnel is provided it opens for that person, otherwise lets user select personnel.\n// - Shows all working days of chosen month (Fridays excluded), allows toggling presence per day.\n// - Computes salary_per_day, days_present, salary_due (salary_per_day * days_present - avance).\n// - Loads existing pointage for person/month (if any) and pre-fills the checkboxes.\n// - Saves pointage via window.pywebview.api.save_pointage(payload) and also exposes window.openPointage for debugging.\n//\n// Usage:\n// - Ensure this file is executed at app startup (e.g. import './pointage' in App.js) OR rely on dynamic import + exported openPointage.\n// - To open programmatically: window.dispatchEvent(new CustomEvent(\"openPointage\", { detail: { locale: \"fr\"|\"ar\", personnel: { id, nom, prenom, salaire, avance, ... } } }))\n// - Or call openPointage({ locale:\"fr\", personnel: {...} })\n//\n// Notes:\n// - This implementation uses React and ReactDOM (createRoot). Adjust import paths if your build uses different bundler settings.\nimport React,{useEffect,useState}from\"react\";import ReactDOM from\"react-dom/client\";// Helpers\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function monthName(monthIndex){let locale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"fr\";const monthsFr=[\"Janvier\",\"Février\",\"Mars\",\"Avril\",\"Mai\",\"Juin\",\"Juillet\",\"Août\",\"Septembre\",\"Octobre\",\"Novembre\",\"Décembre\"];const monthsAr=[\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];return(locale===\"ar\"?monthsAr:monthsFr)[monthIndex];}function getWorkingDays(year,month){// returns Date objects for all days in month except Fridays (Friday = 5)\nconst days=[];const d=new Date(year,month,1);while(d.getMonth()===month){// In JS: Sunday=0, Monday=1, ... Friday=5, Saturday=6\nif(d.getDay()!==5){days.push(new Date(d));}d.setDate(d.getDate()+1);}return days;}function formatDateISO(d){if(!d)return\"\";const yyyy=d.getFullYear();const mm=String(d.getMonth()+1).padStart(2,\"0\");const dd=String(d.getDate()).padStart(2,\"0\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}function parseNumber(value){if(value===null||value===undefined||value===\"\")return 0;const s=String(value).replace(/\\s+/g,\"\").replace(\",\",\".\");const n=Number(s);return Number.isFinite(n)?n:0;}function formatCurrencyFR(value){if(value===null||value===undefined||value===\"\")return\"\";const n=Number(value);if(Number.isNaN(n))return String(value);return n.toLocaleString(\"fr-FR\",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\\u202f/g,\" \");}// Modal component\nfunction PointageModal(_ref){let{detail={},onClose}=_ref;const locale=detail.locale||\"fr\";const T={fr:{title:\"Pointage / Calcul salaire\",selectPersonnel:\"Sélectionner le personnel\",monthLabel:\"Mois\",yearLabel:\"Année\",workingDaysNote:\"Jours ouvrables (vendredis exclus)\",presentLabel:\"Présent\",daysPresent:\"Présences\",salaryPerDay:\"Salaire par jour\",salaryDue:\"Salaire dû\",advance:\"Avance\",save:\"Enregistrer le pointage\",close:\"Fermer\",loading:\"Chargement...\",noPersonnel:\"Aucun personnel sélectionné.\",savedOK:\"Pointage enregistré.\"},ar:{title:\"تسجيل الحضور / حساب الراتب\",selectPersonnel:\"اختر الموظف\",monthLabel:\"الشهر\",yearLabel:\"السنة\",workingDaysNote:\"أيام العمل (باستثناء الجمعة)\",presentLabel:\"حاضر\",daysPresent:\"الحضور\",salaryPerDay:\"الراتب اليومي\",salaryDue:\"المبلغ المستحق\",advance:\"السلفة\",save:\"حفظ التسجيل\",close:\"إغلاق\",loading:\"جاري التحميل...\",noPersonnel:\"لم يتم اختيار موظف.\",savedOK:\"تم حفظ التسجيل.\"}}[locale];const[personnelList,setPersonnelList]=useState([]);const[selectedPersonnel,setSelectedPersonnel]=useState(detail.personnel||null);const now=new Date();const[year,setYear]=useState(now.getFullYear());const[month,setMonth]=useState(now.getMonth());// 0-11\nconst[workingDays,setWorkingDays]=useState([]);const[presentMap,setPresentMap]=useState({});// isoDate -> boolean\nconst[isSaving,setIsSaving]=useState(false);const[loadingPersonnel,setLoadingPersonnel]=useState(false);const[error,setError]=useState(\"\");// build working days when month/year changes\nuseEffect(()=>{const days=getWorkingDays(year,month);setWorkingDays(days);// set default presentMap = true for each day\nconst map={};days.forEach(d=>{map[formatDateISO(d)]=true;});setPresentMap(map);},[year,month]);// if no personnel passed, fetch personnel list\nuseEffect(()=>{let mounted=true;async function loadPersonnel(){if(selectedPersonnel)return;setLoadingPersonnel(true);try{var _window$pywebview,_window$pywebview$api,_window$pywebview$api2;const res=await((_window$pywebview=window.pywebview)===null||_window$pywebview===void 0?void 0:(_window$pywebview$api=_window$pywebview.api)===null||_window$pywebview$api===void 0?void 0:(_window$pywebview$api2=_window$pywebview$api.get_personnel)===null||_window$pywebview$api2===void 0?void 0:_window$pywebview$api2.call(_window$pywebview$api));if(!mounted)return;setPersonnelList(Array.isArray(res)?res:[]);}catch(e){console.error(\"pointage: failed to load personnel\",e);setPersonnelList([]);}finally{setLoadingPersonnel(false);}}loadPersonnel();return()=>{mounted=false;};},[selectedPersonnel]);// load existing pointage for this personnel/year/month if exists\nuseEffect(()=>{let mounted=true;async function loadExisting(){if(!selectedPersonnel||!selectedPersonnel.id)return;try{var _window$pywebview2,_window$pywebview2$ap,_window$pywebview2$ap2;const rec=await((_window$pywebview2=window.pywebview)===null||_window$pywebview2===void 0?void 0:(_window$pywebview2$ap=_window$pywebview2.api)===null||_window$pywebview2$ap===void 0?void 0:(_window$pywebview2$ap2=_window$pywebview2$ap.get_pointage_for_person_month)===null||_window$pywebview2$ap2===void 0?void 0:_window$pywebview2$ap2.call(_window$pywebview2$ap,selectedPersonnel.id,year,month+1));if(!mounted)return;if(rec){// rec.dates_present may be array or JSON string\nlet dates=rec.dates_present||rec.dates_present_text||rec.dates_present_json||null;if(typeof dates===\"string\"){try{dates=JSON.parse(dates);}catch(e){}}if(Array.isArray(dates)){const map={};workingDays.forEach(d=>{const iso=formatDateISO(d);map[iso]=dates.includes(iso);});setPresentMap(map);}else{// fallback - keep defaults\n}}}catch(e){// ignore\nconsole.warn(\"pointage: no existing record or failed to load\",e);}}loadExisting();return()=>{mounted=false;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[selectedPersonnel,year,month/*workingDays*/]);const totalWorkingDays=workingDays.length;const daysPresent=Object.values(presentMap).filter(Boolean).length;const monthlySalary=parseNumber(selectedPersonnel&&selectedPersonnel.salaire||(selectedPersonnel===null||selectedPersonnel===void 0?void 0:selectedPersonnel.salary)||0);const avance=parseNumber(selectedPersonnel&&selectedPersonnel.avance||(selectedPersonnel===null||selectedPersonnel===void 0?void 0:selectedPersonnel.avance)||0);const salaryPerDay=totalWorkingDays>0?monthlySalary/totalWorkingDays:0;const salaryDue=salaryPerDay*daysPresent-avance;function toggleDay(iso){setPresentMap(prev=>_objectSpread(_objectSpread({},prev),{},{[iso]:!prev[iso]}));}async function handleSave(){if(!selectedPersonnel||!selectedPersonnel.id){setError(T.noPersonnel);return;}setError(\"\");setIsSaving(true);const payload={personnel_id:selectedPersonnel.id,year,month:month+1,// 1..12\ndays_total:totalWorkingDays,days_present:daysPresent,salary_per_day:salaryPerDay,salary_due:salaryDue,dates_present:Object.entries(presentMap).filter(_ref2=>{let[k,v]=_ref2;return v;}).map(_ref3=>{let[k]=_ref3;return k;})};console.log(\"pointage: saving payload\",payload);try{if(window.pywebview&&window.pywebview.api&&window.pywebview.api.save_pointage){const result=await window.pywebview.api.save_pointage(payload);console.log(\"pointage: save result\",result);}else{// fallback: store in localStorage for demo\nconst key=\"pointage_\".concat(selectedPersonnel.id,\"_\").concat(year,\"_\").concat(month+1);localStorage.setItem(key,JSON.stringify(payload));console.log(\"pointage: saved to localStorage\",key);}setIsSaving(false);// simple confirmation then close\nalert(T.savedOK);onClose();}catch(e){console.error(\"pointage: save failed\",e);setError((locale===\"fr\"?\"Erreur lors de l'enregistrement.\":\"فشل الحفظ.\")+(e!==null&&e!==void 0&&e.message?\" \".concat(e.message):\"\"));setIsSaving(false);}}// If user chooses a personnel from the dropdown\nfunction handleSelectPersonnelId(id){const p=personnelList.find(x=>String(x.id)===String(id));setSelectedPersonnel(p||null);}// Render\nreturn/*#__PURE__*/_jsx(\"div\",{style:styles.overlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),{},{direction:locale===\"ar\"?\"rtl\":\"ltr\",textAlign:locale===\"ar\"?\"right\":\"left\"}),children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:T.title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:styles.closeButton,children:\"\\u2716\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.controlsRow,children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{style:styles.labelSmall,children:T.selectPersonnel}),selectedPersonnel?/*#__PURE__*/_jsxs(\"div\",{style:styles.personnelCard,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[selectedPersonnel.nom,\" \",selectedPersonnel.prenom]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:\"#666\"},children:selectedPersonnel.poste||\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12},children:locale===\"fr\"?\"Salaire mensuel\":\"الراتب الشهري\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700},children:[formatCurrencyFR(monthlySalary),\" DZD\"]})]})]}):loadingPersonnel?/*#__PURE__*/_jsx(\"div\",{children:T.loading}):/*#__PURE__*/_jsxs(\"select\",{style:styles.select,defaultValue:\"\",onChange:e=>handleSelectPersonnelId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:locale===\"fr\"?\"— Select —\":\"— اختر —\"}),personnelList.map(p=>/*#__PURE__*/_jsxs(\"option\",{value:p.id,children:[p.nom,\" \",p.prenom,\" \",p.poste?\" - \".concat(p.poste):\"\"]},p.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:260},children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.labelSmall,children:[T.monthLabel,\" / \",T.yearLabel]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(\"select\",{value:month,onChange:e=>setMonth(Number(e.target.value)),style:styles.select,children:Array.from({length:12}).map((_,i)=>/*#__PURE__*/_jsx(\"option\",{value:i,children:monthName(i,locale)},i))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:year,onChange:e=>setYear(Number(e.target.value)),style:_objectSpread(_objectSpread({},styles.select),{},{width:100})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:6,fontSize:12,color:\"#666\"},children:[totalWorkingDays,\" \",locale===\"fr\"?\"jours ouvrables\":\"أيام عمل\",\" (\",locale===\"fr\"?\"vendredis exclus\":\"باستثناء الجمعة\",\")\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,marginBottom:8},children:T.workingDaysNote}),/*#__PURE__*/_jsx(\"div\",{style:styles.daysGrid,children:workingDays.map(d=>{const iso=formatDateISO(d);const label=\"\".concat(String(d.getDate()).padStart(2,\"0\"),\"/\").concat(String(d.getMonth()+1).padStart(2,\"0\"));const weekday=d.toLocaleDateString(locale===\"fr\"?\"fr-FR\":\"ar\",{weekday:\"short\"});return/*#__PURE__*/_jsxs(\"label\",{style:styles.dayItem,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:!!presentMap[iso],onChange:()=>toggleDay(iso)}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:8},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13},children:[label,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#666\",fontSize:12},children:[\"(\",weekday,\")\"]})]})})]},iso);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:\"flex\",gap:12,alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:14,color:\"#666\"},children:T.daysPresent}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:18},children:[daysPresent,\" / \",totalWorkingDays]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:\"#666\"},children:T.salaryPerDay}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700},children:[formatCurrencyFR(salaryPerDay),\" DZD\"]}),/*#__PURE__*/_jsx(\"div\",{style:{height:6}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:\"#666\"},children:T.salaryDue}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:900,fontSize:18,color:salaryDue<0?\"#c00\":\"#14355f\"},children:[formatCurrencyFR(salaryDue),\" DZD\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,color:\"#666\"},children:[T.advance,\": \",formatCurrencyFR(avance),\" DZD\"]})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:14,display:\"flex\",gap:8,justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:styles.btnSecondary,children:T.close}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,style:styles.btnPrimary,disabled:isSaving||!selectedPersonnel,children:isSaving?locale===\"fr\"?\"Enregistrement...\":\"جاري الحفظ...\":T.save})]})]})});}// Programmatic opener: mount modal into document.body\nexport function openPointage(){let detail=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};console.log(\"[pointage] openPointage called with detail:\",detail);const id=\"pointage-modal-root\";let container=document.getElementById(id);if(!container){container=document.createElement(\"div\");container.id=id;document.body.appendChild(container);}// cleanup helper\nfunction cleanup(root,containerEl){try{root.unmount();}catch(e){/* ignore */}try{containerEl.remove();}catch(e){/* ignore */}}try{const root=ReactDOM.createRoot(container);const onClose=()=>cleanup(root,container);root.render(/*#__PURE__*/_jsx(PointageModal,{detail:detail,onClose:onClose}));}catch(err){// fallback for older React\ntry{const onClose=()=>{try{ReactDOM.unmountComponentAtNode(container);}catch(e){}try{container.remove();}catch(e){}};// eslint-disable-next-line\nReactDOM.render(/*#__PURE__*/_jsx(PointageModal,{detail:detail,onClose:onClose}),container);}catch(e){console.error(\"[pointage] failed to render modal:\",e);alert(\"Failed to open pointage (see console).\");}}}// Event listener registration so dispatching the custom event works\nfunction onOpenPointageEvent(e){try{console.log(\"[pointage] openPointage event received:\",e===null||e===void 0?void 0:e.detail);openPointage((e===null||e===void 0?void 0:e.detail)||{});}catch(err){console.error(\"[pointage] event handler error:\",err);}}try{window.__pointageLoaded=true;window.addEventListener(\"openPointage\",onOpenPointageEvent);// expose for console\nwindow.openPointage=window.openPointage||openPointage;console.log(\"[pointage] module loaded. Listener registered. window.__pointageLoaded=true\");}catch(e){console.error(\"[pointage] could not register openPointage listener:\",e);}// Styles (inline simple styles)\nconst styles={overlay:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},modal:{width:\"94%\",maxWidth:980,background:\"#fff\",borderRadius:10,padding:16,boxShadow:\"0 12px 40px rgba(0,0,0,0.35)\"},header:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},closeButton:{border:\"none\",background:\"transparent\",fontSize:18,cursor:\"pointer\"},controlsRow:{display:\"flex\",gap:12,alignItems:\"flex-start\"},labelSmall:{fontSize:12,color:\"#333\",marginBottom:6,display:\"block\"},select:{padding:\"0.45rem 0.6rem\",borderRadius:6,border:\"1px solid #ccc\",background:\"#fff\",fontSize:14,width:\"100%\"},personnelCard:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:\"8px 10px\",border:\"1px solid #e9eef9\",borderRadius:8,background:\"#fbfdff\"},daysGrid:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(160px, 1fr))\",gap:8,maxHeight:320,overflowY:\"auto\",padding:6,border:\"1px solid #eef3fb\",borderRadius:6,background:\"#fff\"},dayItem:{display:\"flex\",alignItems:\"center\",gap:8,padding:\"6px 8px\",borderRadius:6,background:\"#fbfbff\",border:\"1px solid #f0f6ff\",fontSize:13},btnPrimary:{padding:\"0.6rem 1rem\",background:\"#3477eb\",color:\"#fff\",border:\"none\",borderRadius:6,cursor:\"pointer\",fontWeight:700},btnSecondary:{padding:\"0.5rem 0.9rem\",background:\"#f4f6fb\",border:\"none\",borderRadius:6,cursor:\"pointer\"}};export default openPointage;","map":{"version":3,"names":["React","useEffect","useState","ReactDOM","jsx","_jsx","jsxs","_jsxs","monthName","monthIndex","locale","arguments","length","undefined","monthsFr","monthsAr","getWorkingDays","year","month","days","d","Date","getMonth","getDay","push","setDate","getDate","formatDateISO","yyyy","getFullYear","mm","String","padStart","dd","concat","parseNumber","value","s","replace","n","Number","isFinite","formatCurrencyFR","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","PointageModal","_ref","detail","onClose","T","fr","title","selectPersonnel","monthLabel","yearLabel","workingDaysNote","presentLabel","daysPresent","salaryPerDay","salaryDue","advance","save","close","loading","noPersonnel","savedOK","ar","personnelList","setPersonnelList","selectedPersonnel","setSelectedPersonnel","personnel","now","setYear","setMonth","workingDays","setWorkingDays","presentMap","setPresentMap","isSaving","setIsSaving","loadingPersonnel","setLoadingPersonnel","error","setError","map","forEach","mounted","loadPersonnel","_window$pywebview","_window$pywebview$api","_window$pywebview$api2","res","window","pywebview","api","get_personnel","call","Array","isArray","e","console","loadExisting","id","_window$pywebview2","_window$pywebview2$ap","_window$pywebview2$ap2","rec","get_pointage_for_person_month","dates","dates_present","dates_present_text","dates_present_json","JSON","parse","iso","includes","warn","totalWorkingDays","Object","values","filter","Boolean","monthlySalary","salaire","salary","avance","toggleDay","prev","_objectSpread","handleSave","payload","personnel_id","days_total","days_present","salary_per_day","salary_due","entries","_ref2","k","v","_ref3","log","save_pointage","result","key","localStorage","setItem","stringify","alert","message","handleSelectPersonnelId","p","find","x","style","styles","overlay","children","modal","direction","textAlign","header","margin","onClick","closeButton","controlsRow","flex","labelSmall","personnelCard","nom","prenom","fontSize","color","poste","fontWeight","select","defaultValue","onChange","target","width","display","gap","from","_","i","type","marginTop","marginBottom","daysGrid","label","weekday","toLocaleDateString","dayItem","checked","marginLeft","alignItems","justifyContent","height","btnSecondary","btnPrimary","disabled","openPointage","container","document","getElementById","createElement","body","appendChild","cleanup","root","containerEl","unmount","remove","createRoot","render","err","unmountComponentAtNode","onOpenPointageEvent","__pointageLoaded","addEventListener","position","inset","background","zIndex","maxWidth","borderRadius","padding","boxShadow","border","cursor","gridTemplateColumns","maxHeight","overflowY"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/pointage.js"],"sourcesContent":["// pointage.js\n// Opens a modal window to record monthly attendance (\"pointage\") for a personnel.\n// - Registers window event listener \"openPointage\" and exports openPointage(detail).\n// - If detail.personnel is provided it opens for that person, otherwise lets user select personnel.\n// - Shows all working days of chosen month (Fridays excluded), allows toggling presence per day.\n// - Computes salary_per_day, days_present, salary_due (salary_per_day * days_present - avance).\n// - Loads existing pointage for person/month (if any) and pre-fills the checkboxes.\n// - Saves pointage via window.pywebview.api.save_pointage(payload) and also exposes window.openPointage for debugging.\n//\n// Usage:\n// - Ensure this file is executed at app startup (e.g. import './pointage' in App.js) OR rely on dynamic import + exported openPointage.\n// - To open programmatically: window.dispatchEvent(new CustomEvent(\"openPointage\", { detail: { locale: \"fr\"|\"ar\", personnel: { id, nom, prenom, salaire, avance, ... } } }))\n// - Or call openPointage({ locale:\"fr\", personnel: {...} })\n//\n// Notes:\n// - This implementation uses React and ReactDOM (createRoot). Adjust import paths if your build uses different bundler settings.\n\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\n// Helpers\nfunction monthName(monthIndex, locale = \"fr\") {\n  const monthsFr = [\"Janvier\",\"Février\",\"Mars\",\"Avril\",\"Mai\",\"Juin\",\"Juillet\",\"Août\",\"Septembre\",\"Octobre\",\"Novembre\",\"Décembre\"];\n  const monthsAr = [\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];\n  return (locale === \"ar\" ? monthsAr : monthsFr)[monthIndex];\n}\n\nfunction getWorkingDays(year, month) {\n  // returns Date objects for all days in month except Fridays (Friday = 5)\n  const days = [];\n  const d = new Date(year, month, 1);\n  while (d.getMonth() === month) {\n    // In JS: Sunday=0, Monday=1, ... Friday=5, Saturday=6\n    if (d.getDay() !== 5) {\n      days.push(new Date(d));\n    }\n    d.setDate(d.getDate() + 1);\n  }\n  return days;\n}\n\nfunction formatDateISO(d) {\n  if (!d) return \"\";\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n}\n\nfunction parseNumber(value) {\n  if (value === null || value === undefined || value === \"\") return 0;\n  const s = String(value).replace(/\\s+/g, \"\").replace(\",\", \".\");\n  const n = Number(s);\n  return Number.isFinite(n) ? n : 0;\n}\n\nfunction formatCurrencyFR(value) {\n  if (value === null || value === undefined || value === \"\") return \"\";\n  const n = Number(value);\n  if (Number.isNaN(n)) return String(value);\n  return n.toLocaleString(\"fr-FR\", { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(/\\u202f/g, \" \");\n}\n\n// Modal component\nfunction PointageModal({ detail = {}, onClose }) {\n  const locale = detail.locale || \"fr\";\n  const T = {\n    fr: {\n      title: \"Pointage / Calcul salaire\",\n      selectPersonnel: \"Sélectionner le personnel\",\n      monthLabel: \"Mois\",\n      yearLabel: \"Année\",\n      workingDaysNote: \"Jours ouvrables (vendredis exclus)\",\n      presentLabel: \"Présent\",\n      daysPresent: \"Présences\",\n      salaryPerDay: \"Salaire par jour\",\n      salaryDue: \"Salaire dû\",\n      advance: \"Avance\",\n      save: \"Enregistrer le pointage\",\n      close: \"Fermer\",\n      loading: \"Chargement...\",\n      noPersonnel: \"Aucun personnel sélectionné.\",\n      savedOK: \"Pointage enregistré.\"\n    },\n    ar: {\n      title: \"تسجيل الحضور / حساب الراتب\",\n      selectPersonnel: \"اختر الموظف\",\n      monthLabel: \"الشهر\",\n      yearLabel: \"السنة\",\n      workingDaysNote: \"أيام العمل (باستثناء الجمعة)\",\n      presentLabel: \"حاضر\",\n      daysPresent: \"الحضور\",\n      salaryPerDay: \"الراتب اليومي\",\n      salaryDue: \"المبلغ المستحق\",\n      advance: \"السلفة\",\n      save: \"حفظ التسجيل\",\n      close: \"إغلاق\",\n      loading: \"جاري التحميل...\",\n      noPersonnel: \"لم يتم اختيار موظف.\",\n      savedOK: \"تم حفظ التسجيل.\"\n    }\n  }[locale];\n\n  const [personnelList, setPersonnelList] = useState([]);\n  const [selectedPersonnel, setSelectedPersonnel] = useState(detail.personnel || null);\n  const now = new Date();\n  const [year, setYear] = useState(now.getFullYear());\n  const [month, setMonth] = useState(now.getMonth()); // 0-11\n  const [workingDays, setWorkingDays] = useState([]);\n  const [presentMap, setPresentMap] = useState({}); // isoDate -> boolean\n  const [isSaving, setIsSaving] = useState(false);\n  const [loadingPersonnel, setLoadingPersonnel] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // build working days when month/year changes\n  useEffect(() => {\n    const days = getWorkingDays(year, month);\n    setWorkingDays(days);\n    // set default presentMap = true for each day\n    const map = {};\n    days.forEach(d => { map[formatDateISO(d)] = true; });\n    setPresentMap(map);\n  }, [year, month]);\n\n  // if no personnel passed, fetch personnel list\n  useEffect(() => {\n    let mounted = true;\n    async function loadPersonnel() {\n      if (selectedPersonnel) return;\n      setLoadingPersonnel(true);\n      try {\n        const res = await window.pywebview?.api?.get_personnel?.();\n        if (!mounted) return;\n        setPersonnelList(Array.isArray(res) ? res : []);\n      } catch (e) {\n        console.error(\"pointage: failed to load personnel\", e);\n        setPersonnelList([]);\n      } finally {\n        setLoadingPersonnel(false);\n      }\n    }\n    loadPersonnel();\n    return () => { mounted = false; };\n  }, [selectedPersonnel]);\n\n  // load existing pointage for this personnel/year/month if exists\n  useEffect(() => {\n    let mounted = true;\n    async function loadExisting() {\n      if (!selectedPersonnel || !selectedPersonnel.id) return;\n      try {\n        const rec = await window.pywebview?.api?.get_pointage_for_person_month?.(selectedPersonnel.id, year, month + 1);\n        if (!mounted) return;\n        if (rec) {\n          // rec.dates_present may be array or JSON string\n          let dates = rec.dates_present || rec.dates_present_text || rec.dates_present_json || null;\n          if (typeof dates === \"string\") {\n            try { dates = JSON.parse(dates); } catch (e) {}\n          }\n          if (Array.isArray(dates)) {\n            const map = {};\n            workingDays.forEach(d => {\n              const iso = formatDateISO(d);\n              map[iso] = dates.includes(iso);\n            });\n            setPresentMap(map);\n          } else {\n            // fallback - keep defaults\n          }\n        }\n      } catch (e) {\n        // ignore\n        console.warn(\"pointage: no existing record or failed to load\", e);\n      }\n    }\n    loadExisting();\n    return () => { mounted = false; };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedPersonnel, year, month, /*workingDays*/]);\n\n  const totalWorkingDays = workingDays.length;\n  const daysPresent = Object.values(presentMap).filter(Boolean).length;\n\n  const monthlySalary = parseNumber((selectedPersonnel && selectedPersonnel.salaire) || selectedPersonnel?.salary || 0);\n  const avance = parseNumber((selectedPersonnel && selectedPersonnel.avance) || selectedPersonnel?.avance || 0);\n\n  const salaryPerDay = totalWorkingDays > 0 ? (monthlySalary / totalWorkingDays) : 0;\n  const salaryDue = (salaryPerDay * daysPresent) - avance;\n\n  function toggleDay(iso) {\n    setPresentMap(prev => ({ ...prev, [iso]: !prev[iso] }));\n  }\n\n  async function handleSave() {\n    if (!selectedPersonnel || !selectedPersonnel.id) {\n      setError(T.noPersonnel);\n      return;\n    }\n    setError(\"\");\n    setIsSaving(true);\n    const payload = {\n      personnel_id: selectedPersonnel.id,\n      year,\n      month: month + 1, // 1..12\n      days_total: totalWorkingDays,\n      days_present: daysPresent,\n      salary_per_day: salaryPerDay,\n      salary_due: salaryDue,\n      dates_present: Object.entries(presentMap).filter(([k,v]) => v).map(([k]) => k)\n    };\n    console.log(\"pointage: saving payload\", payload);\n    try {\n      if (window.pywebview && window.pywebview.api && window.pywebview.api.save_pointage) {\n        const result = await window.pywebview.api.save_pointage(payload);\n        console.log(\"pointage: save result\", result);\n      } else {\n        // fallback: store in localStorage for demo\n        const key = `pointage_${selectedPersonnel.id}_${year}_${month+1}`;\n        localStorage.setItem(key, JSON.stringify(payload));\n        console.log(\"pointage: saved to localStorage\", key);\n      }\n      setIsSaving(false);\n      // simple confirmation then close\n      alert(T.savedOK);\n      onClose();\n    } catch (e) {\n      console.error(\"pointage: save failed\", e);\n      setError((locale === \"fr\" ? \"Erreur lors de l'enregistrement.\" : \"فشل الحفظ.\") + (e?.message ? ` ${e.message}` : \"\"));\n      setIsSaving(false);\n    }\n  }\n\n  // If user chooses a personnel from the dropdown\n  function handleSelectPersonnelId(id) {\n    const p = personnelList.find(x => String(x.id) === String(id));\n    setSelectedPersonnel(p || null);\n  }\n\n  // Render\n  return (\n    <div style={styles.overlay}>\n      <div style={{ ...styles.modal, direction: locale === \"ar\" ? \"rtl\" : \"ltr\", textAlign: locale === \"ar\" ? \"right\" : \"left\" }}>\n        <div style={styles.header}>\n          <h3 style={{ margin: 0 }}>{T.title}</h3>\n          <button onClick={onClose} style={styles.closeButton}>✖</button>\n        </div>\n\n        <div style={styles.controlsRow}>\n          <div style={{ flex: 1 }}>\n            <label style={styles.labelSmall}>{T.selectPersonnel}</label>\n            {selectedPersonnel ? (\n              <div style={styles.personnelCard}>\n                <div>\n                  <strong>{selectedPersonnel.nom} {selectedPersonnel.prenom}</strong>\n                  <div style={{ fontSize: 12, color: \"#666\" }}>{selectedPersonnel.poste || \"\"}</div>\n                </div>\n                <div style={{ textAlign: \"right\" }}>\n                  <div style={{ fontSize: 12 }}>{locale === \"fr\" ? \"Salaire mensuel\" : \"الراتب الشهري\"}</div>\n                  <div style={{ fontWeight: 700 }}>{formatCurrencyFR(monthlySalary)} DZD</div>\n                </div>\n              </div>\n            ) : (\n              loadingPersonnel ? <div>{T.loading}</div> : (\n                <select style={styles.select} defaultValue=\"\" onChange={(e) => handleSelectPersonnelId(e.target.value)}>\n                  <option value=\"\">{locale === \"fr\" ? \"— Select —\" : \"— اختر —\"}</option>\n                  {personnelList.map(p => (\n                    <option key={p.id} value={p.id}>{p.nom} {p.prenom} {p.poste ? ` - ${p.poste}` : \"\"}</option>\n                  ))}\n                </select>\n              )\n            )}\n          </div>\n\n          <div style={{ width: 260 }}>\n            <label style={styles.labelSmall}>{T.monthLabel} / {T.yearLabel}</label>\n            <div style={{ display: \"flex\", gap: 8 }}>\n              <select value={month} onChange={(e) => setMonth(Number(e.target.value))} style={styles.select}>\n                {Array.from({ length: 12 }).map((_, i) => <option key={i} value={i}>{monthName(i, locale)}</option>)}\n              </select>\n              <input type=\"number\" value={year} onChange={(e) => setYear(Number(e.target.value))} style={{ ...styles.select, width: 100 }} />\n            </div>\n            <div style={{ marginTop: 6, fontSize: 12, color: \"#666\" }}>\n              {totalWorkingDays} {locale === \"fr\" ? \"jours ouvrables\" : \"أيام عمل\"} ({locale === \"fr\" ? \"vendredis exclus\" : \"باستثناء الجمعة\"})\n            </div>\n          </div>\n        </div>\n\n        <div style={{ marginTop: 12 }}>\n          <div style={{ fontWeight: 700, marginBottom: 8 }}>{T.workingDaysNote}</div>\n          <div style={styles.daysGrid}>\n            {workingDays.map(d => {\n              const iso = formatDateISO(d);\n              const label = `${String(d.getDate()).padStart(2,\"0\")}/${String(d.getMonth()+1).padStart(2,\"0\")}`;\n              const weekday = d.toLocaleDateString(locale === \"fr\" ? \"fr-FR\" : \"ar\", { weekday: \"short\" });\n              return (\n                <label key={iso} style={styles.dayItem}>\n                  <input type=\"checkbox\" checked={!!presentMap[iso]} onChange={() => toggleDay(iso)} />\n                  <div style={{ marginLeft: 8 }}>\n                    <div style={{ fontSize: 13 }}>{label} <span style={{ color: \"#666\", fontSize: 12 }}>({weekday})</span></div>\n                  </div>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n\n        <div style={{ marginTop: 12, display: \"flex\", gap: 12, alignItems: \"center\", justifyContent: \"space-between\" }}>\n          <div>\n            <div style={{ fontSize: 14, color: \"#666\" }}>{T.daysPresent}</div>\n            <div style={{ fontWeight: 700, fontSize: 18 }}>{daysPresent} / {totalWorkingDays}</div>\n          </div>\n\n          <div style={{ textAlign: \"right\" }}>\n            <div style={{ fontSize: 13, color: \"#666\" }}>{T.salaryPerDay}</div>\n            <div style={{ fontWeight: 700 }}>{formatCurrencyFR(salaryPerDay)} DZD</div>\n            <div style={{ height: 6 }} />\n            <div style={{ fontSize: 13, color: \"#666\" }}>{T.salaryDue}</div>\n            <div style={{ fontWeight: 900, fontSize: 18, color: salaryDue < 0 ? \"#c00\" : \"#14355f\" }}>\n              {formatCurrencyFR(salaryDue)} DZD\n            </div>\n            <div style={{ fontSize: 11, color: \"#666\" }}>{T.advance}: {formatCurrencyFR(avance)} DZD</div>\n          </div>\n        </div>\n\n        {error && <div style={{ marginTop: 8, color: \"red\" }}>{error}</div>}\n\n        <div style={{ marginTop: 14, display: \"flex\", gap: 8, justifyContent: \"flex-end\" }}>\n          <button onClick={onClose} style={styles.btnSecondary}>{T.close}</button>\n          <button onClick={handleSave} style={styles.btnPrimary} disabled={isSaving || !selectedPersonnel}>\n            {isSaving ? (locale === \"fr\" ? \"Enregistrement...\" : \"جاري الحفظ...\") : T.save}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Programmatic opener: mount modal into document.body\nexport function openPointage(detail = {}) {\n  console.log(\"[pointage] openPointage called with detail:\", detail);\n  const id = \"pointage-modal-root\";\n  let container = document.getElementById(id);\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.id = id;\n    document.body.appendChild(container);\n  }\n\n  // cleanup helper\n  function cleanup(root, containerEl) {\n    try {\n      root.unmount();\n    } catch (e) { /* ignore */ }\n    try {\n      containerEl.remove();\n    } catch (e) { /* ignore */ }\n  }\n\n  try {\n    const root = ReactDOM.createRoot(container);\n    const onClose = () => cleanup(root, container);\n    root.render(<PointageModal detail={detail} onClose={onClose} />);\n  } catch (err) {\n    // fallback for older React\n    try {\n      const onClose = () => {\n        try { ReactDOM.unmountComponentAtNode(container); } catch (e) {}\n        try { container.remove(); } catch (e) {}\n      };\n      // eslint-disable-next-line\n      ReactDOM.render(<PointageModal detail={detail} onClose={onClose} />, container);\n    } catch (e) {\n      console.error(\"[pointage] failed to render modal:\", e);\n      alert(\"Failed to open pointage (see console).\");\n    }\n  }\n}\n\n// Event listener registration so dispatching the custom event works\nfunction onOpenPointageEvent(e) {\n  try {\n    console.log(\"[pointage] openPointage event received:\", e?.detail);\n    openPointage(e?.detail || {});\n  } catch (err) {\n    console.error(\"[pointage] event handler error:\", err);\n  }\n}\n\ntry {\n  window.__pointageLoaded = true;\n  window.addEventListener(\"openPointage\", onOpenPointageEvent);\n  // expose for console\n  window.openPointage = window.openPointage || openPointage;\n  console.log(\"[pointage] module loaded. Listener registered. window.__pointageLoaded=true\");\n} catch (e) {\n  console.error(\"[pointage] could not register openPointage listener:\", e);\n}\n\n// Styles (inline simple styles)\nconst styles = {\n  overlay: {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,0.45)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 9999\n  },\n  modal: {\n    width: \"94%\",\n    maxWidth: 980,\n    background: \"#fff\",\n    borderRadius: 10,\n    padding: 16,\n    boxShadow: \"0 12px 40px rgba(0,0,0,0.35)\"\n  },\n  header: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  closeButton: {\n    border: \"none\",\n    background: \"transparent\",\n    fontSize: 18,\n    cursor: \"pointer\"\n  },\n  controlsRow: {\n    display: \"flex\",\n    gap: 12,\n    alignItems: \"flex-start\"\n  },\n  labelSmall: {\n    fontSize: 12,\n    color: \"#333\",\n    marginBottom: 6,\n    display: \"block\"\n  },\n  select: {\n    padding: \"0.45rem 0.6rem\",\n    borderRadius: 6,\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    fontSize: 14,\n    width: \"100%\"\n  },\n  personnelCard: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: \"8px 10px\",\n    border: \"1px solid #e9eef9\",\n    borderRadius: 8,\n    background: \"#fbfdff\"\n  },\n  daysGrid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fit, minmax(160px, 1fr))\",\n    gap: 8,\n    maxHeight: 320,\n    overflowY: \"auto\",\n    padding: 6,\n    border: \"1px solid #eef3fb\",\n    borderRadius: 6,\n    background: \"#fff\"\n  },\n  dayItem: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: 8,\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    background: \"#fbfbff\",\n    border: \"1px solid #f0f6ff\",\n    fontSize: 13\n  },\n  btnPrimary: {\n    padding: \"0.6rem 1rem\",\n    background: \"#3477eb\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 6,\n    cursor: \"pointer\",\n    fontWeight: 700\n  },\n  btnSecondary: {\n    padding: \"0.5rem 0.9rem\",\n    background: \"#f4f6fb\",\n    border: \"none\",\n    borderRadius: 6,\n    cursor: \"pointer\"\n  }\n};\n\nexport default openPointage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}