{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";/*\n  caisse.js\n\n  Updated:\n  - When the user clicks \"Ajouter\", show a large choice panel with two big buttons:\n      * Encaissement (green, + icon)\n      * D√©pense (red, - icon)\n    After the user chooses one, the regular add modal opens with:\n      - operation prefilled to \"Encaissement\" or \"D√©pense\"\n      - nature as a dropdown containing the specific options per type\n  - Nature options:\n      Encaissement: [\"Paiement client\", \"Autre\"]\n      D√©pense: [\"Paiement vol\", \"Paiement hotel\", \"Charge bureautique\", \"Autre charge\"]\n  - All other functionality retained from previous implementation:\n      - table with columns: date, heure, operation, nature, montant, solde\n      - Edit / Delete / Print controls\n      - fetch/save/delete via window.pywebview.api (get_caisse/add_caisse/update_caisse/delete_caisse)\n*/import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatNumberSpaceDot(value){if(value===null||value===undefined||value===\"\")return\"\";const cleaned=String(value).replace(/\\s+/g,\"\").replace(\",\",\".\");const n=Number(cleaned);if(!Number.isFinite(n))return String(value);const parts=n.toFixed(2).split(\".\");parts[0]=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\" \");return parts.join(\".\");}function parseNumber(value){if(value===null||value===undefined||value===\"\")return 0;const s=String(value).replace(/\\s+/g,\"\").replace(\",\",\".\");const n=Number(s);return Number.isFinite(n)?n:0;}function formatDateToDisplay(iso){if(!iso)return\"\";const m=iso.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);if(m)return\"\".concat(m[3],\"/\").concat(m[2],\"/\").concat(m[1]);return iso;}function toISODate(input){if(!input)return\"\";if(input instanceof Date){const yyyy=input.getFullYear();const mm=String(input.getMonth()+1).padStart(2,\"0\");const dd=String(input.getDate()).padStart(2,\"0\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(input)){const[dd,mm,yyyy]=input.split(\"/\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}if(/^\\d{4}-\\d{2}-\\d{2}$/.test(input))return input;return input;}export default function CaissePage(_ref){let{locale=\"fr\"}=_ref;const isRtl=locale===\"ar\";const[entries,setEntries]=useState([]);const[loading,setLoading]=useState(false);const[selectedIndex,setSelectedIndex]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[showModal,setShowModal]=useState(false);const[showAddChoice,setShowAddChoice]=useState(false);// new: show choice panel\nconst[modalMode,setModalMode]=useState(\"add\");// add | edit\nconst[form,setForm]=useState({id:null,date:\"\",// YYYY-MM-DD\nheure:\"\",// HH:MM\noperation:\"\",nature:\"\",montant:\"\",// numeric string\nsolde:\"\"// numeric string (optional)\n});const[error,setError]=useState(\"\");const TABLE_FIELDS=[\"date\",\"heure\",\"operation\",\"nature\",\"montant\",\"solde\"];const headersFr=[\"#\",\"Date\",\"Heure\",\"Op√©ration\",\"Nature\",\"Montant\",\"Solde\"];const headersAr=[\"#\",\"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\",\"ÿßŸÑÿ≥ÿßÿπÿ©\",\"ÿßŸÑÿπŸÖŸÑŸäÿ©\",\"ÿßŸÑŸÜŸàÿπ\",\"ÿßŸÑŸÖÿ®ŸÑÿ∫\",\"ÿßŸÑÿ±ÿµŸäÿØ\"];const headers=locale===\"ar\"?headersAr:headersFr;// nature options\nconst natureOptions={encaissement:locale===\"ar\"?[\"ÿØŸÅÿπ ÿßŸÑÿ≤ÿ®ŸàŸÜ\",\"ÿ£ÿÆÿ±Ÿâ\"]:[\"Paiement client\",\"Autre\"],depense:locale===\"ar\"?[\"ÿØŸÅÿπ ÿ±ÿ≠ŸÑÿ©\",\"ÿØŸÅÿπ ŸÅŸÜÿØŸÇ\",\"ŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÖŸÉÿ™ÿ®Ÿäÿ©\",\"ŸÖÿµÿ±ŸàŸÅ ÿ¢ÿÆÿ±\"]:[\"Paiement vol\",\"Paiement hotel\",\"Charge bureautique\",\"Autre charge\"]};const directionStyle=isRtl?{direction:\"rtl\"}:{direction:\"ltr\"};async function fetchEntries(){setLoading(true);try{if(window.pywebview&&window.pywebview.api&&window.pywebview.api.get_caisse){const res=await window.pywebview.api.get_caisse();const normalized=(res||[]).map(r=>_objectSpread(_objectSpread({},r),{},{montant:r.montant!==undefined&&r.montant!==null?String(r.montant):\"\",solde:r.solde!==undefined&&r.solde!==null?String(r.solde):\"\",date:r.date||r.date_iso||\"\"}));setEntries(normalized);}else{setEntries([]);}}catch(e){console.error(\"Failed to load caisse entries\",e);setEntries([]);}finally{setLoading(false);}}useEffect(()=>{fetchEntries();},[locale]);const filtered=entries.filter(e=>{const q=searchQuery.trim().toLowerCase();if(!q)return true;return e.date&&e.date.toLowerCase().includes(q)||e.heure&&e.heure.toLowerCase().includes(q)||e.operation&&String(e.operation).toLowerCase().includes(q)||e.nature&&String(e.nature).toLowerCase().includes(q)||String(e.montant||\"\").toLowerCase().includes(q)||String(e.solde||\"\").toLowerCase().includes(q);});function openAddChoice(){setShowAddChoice(true);}function chooseAdd(type){// type: \"encaissement\" or \"depense\"\nsetShowAddChoice(false);setModalMode(\"add\");const now=new Date();const isoDate=toISODate(now);const hh=String(now.getHours()).padStart(2,\"0\");const mm=String(now.getMinutes()).padStart(2,\"0\");const operationLabel=type===\"encaissement\"?locale===\"ar\"?\"ÿ™ÿ≠ÿµŸäŸÑ\":\"Encaissement\":locale===\"ar\"?\"ŸÖÿµÿ±ŸàŸÅ\":\"D√©pense\";// set nature default to first option for that type\nconst natureDefault=type===\"encaissement\"?natureOptions.encaissement[0]:natureOptions.depense[0];setForm({id:null,date:isoDate,heure:\"\".concat(hh,\":\").concat(mm),operation:operationLabel,nature:natureDefault,montant:\"\",solde:\"\"});setShowModal(true);}function openEdit(){var _row$id;if(selectedIndex===null||filtered[selectedIndex]===undefined){alert(locale===\"ar\"?\"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿ≠ÿØŸäÿØ ÿ≥ÿ∑ÿ±.\":\"Please select a row.\");return;}const row=filtered[selectedIndex];setModalMode(\"edit\");setForm({id:(_row$id=row.id)!==null&&_row$id!==void 0?_row$id:null,date:row.date?toISODate(row.date):\"\",heure:row.heure||\"\",operation:row.operation||\"\",nature:row.nature||\"\",montant:row.montant!==undefined&&row.montant!==null?String(row.montant):\"\",solde:row.solde!==undefined&&row.solde!==null?String(row.solde):\"\"});setError(\"\");setShowModal(true);}async function handleDelete(){if(selectedIndex===null||filtered[selectedIndex]===undefined){alert(locale===\"ar\"?\"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿ≠ÿØŸäÿØ ÿ≥ÿ∑ÿ±.\":\"Please select a row.\");return;}const row=filtered[selectedIndex];const name=\"\".concat(row.date||\"\",\" \").concat(row.operation||\"\");if(!window.confirm((locale===\"ar\"?\"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ \":\"Delete entry \")+name+\"?\"))return;try{if(window.pywebview&&window.pywebview.api&&window.pywebview.api.delete_caisse){await window.pywebview.api.delete_caisse(row.id);await fetchEntries();setSelectedIndex(null);}else{setEntries(prev=>prev.filter(x=>x.id!==row.id));setSelectedIndex(null);}}catch(e){console.error(\"delete failed\",e);alert(locale===\"ar\"?\"ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ÿ∞ŸÅ\":\"Delete failed\");}}async function handleSave(e){var _e$preventDefault;e===null||e===void 0?void 0:(_e$preventDefault=e.preventDefault)===null||_e$preventDefault===void 0?void 0:_e$preventDefault.call(e);setError(\"\");if(!form.date||!form.heure||!form.operation||!form.nature||form.montant===\"\"){setError(locale===\"ar\"?\"ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©\":\"Please fill required fields\");return;}const payload=_objectSpread(_objectSpread({},form),{},{date:toISODate(form.date),montant:parseNumber(form.montant),solde:form.solde===\"\"?null:parseNumber(form.solde)});try{if(modalMode===\"add\"){if(window.pywebview&&window.pywebview.api&&window.pywebview.api.add_caisse){await window.pywebview.api.add_caisse(payload);await fetchEntries();}else{const tmpId=Date.now();setEntries(prev=>[...prev,_objectSpread(_objectSpread({},payload),{},{id:tmpId})]);}}else{if(window.pywebview&&window.pywebview.api&&window.pywebview.api.update_caisse){await window.pywebview.api.update_caisse(payload);await fetchEntries();}else{setEntries(prev=>prev.map(x=>x.id===payload.id?_objectSpread(_objectSpread({},x),payload):x));}}setShowModal(false);}catch(err){console.error(\"save error\",err);setError(locale===\"ar\"?\"ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≠ŸÅÿ∏\":\"Save error\");}}function handlePrint(){window.print();}function renderCell(row,field,idx){var _row$field;const isLast=idx===TABLE_FIELDS.length-1;const baseStyle=_objectSpread(_objectSpread({},styles.tableCell),{},{borderRight:isLast?\"none\":\"1px solid #e6eefb\"});if(field===\"date\"){return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:formatDateToDisplay(row.date)||\"-\"},field);}if(field===\"montant\"||field===\"solde\"){return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(row[field])})},field);}return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:(_row$field=row[field])!==null&&_row$field!==void 0?_row$field:\"-\"},field);}return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.container),directionStyle),children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\"},children:locale===\"ar\"?\"ÿßŸÑÿÆÿ≤ŸäŸÜÿ©\":\"Caisse\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,marginBottom:12,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.searchWrap),{},{maxWidth:420}),children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8},children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:locale===\"ar\"?\"ÿ®ÿ≠ÿ´...\":\"Search...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setSelectedIndex(null);},style:styles.searchInput})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[locale===\"ar\"?\"ÿßŸÑÿ≥ÿ¨ŸÑÿßÿ™\":\"Entries\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:filtered.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.tableWrap,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:styles.tableHeaderRow,children:[/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.tableHeader),{},{borderRight:\"1px solid #e6eefb\",width:36}),children:\"#\"}),TABLE_FIELDS.map((f,idx)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.tableHeader),{},{borderRight:idx===TABLE_FIELDS.length-1?\"none\":\"1px solid #e6eefb\"}),children:headers[idx+1]},f))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:1+TABLE_FIELDS.length,style:{padding:20,textAlign:\"center\"},children:locale===\"ar\"?\"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...\":\"Loading...\"})}):filtered.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:1+TABLE_FIELDS.length,style:{padding:20,textAlign:\"center\"},children:locale===\"ar\"?\"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™\":\"No entries\"})}):filtered.map((row,i)=>{var _row$id2;return/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>setSelectedIndex(i),style:_objectSpread(_objectSpread({},styles.tableRow),{},{background:i===selectedIndex?\"#cce5ff\":i%2===0?\"#fff\":\"#f4f8ff\",cursor:\"pointer\"}),children:[/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.tableCell),{},{width:36}),children:i+1}),TABLE_FIELDS.map((f,idx)=>renderCell(row,f,idx))]},(_row$id2=row.id)!==null&&_row$id2!==void 0?_row$id2:i);})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{left:20,right:\"unset\",bottom:28}),children:[/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:openAddChoice,children:locale===\"ar\"?\"‚ûï ÿ•ÿ∂ÿßŸÅÿ©\":\"‚ûï Ajouter\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:openEdit,children:locale===\"ar\"?\"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ\":\"‚úèÔ∏è Modifier\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleDelete,children:locale===\"ar\"?\"üóëÔ∏è ÿ≠ÿ∞ŸÅ\":\"üóëÔ∏è Supprimer\"})]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{right:20,left:\"unset\",bottom:28}),children:/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.drawerButton),{},{background:\"#3477eb\",color:\"#fff\"}),onClick:handlePrint,children:locale===\"ar\"?\"üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©\":\"üñ®Ô∏è Impression\"})}),showAddChoice&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.addChoicePanel),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:locale===\"ar\"?\"ÿßÿÆÿ™ÿßÿ± ŸÜŸàÿπ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©\":\"Choisir le type\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.addChoiceButtons,children:[/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.bigButton),styles.encaissementButton),onClick:()=>chooseAdd(\"encaissement\"),children:[/*#__PURE__*/_jsx(\"div\",{style:styles.bigIcon,children:\"\\uFF0B\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:800},children:locale===\"ar\"?\"ÿ™ÿ≠ÿµŸäŸÑ\":\"Encaissement\"})]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.bigButton),styles.depenseButton),onClick:()=>chooseAdd(\"depense\"),children:[/*#__PURE__*/_jsx(\"div\",{style:styles.bigIcon,children:\"\\u2212\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:800},children:locale===\"ar\"?\"ŸÖÿµÿ±ŸàŸÅ\":\"D√©pense\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{style:styles.cancelSmall,onClick:()=>setShowAddChoice(false),children:locale===\"ar\"?\"ÿ•ŸÑÿ∫ÿßÿ°\":\"Annuler\"})})]})}),showModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{children:modalMode===\"add\"?locale===\"ar\"?\"ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑ\":\"Ajouter entr√©e\":locale===\"ar\"?\"ÿ™ÿπÿØŸäŸÑ ÿ≥ÿ¨ŸÑ\":\"Modifier entr√©e\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,style:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\":\"Date\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.date?toISODate(form.date):\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{date:e.target.value})),style:styles.input,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑÿ≥ÿßÿπÿ©\":\"Heure\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:form.heure||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{heure:e.target.value})),style:styles.input,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑÿπŸÖŸÑŸäÿ©\":\"Op√©ration\",/*#__PURE__*/_jsx(\"input\",{value:form.operation||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{operation:e.target.value})),style:styles.input,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑŸÜŸàÿπ\":\"Nature\",/*#__PURE__*/_jsx(\"select\",{value:form.nature||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{nature:e.target.value})),style:styles.input,required:true,children:(String(form.operation||\"\").toLowerCase().includes(\"enc\")||String(form.operation||\"\").toLowerCase().includes(\"ÿ™ÿ≠ÿµ\")||String(form.operation||\"\").toLowerCase().includes(\"encaissement\")?natureOptions.encaissement:natureOptions.depense).map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑŸÖÿ®ŸÑÿ∫\":\"Montant\",/*#__PURE__*/_jsx(\"input\",{value:form.montant||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{montant:e.target.value})),style:styles.input,type:\"number\",step:\"0.01\",required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"ÿßŸÑÿ±ÿµŸäÿØ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)\":\"Solde (optionnel)\",/*#__PURE__*/_jsx(\"input\",{value:form.solde||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{solde:e.target.value})),style:styles.input,type:\"number\",step:\"0.01\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",gap:8,marginTop:12},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.saveButton,children:locale===\"ar\"?\"ÿ≠ŸÅÿ∏\":\"Enregistrer\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.cancelButton,onClick:()=>setShowModal(false),children:locale===\"ar\"?\"ÿ•ŸÑÿ∫ÿßÿ°\":\"Annuler\"})]})]})]})})]});}const styles={container:{padding:\"1.25rem\",position:\"relative\",minHeight:\"100vh\",boxSizing:\"border-box\"},searchWrap:{flex:1,maxWidth:420,display:\"flex\",alignItems:\"center\",gap:8},searchInput:{width:\"100%\",padding:\"0.5rem\",borderRadius:6,border:\"1px solid #ccc\",fontSize:\"1rem\"},tableWrap:{maxHeight:\"60vh\",overflowY:\"auto\",border:\"1px solid #e0e0e0\",borderRadius:6,background:\"#fff\"},table:{width:\"100%\",borderCollapse:\"separate\",tableLayout:\"fixed\",borderSpacing:0},tableHeaderRow:{background:\"#f1f6ff\"},tableHeader:{textAlign:\"center\",padding:\"0.6rem\",borderBottom:\"1px solid #e2e8f0\",background:\"#f1f6ff\",fontWeight:700},tableRow:{cursor:\"pointer\"},tableCell:{padding:\"0.45rem 0.6rem\",borderBottom:\"1px solid #f0f4fb\",verticalAlign:\"middle\",wordBreak:\"break-word\"},drawer:{position:\"fixed\",background:\"transparent\",padding:\"1rem\",borderRadius:\"8px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.15)\",display:\"flex\",flexDirection:\"row\",gap:\"0.5rem\",zIndex:8,minWidth:0,width:\"auto\",alignItems:\"center\"},drawerButton:{display:\"flex\",alignItems:\"center\",gap:\"0.3rem\",padding:\"0.5rem 1rem\",fontSize:\"1rem\",color:\"#3477eb\",background:\"#eaf3ff\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\"},summaryBadge:{padding:\"0.4rem 0.6rem\",background:\"rgba(255,255,255,0.9)\",borderRadius:8,border:\"1px solid #e6eefb\",display:\"flex\",alignItems:\"center\",gap:8,fontWeight:700,color:\"#14355f\"},modalOverlay:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:999},modal:{background:\"#fff\",padding:20,borderRadius:10,width:\"92%\",maxWidth:820,boxShadow:\"0 8px 30px rgba(0,0,0,0.2)\"},form:{display:\"flex\",flexDirection:\"column\",gap:12},row:{display:\"flex\",gap:12},label:{flex:1,display:\"flex\",flexDirection:\"column\",fontSize:14,color:\"#333\"},input:{marginTop:6,padding:\"0.5rem\",borderRadius:6,border:\"1px solid #ccc\",fontSize:14},saveButton:{padding:\"0.55rem 1rem\",background:\"#3477eb\",color:\"#fff\",border:\"none\",borderRadius:6,cursor:\"pointer\",fontWeight:700},cancelButton:{padding:\"0.45rem 0.9rem\",background:\"#f1f4f8\",color:\"#333\",border:\"none\",borderRadius:6,cursor:\"pointer\",fontWeight:700},ltr:{direction:\"ltr\",unicodeBidi:\"isolate\"},/* Add choice panel styles */addChoicePanel:{background:\"#fff\",padding:20,borderRadius:12,width:\"84%\",maxWidth:720,boxShadow:\"0 12px 40px rgba(0,0,0,0.35)\",textAlign:\"center\"},addChoiceButtons:{display:\"flex\",gap:18,justifyContent:\"center\",marginTop:12,flexWrap:\"wrap\"},bigButton:{width:260,height:160,borderRadius:12,border:\"none\",color:\"#fff\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",gap:12,fontSize:16,cursor:\"pointer\",boxShadow:\"0 10px 30px rgba(11,30,60,0.12)\"},encaissementButton:{background:\"linear-gradient(180deg,#26a65b,#1e8f47)\"// green\n},depenseButton:{background:\"linear-gradient(180deg,#e74c3c,#c83a2b)\"// red\n},bigIcon:{width:56,height:56,borderRadius:28,background:\"rgba(255,255,255,0.15)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:28,fontWeight:900},cancelSmall:{padding:\"0.45rem 0.9rem\",background:\"#f1f4f8\",border:\"none\",borderRadius:8,cursor:\"pointer\"}};","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","formatNumberSpaceDot","value","undefined","cleaned","String","replace","n","Number","isFinite","parts","toFixed","split","join","parseNumber","s","formatDateToDisplay","iso","m","match","concat","toISODate","input","Date","yyyy","getFullYear","mm","getMonth","padStart","dd","getDate","test","CaissePage","_ref","locale","isRtl","entries","setEntries","loading","setLoading","selectedIndex","setSelectedIndex","searchQuery","setSearchQuery","showModal","setShowModal","showAddChoice","setShowAddChoice","modalMode","setModalMode","form","setForm","id","date","heure","operation","nature","montant","solde","error","setError","TABLE_FIELDS","headersFr","headersAr","headers","natureOptions","encaissement","depense","directionStyle","direction","fetchEntries","window","pywebview","api","get_caisse","res","normalized","map","r","_objectSpread","date_iso","e","console","filtered","filter","q","trim","toLowerCase","includes","openAddChoice","chooseAdd","type","now","isoDate","hh","getHours","getMinutes","operationLabel","natureDefault","openEdit","_row$id","alert","row","handleDelete","name","confirm","delete_caisse","prev","x","handleSave","_e$preventDefault","preventDefault","call","payload","add_caisse","tmpId","update_caisse","err","handlePrint","print","renderCell","field","idx","_row$field","isLast","length","baseStyle","styles","tableCell","borderRight","style","children","ltr","container","textAlign","display","gap","marginBottom","alignItems","searchWrap","maxWidth","marginRight","placeholder","onChange","target","searchInput","marginLeft","summaryBadge","tableWrap","table","tableHeaderRow","tableHeader","width","f","colSpan","padding","i","_row$id2","onClick","tableRow","background","cursor","drawer","left","right","bottom","drawerButton","color","modalOverlay","addChoicePanel","marginTop","addChoiceButtons","bigButton","encaissementButton","bigIcon","fontSize","fontWeight","depenseButton","justifyContent","cancelSmall","modal","onSubmit","label","required","opt","step","saveButton","cancelButton","position","minHeight","boxSizing","flex","borderRadius","border","maxHeight","overflowY","borderCollapse","tableLayout","borderSpacing","borderBottom","verticalAlign","wordBreak","boxShadow","flexDirection","zIndex","minWidth","inset","unicodeBidi","flexWrap","height"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/caisse.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n/*\n  caisse.js\n\n  Updated:\n  - When the user clicks \"Ajouter\", show a large choice panel with two big buttons:\n      * Encaissement (green, + icon)\n      * D√©pense (red, - icon)\n    After the user chooses one, the regular add modal opens with:\n      - operation prefilled to \"Encaissement\" or \"D√©pense\"\n      - nature as a dropdown containing the specific options per type\n  - Nature options:\n      Encaissement: [\"Paiement client\", \"Autre\"]\n      D√©pense: [\"Paiement vol\", \"Paiement hotel\", \"Charge bureautique\", \"Autre charge\"]\n  - All other functionality retained from previous implementation:\n      - table with columns: date, heure, operation, nature, montant, solde\n      - Edit / Delete / Print controls\n      - fetch/save/delete via window.pywebview.api (get_caisse/add_caisse/update_caisse/delete_caisse)\n*/\n\nfunction formatNumberSpaceDot(value) {\n  if (value === null || value === undefined || value === \"\") return \"\";\n  const cleaned = String(value).replace(/\\s+/g, \"\").replace(\",\", \".\");\n  const n = Number(cleaned);\n  if (!Number.isFinite(n)) return String(value);\n  const parts = n.toFixed(2).split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n  return parts.join(\".\");\n}\n\nfunction parseNumber(value) {\n  if (value === null || value === undefined || value === \"\") return 0;\n  const s = String(value).replace(/\\s+/g, \"\").replace(\",\", \".\");\n  const n = Number(s);\n  return Number.isFinite(n) ? n : 0;\n}\n\nfunction formatDateToDisplay(iso) {\n  if (!iso) return \"\";\n  const m = iso.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n  if (m) return `${m[3]}/${m[2]}/${m[1]}`;\n  return iso;\n}\n\nfunction toISODate(input) {\n  if (!input) return \"\";\n  if (input instanceof Date) {\n    const yyyy = input.getFullYear();\n    const mm = String(input.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(input.getDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(input)) {\n    const [dd, mm, yyyy] = input.split(\"/\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(input)) return input;\n  return input;\n}\n\nexport default function CaissePage({ locale = \"fr\" }) {\n  const isRtl = locale === \"ar\";\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [showAddChoice, setShowAddChoice] = useState(false); // new: show choice panel\n  const [modalMode, setModalMode] = useState(\"add\"); // add | edit\n  const [form, setForm] = useState({\n    id: null,\n    date: \"\",    // YYYY-MM-DD\n    heure: \"\",   // HH:MM\n    operation: \"\",\n    nature: \"\",\n    montant: \"\", // numeric string\n    solde: \"\"    // numeric string (optional)\n  });\n  const [error, setError] = useState(\"\");\n\n  const TABLE_FIELDS = [\"date\", \"heure\", \"operation\", \"nature\", \"montant\", \"solde\"];\n  const headersFr = [\"#\", \"Date\", \"Heure\", \"Op√©ration\", \"Nature\", \"Montant\", \"Solde\"];\n  const headersAr = [\"#\", \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\", \"ÿßŸÑÿ≥ÿßÿπÿ©\", \"ÿßŸÑÿπŸÖŸÑŸäÿ©\", \"ÿßŸÑŸÜŸàÿπ\", \"ÿßŸÑŸÖÿ®ŸÑÿ∫\", \"ÿßŸÑÿ±ÿµŸäÿØ\"];\n  const headers = locale === \"ar\" ? headersAr : headersFr;\n\n  // nature options\n  const natureOptions = {\n    encaissement: locale === \"ar\" ? [\"ÿØŸÅÿπ ÿßŸÑÿ≤ÿ®ŸàŸÜ\", \"ÿ£ÿÆÿ±Ÿâ\"] : [\"Paiement client\", \"Autre\"],\n    depense: locale === \"ar\"\n      ? [\"ÿØŸÅÿπ ÿ±ÿ≠ŸÑÿ©\", \"ÿØŸÅÿπ ŸÅŸÜÿØŸÇ\", \"ŸÖÿµÿ±ŸàŸÅÿßÿ™ ŸÖŸÉÿ™ÿ®Ÿäÿ©\", \"ŸÖÿµÿ±ŸàŸÅ ÿ¢ÿÆÿ±\"]\n      : [\"Paiement vol\", \"Paiement hotel\", \"Charge bureautique\", \"Autre charge\"]\n  };\n\n  const directionStyle = isRtl ? { direction: \"rtl\" } : { direction: \"ltr\" };\n\n  async function fetchEntries() {\n    setLoading(true);\n    try {\n      if (window.pywebview && window.pywebview.api && window.pywebview.api.get_caisse) {\n        const res = await window.pywebview.api.get_caisse();\n        const normalized = (res || []).map(r => ({\n          ...r,\n          montant: r.montant !== undefined && r.montant !== null ? String(r.montant) : \"\",\n          solde: r.solde !== undefined && r.solde !== null ? String(r.solde) : \"\",\n          date: r.date || r.date_iso || \"\"\n        }));\n        setEntries(normalized);\n      } else {\n        setEntries([]);\n      }\n    } catch (e) {\n      console.error(\"Failed to load caisse entries\", e);\n      setEntries([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    fetchEntries();\n  }, [locale]);\n\n  const filtered = entries.filter((e) => {\n    const q = searchQuery.trim().toLowerCase();\n    if (!q) return true;\n    return (\n      (e.date && e.date.toLowerCase().includes(q)) ||\n      (e.heure && e.heure.toLowerCase().includes(q)) ||\n      (e.operation && String(e.operation).toLowerCase().includes(q)) ||\n      (e.nature && String(e.nature).toLowerCase().includes(q)) ||\n      (String(e.montant || \"\").toLowerCase().includes(q)) ||\n      (String(e.solde || \"\").toLowerCase().includes(q))\n    );\n  });\n\n  function openAddChoice() {\n    setShowAddChoice(true);\n  }\n\n  function chooseAdd(type) {\n    // type: \"encaissement\" or \"depense\"\n    setShowAddChoice(false);\n    setModalMode(\"add\");\n    const now = new Date();\n    const isoDate = toISODate(now);\n    const hh = String(now.getHours()).padStart(2, \"0\");\n    const mm = String(now.getMinutes()).padStart(2, \"0\");\n    const operationLabel = type === \"encaissement\"\n      ? (locale === \"ar\" ? \"ÿ™ÿ≠ÿµŸäŸÑ\" : \"Encaissement\")\n      : (locale === \"ar\" ? \"ŸÖÿµÿ±ŸàŸÅ\" : \"D√©pense\");\n\n    // set nature default to first option for that type\n    const natureDefault = type === \"encaissement\" ? natureOptions.encaissement[0] : natureOptions.depense[0];\n\n    setForm({\n      id: null,\n      date: isoDate,\n      heure: `${hh}:${mm}`,\n      operation: operationLabel,\n      nature: natureDefault,\n      montant: \"\",\n      solde: \"\"\n    });\n    setShowModal(true);\n  }\n\n  function openEdit() {\n    if (selectedIndex === null || filtered[selectedIndex] === undefined) {\n      alert(locale === \"ar\" ? \"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿ≠ÿØŸäÿØ ÿ≥ÿ∑ÿ±.\" : \"Please select a row.\");\n      return;\n    }\n    const row = filtered[selectedIndex];\n    setModalMode(\"edit\");\n    setForm({\n      id: row.id ?? null,\n      date: row.date ? toISODate(row.date) : \"\",\n      heure: row.heure || \"\",\n      operation: row.operation || \"\",\n      nature: row.nature || \"\",\n      montant: row.montant !== undefined && row.montant !== null ? String(row.montant) : \"\",\n      solde: row.solde !== undefined && row.solde !== null ? String(row.solde) : \"\"\n    });\n    setError(\"\");\n    setShowModal(true);\n  }\n\n  async function handleDelete() {\n    if (selectedIndex === null || filtered[selectedIndex] === undefined) {\n      alert(locale === \"ar\" ? \"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿ≠ÿØŸäÿØ ÿ≥ÿ∑ÿ±.\" : \"Please select a row.\");\n      return;\n    }\n    const row = filtered[selectedIndex];\n    const name = `${row.date || \"\"} ${row.operation || \"\"}`;\n    if (!window.confirm((locale === \"ar\" ? \"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ \" : \"Delete entry \") + name + \"?\")) return;\n    try {\n      if (window.pywebview && window.pywebview.api && window.pywebview.api.delete_caisse) {\n        await window.pywebview.api.delete_caisse(row.id);\n        await fetchEntries();\n        setSelectedIndex(null);\n      } else {\n        setEntries(prev => prev.filter(x => x.id !== row.id));\n        setSelectedIndex(null);\n      }\n    } catch (e) {\n      console.error(\"delete failed\", e);\n      alert(locale === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Delete failed\");\n    }\n  }\n\n  async function handleSave(e) {\n    e?.preventDefault?.();\n    setError(\"\");\n    if (!form.date || !form.heure || !form.operation || !form.nature || form.montant === \"\") {\n      setError(locale === \"ar\" ? \"ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©\" : \"Please fill required fields\");\n      return;\n    }\n\n    const payload = {\n      ...form,\n      date: toISODate(form.date),\n      montant: parseNumber(form.montant),\n      solde: form.solde === \"\" ? null : parseNumber(form.solde)\n    };\n\n    try {\n      if (modalMode === \"add\") {\n        if (window.pywebview && window.pywebview.api && window.pywebview.api.add_caisse) {\n          await window.pywebview.api.add_caisse(payload);\n          await fetchEntries();\n        } else {\n          const tmpId = Date.now();\n          setEntries(prev => [...prev, { ...payload, id: tmpId }]);\n        }\n      } else {\n        if (window.pywebview && window.pywebview.api && window.pywebview.api.update_caisse) {\n          await window.pywebview.api.update_caisse(payload);\n          await fetchEntries();\n        } else {\n          setEntries(prev => prev.map(x => (x.id === payload.id ? { ...x, ...payload } : x)));\n        }\n      }\n      setShowModal(false);\n    } catch (err) {\n      console.error(\"save error\", err);\n      setError(locale === \"ar\" ? \"ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≠ŸÅÿ∏\" : \"Save error\");\n    }\n  }\n\n  function handlePrint() {\n    window.print();\n  }\n\n  function renderCell(row, field, idx) {\n    const isLast = idx === TABLE_FIELDS.length - 1;\n    const baseStyle = { ...styles.tableCell, borderRight: isLast ? \"none\" : \"1px solid #e6eefb\" };\n    if (field === \"date\") {\n      return <td key={field} style={baseStyle}>{formatDateToDisplay(row.date) || \"-\"}</td>;\n    }\n    if (field === \"montant\" || field === \"solde\") {\n      return <td key={field} style={baseStyle}><span style={styles.ltr}>{formatNumberSpaceDot(row[field])}</span></td>;\n    }\n    return <td key={field} style={baseStyle}>{row[field] ?? \"-\"}</td>;\n  }\n\n  return (\n    <div style={{ ...styles.container, ...directionStyle }}>\n      <h2 style={{ textAlign: \"center\" }}>{locale === \"ar\" ? \"ÿßŸÑÿÆÿ≤ŸäŸÜÿ©\" : \"Caisse\"}</h2>\n\n      <div style={{ display: \"flex\", gap: 12, marginBottom: 12, alignItems: \"center\" }}>\n        <div style={{ ...styles.searchWrap, maxWidth: 420 }}>\n          <span style={{ marginRight: 8 }}>üîç</span>\n          <input\n            placeholder={locale === \"ar\" ? \"ÿ®ÿ≠ÿ´...\" : \"Search...\"}\n            value={searchQuery}\n            onChange={e => { setSearchQuery(e.target.value); setSelectedIndex(null); }}\n            style={styles.searchInput}\n          />\n        </div>\n\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\n          <div style={styles.summaryBadge}>\n            {locale === \"ar\" ? \"ÿßŸÑÿ≥ÿ¨ŸÑÿßÿ™\" : \"Entries\"}: <strong style={{ marginLeft: 6 }}>{filtered.length}</strong>\n          </div>\n        </div>\n      </div>\n\n      <div style={styles.tableWrap}>\n        <table style={styles.table}>\n          <thead>\n            <tr style={styles.tableHeaderRow}>\n              <th style={{ ...styles.tableHeader, borderRight: \"1px solid #e6eefb\", width: 36 }}>#</th>\n              {TABLE_FIELDS.map((f, idx) => (\n                <th key={f} style={{ ...styles.tableHeader, borderRight: idx === TABLE_FIELDS.length - 1 ? \"none\" : \"1px solid #e6eefb\" }}>\n                  {headers[idx + 1]}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr><td colSpan={1 + TABLE_FIELDS.length} style={{ padding: 20, textAlign: \"center\" }}>{locale === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...\" : \"Loading...\"}</td></tr>\n            ) : filtered.length === 0 ? (\n              <tr><td colSpan={1 + TABLE_FIELDS.length} style={{ padding: 20, textAlign: \"center\" }}>{locale === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™\" : \"No entries\"}</td></tr>\n            ) : (\n              filtered.map((row, i) => (\n                <tr\n                  key={row.id ?? i}\n                  onClick={() => setSelectedIndex(i)}\n                  style={{\n                    ...styles.tableRow,\n                    background: i === selectedIndex ? \"#cce5ff\" : i % 2 === 0 ? \"#fff\" : \"#f4f8ff\",\n                    cursor: \"pointer\"\n                  }}\n                >\n                  <td style={{ ...styles.tableCell, width: 36 }}>{i + 1}</td>\n                  {TABLE_FIELDS.map((f, idx) => renderCell(row, f, idx))}\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Drawers */}\n      <div style={{ ...styles.drawer, left: 20, right: \"unset\", bottom: 28 }}>\n        <button style={styles.drawerButton} onClick={openAddChoice}>{locale === \"ar\" ? \"‚ûï ÿ•ÿ∂ÿßŸÅÿ©\" : \"‚ûï Ajouter\"}</button>\n        <button style={styles.drawerButton} onClick={openEdit}>{locale === \"ar\" ? \"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ\" : \"‚úèÔ∏è Modifier\"}</button>\n        <button style={styles.drawerButton} onClick={handleDelete}>{locale === \"ar\" ? \"üóëÔ∏è ÿ≠ÿ∞ŸÅ\" : \"üóëÔ∏è Supprimer\"}</button>\n      </div>\n\n      <div style={{ ...styles.drawer, right: 20, left: \"unset\", bottom: 28 }}>\n        <button style={{ ...styles.drawerButton, background: \"#3477eb\", color: \"#fff\" }} onClick={handlePrint}>\n          {locale === \"ar\" ? \"üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©\" : \"üñ®Ô∏è Impression\"}\n        </button>\n      </div>\n\n      {/* Add choice overlay (big encaissement / depense buttons) */}\n      {showAddChoice && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.addChoicePanel, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3 style={{ marginTop: 0 }}>{locale === \"ar\" ? \"ÿßÿÆÿ™ÿßÿ± ŸÜŸàÿπ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©\" : \"Choisir le type\"}</h3>\n            <div style={styles.addChoiceButtons}>\n              <button\n                style={{ ...styles.bigButton, ...styles.encaissementButton }}\n                onClick={() => chooseAdd(\"encaissement\")}\n              >\n                <div style={styles.bigIcon}>Ôºã</div>\n                <div style={{ fontSize: 18, fontWeight: 800 }}>{locale === \"ar\" ? \"ÿ™ÿ≠ÿµŸäŸÑ\" : \"Encaissement\"}</div>\n              </button>\n\n              <button\n                style={{ ...styles.bigButton, ...styles.depenseButton }}\n                onClick={() => chooseAdd(\"depense\")}\n              >\n                <div style={styles.bigIcon}>‚àí</div>\n                <div style={{ fontSize: 18, fontWeight: 800 }}>{locale === \"ar\" ? \"ŸÖÿµÿ±ŸàŸÅ\" : \"D√©pense\"}</div>\n              </button>\n            </div>\n\n            <div style={{ display: \"flex\", justifyContent: \"flex-end\", marginTop: 12 }}>\n              <button style={styles.cancelSmall} onClick={() => setShowAddChoice(false)}>\n                {locale === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Annuler\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal for add/edit */}\n      {showModal && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.modal, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3>{modalMode === \"add\" ? (locale === \"ar\" ? \"ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑ\" : \"Ajouter entr√©e\") : (locale === \"ar\" ? \"ÿ™ÿπÿØŸäŸÑ ÿ≥ÿ¨ŸÑ\" : \"Modifier entr√©e\")}</h3>\n\n            <form onSubmit={handleSave} style={styles.form}>\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"Date\"}\n                  <input type=\"date\" value={form.date ? toISODate(form.date) : \"\"} onChange={e => setForm(s => ({ ...s, date: e.target.value }))} style={styles.input} required />\n                </label>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑÿ≥ÿßÿπÿ©\" : \"Heure\"}\n                  <input type=\"time\" value={form.heure || \"\"} onChange={e => setForm(s => ({ ...s, heure: e.target.value }))} style={styles.input} required />\n                </label>\n              </div>\n\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑÿπŸÖŸÑŸäÿ©\" : \"Op√©ration\"}\n                  <input value={form.operation || \"\"} onChange={e => setForm(s => ({ ...s, operation: e.target.value }))} style={styles.input} required />\n                </label>\n\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑŸÜŸàÿπ\" : \"Nature\"}\n                  <select value={form.nature || \"\"} onChange={e => setForm(s => ({ ...s, nature: e.target.value }))} style={styles.input} required>\n                    {/* show options based on operation type inferred from form.operation (contains \"Encaisse\" or \"Depens\") */}\n                    {(\n                      (String(form.operation || \"\").toLowerCase().includes(\"enc\") || String(form.operation || \"\").toLowerCase().includes(\"ÿ™ÿ≠ÿµ\") || String(form.operation || \"\").toLowerCase().includes(\"encaissement\"))\n                        ? natureOptions.encaissement\n                        : natureOptions.depense\n                    ).map(opt => <option key={opt} value={opt}>{opt}</option>)}\n                  </select>\n                </label>\n              </div>\n\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑŸÖÿ®ŸÑÿ∫\" : \"Montant\"}\n                  <input value={form.montant || \"\"} onChange={e => setForm(s => ({ ...s, montant: e.target.value }))} style={styles.input} type=\"number\" step=\"0.01\" required />\n                </label>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"ÿßŸÑÿ±ÿµŸäÿØ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)\" : \"Solde (optionnel)\"}\n                  <input value={form.solde || \"\"} onChange={e => setForm(s => ({ ...s, solde: e.target.value }))} style={styles.input} type=\"number\" step=\"0.01\" />\n                </label>\n              </div>\n\n              {error && <div style={{ color: \"red\" }}>{error}</div>}\n\n              <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: 8, marginTop: 12 }}>\n                <button type=\"submit\" style={styles.saveButton}>{locale === \"ar\" ? \"ÿ≠ŸÅÿ∏\" : \"Enregistrer\"}</button>\n                <button type=\"button\" style={styles.cancelButton} onClick={() => setShowModal(false)}>{locale === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Annuler\"}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    padding: \"1.25rem\",\n    position: \"relative\",\n    minHeight: \"100vh\",\n    boxSizing: \"border-box\"\n  },\n  searchWrap: {\n    flex: 1,\n    maxWidth: 420,\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: 8\n  },\n  searchInput: {\n    width: \"100%\",\n    padding: \"0.5rem\",\n    borderRadius: 6,\n    border: \"1px solid #ccc\",\n    fontSize: \"1rem\"\n  },\n  tableWrap: {\n    maxHeight: \"60vh\",\n    overflowY: \"auto\",\n    border: \"1px solid #e0e0e0\",\n    borderRadius: 6,\n    background: \"#fff\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"separate\",\n    tableLayout: \"fixed\",\n    borderSpacing: 0\n  },\n  tableHeaderRow: {\n    background: \"#f1f6ff\"\n  },\n  tableHeader: {\n    textAlign: \"center\",\n    padding: \"0.6rem\",\n    borderBottom: \"1px solid #e2e8f0\",\n    background: \"#f1f6ff\",\n    fontWeight: 700\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableCell: {\n    padding: \"0.45rem 0.6rem\",\n    borderBottom: \"1px solid #f0f4fb\",\n    verticalAlign: \"middle\",\n    wordBreak: \"break-word\"\n  },\n  drawer: {\n    position: \"fixed\",\n    background: \"transparent\",\n    padding: \"1rem\",\n    borderRadius: \"8px\",\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    gap: \"0.5rem\",\n    zIndex: 8,\n    minWidth: 0,\n    width: \"auto\",\n    alignItems: \"center\"\n  },\n  drawerButton: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"0.3rem\",\n    padding: \"0.5rem 1rem\",\n    fontSize: \"1rem\",\n    color: \"#3477eb\",\n    background: \"#eaf3ff\",\n    border: \"none\",\n    borderRadius: \"4px\",\n    cursor: \"pointer\"\n  },\n  summaryBadge: {\n    padding: \"0.4rem 0.6rem\",\n    background: \"rgba(255,255,255,0.9)\",\n    borderRadius: 8,\n    border: \"1px solid #e6eefb\",\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: 8,\n    fontWeight: 700,\n    color: \"#14355f\"\n  },\n  modalOverlay: {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,0.45)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 999\n  },\n  modal: {\n    background: \"#fff\",\n    padding: 20,\n    borderRadius: 10,\n    width: \"92%\",\n    maxWidth: 820,\n    boxShadow: \"0 8px 30px rgba(0,0,0,0.2)\"\n  },\n  form: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 12\n  },\n  row: {\n    display: \"flex\",\n    gap: 12\n  },\n  label: {\n    flex: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    fontSize: 14,\n    color: \"#333\"\n  },\n  input: {\n    marginTop: 6,\n    padding: \"0.5rem\",\n    borderRadius: 6,\n    border: \"1px solid #ccc\",\n    fontSize: 14\n  },\n  saveButton: {\n    padding: \"0.55rem 1rem\",\n    background: \"#3477eb\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 6,\n    cursor: \"pointer\",\n    fontWeight: 700\n  },\n  cancelButton: {\n    padding: \"0.45rem 0.9rem\",\n    background: \"#f1f4f8\",\n    color: \"#333\",\n    border: \"none\",\n    borderRadius: 6,\n    cursor: \"pointer\",\n    fontWeight: 700\n  },\n  ltr: {\n    direction: \"ltr\",\n    unicodeBidi: \"isolate\"\n  },\n\n  /* Add choice panel styles */\n  addChoicePanel: {\n    background: \"#fff\",\n    padding: 20,\n    borderRadius: 12,\n    width: \"84%\",\n    maxWidth: 720,\n    boxShadow: \"0 12px 40px rgba(0,0,0,0.35)\",\n    textAlign: \"center\"\n  },\n  addChoiceButtons: {\n    display: \"flex\",\n    gap: 18,\n    justifyContent: \"center\",\n    marginTop: 12,\n    flexWrap: \"wrap\"\n  },\n  bigButton: {\n    width: 260,\n    height: 160,\n    borderRadius: 12,\n    border: \"none\",\n    color: \"#fff\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 12,\n    fontSize: 16,\n    cursor: \"pointer\",\n    boxShadow: \"0 10px 30px rgba(11,30,60,0.12)\"\n  },\n  encaissementButton: {\n    background: \"linear-gradient(180deg,#26a65b,#1e8f47)\" // green\n  },\n  depenseButton: {\n    background: \"linear-gradient(180deg,#e74c3c,#c83a2b)\" // red\n  },\n  bigIcon: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    background: \"rgba(255,255,255,0.15)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    fontSize: 28,\n    fontWeight: 900\n  },\n  cancelSmall: {\n    padding: \"0.45rem 0.9rem\",\n    background: \"#f1f4f8\",\n    border: \"none\",\n    borderRadius: 8,\n    cursor: \"pointer\"\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}