{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";// Table columns to show (still show versement/credit in table)\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TABLE_FIELDS=[\"nom\",\"prenom\",\"date_de_naissance\",\"lieu_de_naissance\",\"passport_number\",\"date_delivrance\",\"date_expiration\",\"addresse\",\"telephone\",\"versement\",\"credit\",\"photo\"];// Modal fields order (for editing, will not show versement/credit in modifier)\nconst MODAL_FIELDS=[\"nom\",\"prenom\",\"nom_ar\",\"prenom_ar\",\"prenom_pere\",\"prenom_pere_ar\",\"nom_mere\",\"prenom_mere\",\"nom_mere_ar\",\"prenom_mere_ar\",\"date_de_naissance\",\"lieu_de_naissance\",\"nationalite\",\"passport_number\",\"date_delivrance\",\"date_expiration\",\"addresse\",\"telephone\",\"photo\"];const NATIONALITIES=[\"AlgÃ©rienne\",\"Marocaine\",\"Tunisienne\",\"FranÃ§aise\",\"Espagnole\",\"Italienne\",\"Turque\",\"Saoudienne\",\"Ã‰gyptienne\",\"Libyenne\",\"Autre\"];const translations={fr:{title:\"Liste des Clients\",searchPlaceholder:\"Rechercher...\",totalClient:\"Total clients\",selectRowAlert:\"Veuillez sÃ©lectionner une ligne client.\",addClient:\"Ajouter Nouveau Client\",editClient:\"Modifier Client\",confirmDelete:name=>\"Supprimer le client \".concat(name,\" ?\"),save:\"Enregistrer\",cancel:\"Annuler\",addButton:\"âž• Ajouter\",editButton:\"âœï¸ Modifier\",deleteButton:\"ðŸ—‘ï¸ Supprimer\",printButton:\"ðŸ–¨ï¸ Impression\",ficheButton:\"ðŸ§¾ Fiche client\",resume:\"RÃ©sumÃ©\",errorLoad:\"Erreur lors du chargement des clients\",errorSave:\"Erreur lors de l'enregistrement !\",errorDelete:\"Erreur lors de la suppression !\",saisieArabe:\"Saisir en arabe\",tableHeaders:[\"#\",\"Nom\",\"PrÃ©nom\",\"Date de naissance\",\"Lieu de naissance\",\"NÂ° Passport\",\"Date dÃ©livrance\",\"Date expiration\",\"Adresse\",\"NÂ° TÃ©lÃ©phone\",\"Versement\",\"CrÃ©dit\",\"Photo\"],modalLabels:{nom:\"Nom\",prenom:\"PrÃ©nom\",nom_ar:\"Nom (arabe)\",prenom_ar:\"PrÃ©nom (arabe)\",prenom_pere:\"PrÃ©nom pÃ¨re\",prenom_pere_ar:\"PrÃ©nom pÃ¨re (arabe)\",nom_mere:\"Nom mÃ¨re\",prenom_mere:\"PrÃ©nom mÃ¨re\",nom_mere_ar:\"Nom mÃ¨re (arabe)\",prenom_mere_ar:\"PrÃ©nom mÃ¨re (arabe)\",date_de_naissance:\"Date de naissance\",lieu_de_naissance:\"Lieu de naissance\",nationalite:\"NationalitÃ©\",passport_number:\"NÂ° Passport\",date_delivrance:\"Date dÃ©livrance\",date_expiration:\"Date expiration\",addresse:\"Adresse\",telephone:\"NÂ° TÃ©lÃ©phone\",versement:\"Versement\",credit:\"CrÃ©dit\",photo:\"Photo (jpg/png)\"}},ar:{title:\"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",searchPlaceholder:\"Ø¨Ø­Ø«...\",totalClient:\"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",selectRowAlert:\"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ ØµÙ Ø§Ù„Ø¹Ù…ÙŠÙ„.\",addClient:\"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\",editClient:\"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„\",confirmDelete:name=>\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \".concat(name,\"\\u061F\"),save:\"Ø­ÙØ¸\",cancel:\"Ø¥Ù„ØºØ§Ø¡\",addButton:\"âž• Ø¥Ø¶Ø§ÙØ©\",editButton:\"âœï¸ ØªØ¹Ø¯ÙŠÙ„\",deleteButton:\"ðŸ—‘ï¸ Ø­Ø°Ù\",printButton:\"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\",ficheButton:\"ðŸ§¾ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„\",resume:\"Ø®Ù„Ø§Ù„\",errorLoad:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",errorSave:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸!\",errorDelete:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù!\",saisieArabe:\"ÙŠØ±Ø¬Ù‰ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\",tableHeaders:[\"#\",\"Ø§Ù„Ù„Ù‚Ø¨\",\"Ø§Ù„Ø§Ø³Ù…\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\"Ø§Ù„Ù‡Ø§ØªÙ\",\"Ø¯ÙØ¹Ø©\",\"Ø¯ÙŽÙŠÙ†\",\"Ø§Ù„ØµÙˆØ±Ø©\"],modalLabels:{nom:\"Ø§Ù„Ù„Ù‚Ø¨\",prenom:\"Ø§Ù„Ø§Ø³Ù…\",nom_ar:\"Ø§Ù„Ù„Ù‚Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_ar:\"Ø§Ù„Ø§Ø³Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_pere:\"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨\",prenom_pere_ar:\"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",nom_mere:\"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù…\",prenom_mere:\"Ø§Ø³Ù… Ø§Ù„Ø£Ù…\",nom_mere_ar:\"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_mere_ar:\"Ø§Ø³Ù… Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",date_de_naissance:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",lieu_de_naissance:\"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",nationalite:\"Ø§Ù„Ø¬Ù†Ø³ÙŠØ©\",passport_number:\"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",date_delivrance:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",date_expiration:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",addresse:\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",telephone:\"Ø§Ù„Ù‡Ø§ØªÙ\",versement:\"Ø¯ÙØ¹Ø©\",credit:\"Ø¯ÙŽÙŠÙ†\",photo:\"Ø§Ù„ØµÙˆØ±Ø© (jpg/png)\"}}};function formatDateToFR(dateString){if(!dateString)return\"\";// Accept both yyyy-mm-dd and dd-mm-yyyy and convert to dd/mm/yyyy\nif(/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)){const[yyyy,mm,dd]=dateString.split(\"-\");return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yyyy);}else if(/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)){const[dd,mm,yyyy]=dateString.split(\"-\");return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yyyy);}else if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)){return dateString;}return dateString;}function formatDateToISO(dateString){if(!dateString)return\"\";// Accept dd/mm/yyyy or dd-mm-yyyy and convert to yyyy-mm-dd\nlet dd,mm,yyyy;if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)){[dd,mm,yyyy]=dateString.split(\"/\");}else if(/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)){[dd,mm,yyyy]=dateString.split(\"-\");}else if(/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)){return dateString;}if(yyyy&&mm&&dd){return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}return dateString;}function isArabic(str){return /^[\\u0600-\\u06FF\\s]+$/.test(str);}function DateInput(_ref){let{value,onChange,label,resumeLabel,resumeChecked,onResumeChange}=_ref;// value: always like dd/mm/yyyy or \"\"\nlet[resume,setResume]=useState(resumeChecked||false);let[dd,setDd]=useState(\"\");let[mm,setMm]=useState(\"\");let[yyyy,setYyyy]=useState(\"\");useEffect(()=>{if(!resume&&value){// Normal mode, fill dd, mm, yyyy if value is complete\nconst match=value.match(/^(\\d{2})[\\/-](\\d{2})[\\/-](\\d{4})$/);if(match){setDd(match[1]);setMm(match[2]);setYyyy(match[3]);}else{setDd(\"\");setMm(\"\");setYyyy(\"\");}}else if(resume&&value){// Resume mode, only yyyy is editable\nconst match=value.match(/^01[\\/-]01[\\/-](\\d{4})$/);if(match){setDd(\"01\");setMm(\"01\");setYyyy(match[1]);}else{setDd(\"01\");setMm(\"01\");setYyyy(\"\");}}else{setDd(\"\");setMm(\"\");setYyyy(\"\");}// eslint-disable-next-line\n},[value,resume]);function handleResumeChange(e){const checked=e.target.checked;setResume(checked);if(onResumeChange)onResumeChange(checked);if(checked){// Switch to resume, set value to 01/01/yyyy if year is present\nif(yyyy){onChange(\"01/01/\".concat(yyyy));}else{onChange(\"\");}}else{// Switch to normal, clear value\nonChange(\"\");}}function handleDdChange(e){const v=e.target.value.replace(/\\D/,\"\");setDd(v);if(v.length===2&&mm.length===2&&yyyy.length===4){onChange(\"\".concat(v,\"/\").concat(mm,\"/\").concat(yyyy));}else{onChange(\"\");}}function handleMmChange(e){const v=e.target.value.replace(/\\D/,\"\");setMm(v);if(dd.length===2&&v.length===2&&yyyy.length===4){onChange(\"\".concat(dd,\"/\").concat(v,\"/\").concat(yyyy));}else{onChange(\"\");}}function handleYyyyChange(e){const v=e.target.value.replace(/\\D/,\"\");setYyyy(v);if(resume){// Resume mode: set value to 01/01/yyyy if yyyy is 4 digits\nif(v.length===4){onChange(\"01/01/\".concat(v));}else{onChange(\"\");}}else{// Normal mode: set value if all are filled\nif(dd.length===2&&mm.length===2&&v.length===4){onChange(\"\".concat(dd,\"/\").concat(mm,\"/\").concat(v));}else{onChange(\"\");}}}return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"span\",{children:[label,/*#__PURE__*/_jsxs(\"label\",{style:{marginLeft:12,fontSize:\"0.95em\",cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:resume,onChange:handleResumeChange}),resumeLabel]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.4em\",marginTop:2},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:dd,onChange:handleDdChange,maxLength:2,placeholder:\"jj\",disabled:resume,style:{width:38,textAlign:\"center\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18,color:\"#666\"},children:\"/\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:mm,onChange:handleMmChange,maxLength:2,placeholder:\"mm\",disabled:resume,style:{width:38,textAlign:\"center\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18,color:\"#666\"},children:\"/\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:yyyy,onChange:handleYyyyChange,maxLength:4,placeholder:\"aaaa\",style:{width:60,textAlign:\"center\"}})]})]});}function ClientPage(_ref2){let{locale=\"fr\"}=_ref2;const[clients,setClients]=useState([]);const[selectedIndex,setSelectedIndex]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[showModal,setShowModal]=useState(false);const[modalMode,setModalMode]=useState(\"add\");const[clientForm,setClientForm]=useState({id:null,nom:\"\",prenom:\"\",nom_ar:\"\",prenom_ar:\"\",prenom_pere:\"\",prenom_pere_ar:\"\",nom_mere:\"\",prenom_mere:\"\",nom_mere_ar:\"\",prenom_mere_ar:\"\",date_de_naissance:\"\",lieu_de_naissance:\"\",nationalite:\"AlgÃ©rienne\",passport_number:\"\",date_delivrance:\"\",date_expiration:\"\",addresse:\"\",telephone:\"\",versement:\"\",credit:\"\",photo:\"\"});const[arErrors,setArErrors]=useState({});const[isDeleting,setIsDeleting]=useState(false);const[isLoading,setIsLoading]=useState(false);// Track resume checkboxes for each date field\nconst[resumeDateFields,setResumeDateFields]=useState({date_de_naissance:false,date_delivrance:false,date_expiration:false});const isRtl=locale===\"ar\";const displayedHeaders=isRtl?[...translations[locale].tableHeaders].reverse():translations[locale].tableHeaders;const tableFieldsOrder=isRtl?[...TABLE_FIELDS].reverse():[...TABLE_FIELDS];const directionStyle=isRtl?{direction:\"rtl\"}:{direction:\"ltr\"};const tableStyle=isRtl?_objectSpread(_objectSpread({},styles.table),{},{direction:\"rtl\"}):styles.table;const fetchClients=async()=>{setIsLoading(true);try{const result=await window.pywebview.api.get_clients();setClients(result||[]);}catch(err){setClients([]);}setIsLoading(false);};useEffect(()=>{fetchClients();// eslint-disable-next-line\n},[locale]);const filteredClients=clients.filter(c=>{const q=searchQuery.trim().toLowerCase();if(!q)return true;return(c.nom||\"\").toLowerCase().includes(q)||(c.prenom||\"\").toLowerCase().includes(q)||(c.date_de_naissance||\"\").toLowerCase().includes(q)||(c.lieu_de_naissance||\"\").toLowerCase().includes(q)||(c.nationalite||\"\").toLowerCase().includes(q)||(c.passport_number||\"\").toString().toLowerCase().includes(q)||(c.telephone||\"\").toLowerCase().includes(q);});const emptyForm={id:null,nom:\"\",prenom:\"\",nom_ar:\"\",prenom_ar:\"\",prenom_pere:\"\",prenom_pere_ar:\"\",nom_mere:\"\",prenom_mere:\"\",nom_mere_ar:\"\",prenom_mere_ar:\"\",date_de_naissance:\"\",lieu_de_naissance:\"\",nationalite:\"AlgÃ©rienne\",passport_number:\"\",date_delivrance:\"\",date_expiration:\"\",addresse:\"\",telephone:\"\",versement:\"\",credit:\"\",photo:\"\"};const handleAjouter=()=>{setModalMode(\"add\");setClientForm(_objectSpread({},emptyForm));setResumeDateFields({date_de_naissance:false,date_delivrance:false,date_expiration:false});setArErrors({});setShowModal(true);};const handleModifier=()=>{if(selectedIndex!==null&&filteredClients[selectedIndex]){setModalMode(\"edit\");setClientForm(_objectSpread(_objectSpread({},filteredClients[selectedIndex]),{},{date_de_naissance:formatDateToFR(filteredClients[selectedIndex].date_de_naissance),date_delivrance:formatDateToFR(filteredClients[selectedIndex].date_delivrance),date_expiration:formatDateToFR(filteredClients[selectedIndex].date_expiration)}));setResumeDateFields({date_de_naissance:/^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_de_naissance),date_delivrance:/^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_delivrance),date_expiration:/^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_expiration)});setArErrors({});setShowModal(true);}else{alert(translations[locale].selectRowAlert);}};const handleSupprimer=async()=>{if(selectedIndex===null||!filteredClients[selectedIndex]){alert(translations[locale].selectRowAlert);return;}if(isDeleting)return;const clientId=filteredClients[selectedIndex].id;const clientName=filteredClients[selectedIndex].nom||filteredClients[selectedIndex].prenom||filteredClients[selectedIndex].passport_number||\"\";const confirmDelete=window.confirm(translations[locale].confirmDelete(clientName));if(!confirmDelete)return;try{setIsDeleting(true);await window.pywebview.api.delete_client(clientId);setSelectedIndex(null);fetchClients();}catch(err){alert(translations[locale].errorDelete);}finally{setIsDeleting(false);}};const handleCloseModal=()=>{setShowModal(false);setArErrors({});setClientForm(_objectSpread({},emptyForm));setResumeDateFields({date_de_naissance:false,date_delivrance:false,date_expiration:false});};const handleArInput=(field,value)=>{let err=\"\";if(value&&!isArabic(value)){err=translations[locale].saisieArabe;}setClientForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setArErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:err}));};const handleSaveClient=async e=>{e.preventDefault();// Check AR fields before save\nlet newErrors={};for(const f of Object.keys(clientForm)){if(f.endsWith(\"_ar\")&&clientForm[f]&&!isArabic(clientForm[f])){newErrors[f]=translations[locale].saisieArabe;}}setArErrors(newErrors);if(Object.values(newErrors).some(Boolean))return;try{const payload=_objectSpread(_objectSpread({},clientForm),{},{date_de_naissance:formatDateToISO(clientForm.date_de_naissance),date_delivrance:formatDateToISO(clientForm.date_delivrance),date_expiration:formatDateToISO(clientForm.date_expiration)});if(modalMode===\"add\"){await window.pywebview.api.add_client(payload);}else{await window.pywebview.api.update_client(payload);}handleCloseModal();fetchClients();}catch(err){alert(translations[locale].errorSave);}};const handlePhotoChange=file=>{if(!file){setClientForm(s=>_objectSpread(_objectSpread({},s),{},{photo:\"\"}));return;}const reader=new FileReader();reader.onload=()=>{setClientForm(s=>_objectSpread(_objectSpread({},s),{},{photo:reader.result}));};reader.readAsDataURL(file);};const photoSrc=val=>{if(!val)return null;if(typeof val!==\"string\")return null;if(val.startsWith(\"data:\"))return val;return\"data:image/png;base64,\".concat(val);};const tableContainerStyle={maxHeight:\"60vh\",overflowY:\"auto\",border:\"1px solid #e0e0e0\",borderRadius:\"6px\"};const spinnerStyle={margin:\"60px auto\",border:\"8px solid #eee\",borderTop:\"8px solid #3477eb\",borderRadius:\"50%\",width:48,height:48,animation:\"spin 1s linear infinite\"};if(typeof document!==\"undefined\"&&!document.getElementById(\"client-spinner-style\")){const style=document.createElement(\"style\");style.id=\"client-spinner-style\";style.innerHTML=\"\\n      @keyframes spin { to { transform: rotate(360deg); } }\\n      .tableHeaderSticky { position: sticky; top: 0; background: #e8f0fe; z-index: 2; }\\n      .impression-fab-btn { \\n        position: fixed; \\n        bottom: 32px; \\n        right: 32px; \\n        background: #3477eb; \\n        color: #fff;\\n        border-radius: 50px; font-size: 1.2rem; \\n        padding: 1rem 2.2rem; \\n        border: none; \\n        z-index: 10; \\n        box-shadow: 0 3px 12px #3477eb44; \\n        cursor: pointer; \\n        font-weight: bold;\\n        transition: background 0.2s;\\n      }\\n      .impression-fab-btn:hover { background: #265bb1; }\\n      .fiche-fab-btn { \\n        position: fixed; \\n        bottom: 32px; \\n        right: 240px; \\n        background: #1b9e5c; \\n        color: #fff;\\n        border-radius: 50px; font-size: 1.2rem; \\n        padding: 1rem 2.2rem; \\n        border: none; \\n        z-index: 10; \\n        box-shadow: 0 3px 12px #1b9e5c55; \\n        cursor: pointer; \\n        font-weight: bold;\\n        transition: background 0.2s;\\n      }\\n      .fiche-fab-btn:hover { background: #177646; }\\n      @media (max-width: 800px) {\\n        .impression-fab-btn { padding: 0.7rem 1.2rem; right: 12px; bottom: 12px; }\\n        .fiche-fab-btn { padding: 0.7rem 1.2rem; right: 160px; bottom: 12px; }\\n      }\\n    \";document.head.appendChild(style);}function renderTableCell(client,field){var _client$field;if(field===\"photo\"){const src=photoSrc(client[field]);return/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.tableCell),{},{padding:0,textAlign:\"center\",minWidth:50,maxWidth:70,width:60,verticalAlign:\"middle\",background:\"#fff\"}),children:src?/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"photo\",style:{width:50,height:36,objectFit:\"cover\",borderRadius:6,display:\"block\",margin:\"0 auto\"}}):\"-\"},\"\".concat(client.id,\"-\").concat(field));}if(field===\"date_de_naissance\"||field===\"date_delivrance\"||field===\"date_expiration\"){return/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:formatDateToFR(client[field])},\"\".concat(client.id,\"-\").concat(field));}return/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:(_client$field=client[field])!==null&&_client$field!==void 0?_client$field:\"-\"},\"\".concat(client.id,\"-\").concat(field));}// For modal: 4 fields per line, photo on its own line\nconst modalRows=[[\"nom\",\"prenom\",\"nom_ar\",\"prenom_ar\"],[\"prenom_pere\",\"prenom_pere_ar\",\"nom_mere\",\"prenom_mere\"],[\"nom_mere_ar\",\"prenom_mere_ar\",\"date_de_naissance\",\"lieu_de_naissance\"],[\"nationalite\",\"passport_number\",\"date_delivrance\",\"date_expiration\"],[\"addresse\",\"telephone\"]// versement/credit intentionally omitted from modal\n];// Print handler\nconst handleImpression=()=>{window.print();};// Fiche client handler (for now, just alert the user)\nconst handleFicheClient=()=>{if(selectedIndex===null||!filteredClients[selectedIndex]){alert(translations[locale].selectRowAlert);return;}alert((locale===\"ar\"?\"Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„:\\n\":\"Fiche client :\\n\")+JSON.stringify(filteredClients[selectedIndex],null,2));};return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.pageContainer),directionStyle),children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\"},children:translations[locale].title}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.searchContainer),{},{flexDirection:isRtl?\"row-reverse\":\"row\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.searchIcon,children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:translations[locale].searchPlaceholder,value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setSelectedIndex(null);},style:styles.searchInput}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:isRtl?0:'1.2rem',marginRight:isRtl?'1.2rem':0,fontWeight:'bold',fontSize:'1.07rem',color:'#265bb1',minWidth:90},children:[translations[locale].totalClient,\" : \",filteredClients.length]})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"div\",{style:spinnerStyle})}):/*#__PURE__*/_jsx(\"div\",{style:tableContainerStyle,children:/*#__PURE__*/_jsxs(\"table\",{style:tableStyle,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{style:styles.tableHeaderRow,children:isRtl?[...displayedHeaders].reverse().map((h,i)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.tableHeader),h===\"#\"?{width:36,minWidth:24,maxWidth:40}:{}),h===\"Photo\"||h===\"Ø§Ù„ØµÙˆØ±Ø©\"?{minWidth:50,maxWidth:70,width:60}:{}),className:\"tableHeaderSticky\",children:h},i)):displayedHeaders.map((h,i)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.tableHeader),h===\"#\"?{width:36,minWidth:24,maxWidth:40}:{}),h===\"Photo\"||h===\"Ø§Ù„ØµÙˆØ±Ø©\"?{minWidth:50,maxWidth:70,width:60}:{}),className:\"tableHeaderSticky\",children:h},i))})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[filteredClients.map((client,idx)=>/*#__PURE__*/_jsx(\"tr\",{style:_objectSpread(_objectSpread({},styles.tableRow),{},{background:idx===selectedIndex?\"#cce5ff\":idx%2===0?\"#fff\":\"#f4f8ff\"}),onClick:()=>setSelectedIndex(idx),children:isRtl?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:idx+1}),[...tableFieldsOrder].reverse().map(field=>renderTableCell(client,field))]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:idx+1}),tableFieldsOrder.map(field=>renderTableCell(client,field))]})},client.id||client.nom+idx)),filteredClients.length===0&&!isLoading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:displayedHeaders.length,style:{padding:\"1rem\",textAlign:\"center\",color:\"#666\"},children:translations[locale].errorLoad})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{left:isRtl?\"unset\":20,right:isRtl?20:\"unset\",transform:\"none\",justifyContent:\"flex-start\"}),children:[/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleAjouter,children:translations[locale].addButton}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleModifier,children:translations[locale].editButton}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleSupprimer,children:translations[locale].deleteButton})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"fiche-fab-btn\",style:isRtl?{left:\"240px\",right:\"unset\"}:{},onClick:handleFicheClient,children:translations[locale].ficheButton}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"impression-fab-btn\",style:isRtl?{left:\"32px\",right:\"unset\"}:{},onClick:handleImpression,children:translations[locale].printButton}),showModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modalContent),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{children:modalMode===\"add\"?translations[locale].addClient:translations[locale].editClient}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveClient,style:styles.modalForm,children:[modalRows.map((row,rowIdx)=>/*#__PURE__*/_jsxs(\"div\",{style:styles.fieldRow4,children:[row.map((field,i)=>{// Remove versement input from ajouter, and versement/credit from modifier\nif(modalMode===\"add\"&&field===\"versement\")return null;if(modalMode===\"edit\"&&(field===\"versement\"||field===\"credit\"))return null;// Date input custom\nif(field===\"date_de_naissance\"||field===\"date_delivrance\"||field===\"date_expiration\"){return/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4,children:/*#__PURE__*/_jsx(DateInput,{value:clientForm[field]||\"\",onChange:v=>setClientForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:v})),label:translations[locale].modalLabels[field],resumeLabel:translations[locale].resume,resumeChecked:resumeDateFields[field],onResumeChange:checked=>setResumeDateFields(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:checked}))})},i);}return/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4,children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels[field],\":\",field===\"nationalite\"?/*#__PURE__*/_jsx(\"select\",{value:clientForm.nationalite,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{nationalite:e.target.value})),style:styles.modalInput,children:NATIONALITIES.map(nat=>/*#__PURE__*/_jsx(\"option\",{value:nat,children:nat},nat))}):field.endsWith(\"_ar\")?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm[field]||\"\",onChange:e=>handleArInput(field,e.target.value),style:styles.modalInput,dir:\"rtl\",lang:\"ar\",pattern:\"[\\\\u0600-\\\\u06FF\\\\s]+\",title:translations[locale].saisieArabe,placeholder:\"...\"}),arErrors[field]&&/*#__PURE__*/_jsx(\"span\",{style:styles.arError,children:arErrors[field]})]}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm[field]||\"\",onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{[field]:e.target.value})),style:styles.modalInput,required:[\"nom\",\"prenom\",\"passport_number\"].includes(field)})]})},i);}),row.length<4&&[...Array(4-row.length)].map((_,idx)=>/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4},\"empty\"+idx))]},rowIdx)),/*#__PURE__*/_jsxs(\"div\",{style:styles.fieldRow4,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.fieldItem4),{},{flex:1}),children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels.photo,\":\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>handlePhotoChange(e.target.files[0]),style:{marginTop:6}}),clientForm.photo?/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"img\",{src:photoSrc(clientForm.photo),alt:\"preview\",style:{width:80,height:60,objectFit:\"cover\",borderRadius:6}})}):null]})}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalButtons,children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.modalButton,children:translations[locale].save}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.modalButton,onClick:handleCloseModal,children:translations[locale].cancel})]})]})]})})]});}// ...styles remain unchanged...\nconst styles={pageContainer:{padding:\"1.25rem\",position:\"relative\",minHeight:\"100vh\",boxSizing:\"border-box\"},searchContainer:{marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",maxWidth:\"900px\"},searchIcon:{fontSize:\"1.2rem\",marginRight:\"0.5rem\"},searchInput:{flex:1,padding:\"0.5rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"1px solid #ccc\"},table:{width:\"100%\",borderCollapse:\"collapse\",marginTop:\"0\",tableLayout:\"fixed\"},tableHeaderRow:{background:\"#e8f0fe\"},tableHeader:{padding:\"0.5rem\",border:\"1px solid #c2c2c2\",fontWeight:\"bold\",fontSize:\"0.98rem\",background:\"#e8f0fe\"},tableRow:{cursor:\"pointer\"},tableCell:{padding:\"0.35rem 0.45rem\",border:\"1px solid #e0e0e0\",fontSize:\"0.96rem\",wordBreak:\"break-word\",verticalAlign:\"middle\"},drawer:{position:\"fixed\",bottom:\"20px\",left:20,right:\"unset\",background:\"#ffffff\",padding:\"1rem\",borderRadius:\"8px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.15)\",display:\"flex\",flexDirection:\"row\",gap:\"0.5rem\",zIndex:8},drawerButton:{display:\"flex\",alignItems:\"center\",gap:\"0.3rem\",padding:\"0.5rem 1rem\",fontSize:\"1rem\",color:\"#3477eb\",background:\"#eaf3ff\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\",transition:\"background 0.2s\"},modalOverlay:{position:\"fixed\",top:0,left:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:1000},modalContent:{background:\"#fff\",padding:\"2rem\",borderRadius:\"8px\",width:\"96%\",maxWidth:\"980px\",boxShadow:\"0 2px 16px rgba(0,0,0,0.25)\"},modalForm:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},modalLabel:{display:\"flex\",flexDirection:\"column\",fontSize:\"0.9rem\",color:\"#333\"},modalInput:{padding:\"0.5rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"1px solid #ccc\",marginTop:\"0.3rem\"},arError:{color:\"#c00\",fontSize:\"0.85em\",marginTop:\"2px\",fontWeight:\"bold\"},modalButtons:{display:\"flex\",justifyContent:\"flex-end\",gap:\"1rem\",marginTop:\"1rem\"},modalButton:{padding:\"0.5rem 1.2rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"none\",cursor:\"pointer\",background:\"#3477eb\",color:\"#fff\",fontWeight:\"bold\",transition:\"background 0.2s\"},fieldRow4:{display:\"flex\",gap:\"0.45rem\",alignItems:\"flex-start\"},fieldItem4:{flex:1,minWidth:0}};export default ClientPage;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TABLE_FIELDS","MODAL_FIELDS","NATIONALITIES","translations","fr","title","searchPlaceholder","totalClient","selectRowAlert","addClient","editClient","confirmDelete","name","concat","save","cancel","addButton","editButton","deleteButton","printButton","ficheButton","resume","errorLoad","errorSave","errorDelete","saisieArabe","tableHeaders","modalLabels","nom","prenom","nom_ar","prenom_ar","prenom_pere","prenom_pere_ar","nom_mere","prenom_mere","nom_mere_ar","prenom_mere_ar","date_de_naissance","lieu_de_naissance","nationalite","passport_number","date_delivrance","date_expiration","addresse","telephone","versement","credit","photo","ar","formatDateToFR","dateString","test","yyyy","mm","dd","split","formatDateToISO","isArabic","str","DateInput","_ref","value","onChange","label","resumeLabel","resumeChecked","onResumeChange","setResume","setDd","setMm","setYyyy","match","handleResumeChange","e","checked","target","handleDdChange","v","replace","length","handleMmChange","handleYyyyChange","style","display","flexDirection","children","marginLeft","fontSize","cursor","type","gap","marginTop","maxLength","placeholder","disabled","width","textAlign","color","ClientPage","_ref2","locale","clients","setClients","selectedIndex","setSelectedIndex","searchQuery","setSearchQuery","showModal","setShowModal","modalMode","setModalMode","clientForm","setClientForm","id","arErrors","setArErrors","isDeleting","setIsDeleting","isLoading","setIsLoading","resumeDateFields","setResumeDateFields","isRtl","displayedHeaders","reverse","tableFieldsOrder","directionStyle","direction","tableStyle","_objectSpread","styles","table","fetchClients","result","window","pywebview","api","get_clients","err","filteredClients","filter","c","q","trim","toLowerCase","includes","toString","emptyForm","handleAjouter","handleModifier","alert","handleSupprimer","clientId","clientName","confirm","delete_client","handleCloseModal","handleArInput","field","prev","handleSaveClient","preventDefault","newErrors","f","Object","keys","endsWith","values","some","Boolean","payload","add_client","update_client","handlePhotoChange","file","s","reader","FileReader","onload","readAsDataURL","photoSrc","val","startsWith","tableContainerStyle","maxHeight","overflowY","border","borderRadius","spinnerStyle","margin","borderTop","height","animation","document","getElementById","createElement","innerHTML","head","appendChild","renderTableCell","client","_client$field","src","tableCell","padding","minWidth","maxWidth","verticalAlign","background","alt","objectFit","modalRows","handleImpression","print","handleFicheClient","JSON","stringify","pageContainer","searchContainer","searchIcon","searchInput","marginRight","fontWeight","justifyContent","tableHeaderRow","map","h","i","tableHeader","className","idx","tableRow","onClick","colSpan","drawer","left","right","transform","drawerButton","modalOverlay","modalContent","onSubmit","modalForm","row","rowIdx","fieldRow4","fieldItem4","modalLabel","modalInput","nat","dir","lang","pattern","arError","required","Array","_","flex","accept","files","modalButtons","modalButton","position","minHeight","boxSizing","marginBottom","alignItems","borderCollapse","tableLayout","wordBreak","bottom","boxShadow","zIndex","transition","top"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/client.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// Table columns to show (still show versement/credit in table)\nconst TABLE_FIELDS = [\n  \"nom\",\n  \"prenom\",\n  \"date_de_naissance\",\n  \"lieu_de_naissance\",\n  \"passport_number\",\n  \"date_delivrance\",\n  \"date_expiration\",\n  \"addresse\",\n  \"telephone\",\n  \"versement\",\n  \"credit\",\n  \"photo\"\n];\n\n// Modal fields order (for editing, will not show versement/credit in modifier)\nconst MODAL_FIELDS = [\n  \"nom\",\n  \"prenom\",\n  \"nom_ar\",\n  \"prenom_ar\",\n  \"prenom_pere\",\n  \"prenom_pere_ar\",\n  \"nom_mere\",\n  \"prenom_mere\",\n  \"nom_mere_ar\",\n  \"prenom_mere_ar\",\n  \"date_de_naissance\",\n  \"lieu_de_naissance\",\n  \"nationalite\",\n  \"passport_number\",\n  \"date_delivrance\",\n  \"date_expiration\",\n  \"addresse\",\n  \"telephone\",\n  \"photo\"\n];\n\nconst NATIONALITIES = [\n  \"AlgÃ©rienne\", \"Marocaine\", \"Tunisienne\", \"FranÃ§aise\", \"Espagnole\", \"Italienne\", \"Turque\", \"Saoudienne\", \"Ã‰gyptienne\", \"Libyenne\", \"Autre\"\n];\n\nconst translations = {\n  fr: {\n    title: \"Liste des Clients\",\n    searchPlaceholder: \"Rechercher...\",\n    totalClient: \"Total clients\",\n    selectRowAlert: \"Veuillez sÃ©lectionner une ligne client.\",\n    addClient: \"Ajouter Nouveau Client\",\n    editClient: \"Modifier Client\",\n    confirmDelete: (name) => `Supprimer le client ${name} ?`,\n    save: \"Enregistrer\",\n    cancel: \"Annuler\",\n    addButton: \"âž• Ajouter\",\n    editButton: \"âœï¸ Modifier\",\n    deleteButton: \"ðŸ—‘ï¸ Supprimer\",\n    printButton: \"ðŸ–¨ï¸ Impression\",\n    ficheButton: \"ðŸ§¾ Fiche client\",\n    resume: \"RÃ©sumÃ©\",\n    errorLoad: \"Erreur lors du chargement des clients\",\n    errorSave: \"Erreur lors de l'enregistrement !\",\n    errorDelete: \"Erreur lors de la suppression !\",\n    saisieArabe: \"Saisir en arabe\",\n    tableHeaders: [\n      \"#\",\n      \"Nom\",\n      \"PrÃ©nom\",\n      \"Date de naissance\",\n      \"Lieu de naissance\",\n      \"NÂ° Passport\",\n      \"Date dÃ©livrance\",\n      \"Date expiration\",\n      \"Adresse\",\n      \"NÂ° TÃ©lÃ©phone\",\n      \"Versement\",\n      \"CrÃ©dit\",\n      \"Photo\"\n    ],\n    modalLabels: {\n      nom: \"Nom\",\n      prenom: \"PrÃ©nom\",\n      nom_ar: \"Nom (arabe)\",\n      prenom_ar: \"PrÃ©nom (arabe)\",\n      prenom_pere: \"PrÃ©nom pÃ¨re\",\n      prenom_pere_ar: \"PrÃ©nom pÃ¨re (arabe)\",\n      nom_mere: \"Nom mÃ¨re\",\n      prenom_mere: \"PrÃ©nom mÃ¨re\",\n      nom_mere_ar: \"Nom mÃ¨re (arabe)\",\n      prenom_mere_ar: \"PrÃ©nom mÃ¨re (arabe)\",\n      date_de_naissance: \"Date de naissance\",\n      lieu_de_naissance: \"Lieu de naissance\",\n      nationalite: \"NationalitÃ©\",\n      passport_number: \"NÂ° Passport\",\n      date_delivrance: \"Date dÃ©livrance\",\n      date_expiration: \"Date expiration\",\n      addresse: \"Adresse\",\n      telephone: \"NÂ° TÃ©lÃ©phone\",\n      versement: \"Versement\",\n      credit: \"CrÃ©dit\",\n      photo: \"Photo (jpg/png)\"\n    }\n  },\n  ar: {\n    title: \"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\n    searchPlaceholder: \"Ø¨Ø­Ø«...\",\n    totalClient: \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\n    selectRowAlert: \"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ ØµÙ Ø§Ù„Ø¹Ù…ÙŠÙ„.\",\n    addClient: \"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\",\n    editClient: \"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„\",\n    confirmDelete: (name) => `Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ ${name}ØŸ`,\n    save: \"Ø­ÙØ¸\",\n    cancel: \"Ø¥Ù„ØºØ§Ø¡\",\n    addButton: \"âž• Ø¥Ø¶Ø§ÙØ©\",\n    editButton: \"âœï¸ ØªØ¹Ø¯ÙŠÙ„\",\n    deleteButton: \"ðŸ—‘ï¸ Ø­Ø°Ù\",\n    printButton: \"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\",\n    ficheButton: \"ðŸ§¾ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„\",\n    resume: \"Ø®Ù„Ø§Ù„\",\n    errorLoad: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\n    errorSave: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸!\",\n    errorDelete: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù!\",\n    saisieArabe: \"ÙŠØ±Ø¬Ù‰ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\",\n    tableHeaders: [\n      \"#\",\n      \"Ø§Ù„Ù„Ù‚Ø¨\",\n      \"Ø§Ù„Ø§Ø³Ù…\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      \"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      \"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\n      \"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\n      \"Ø§Ù„Ù‡Ø§ØªÙ\",\n      \"Ø¯ÙØ¹Ø©\",\n      \"Ø¯ÙŽÙŠÙ†\",\n      \"Ø§Ù„ØµÙˆØ±Ø©\"\n    ],\n    modalLabels: {\n      nom: \"Ø§Ù„Ù„Ù‚Ø¨\",\n      prenom: \"Ø§Ù„Ø§Ø³Ù…\",\n      nom_ar: \"Ø§Ù„Ù„Ù‚Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_ar: \"Ø§Ù„Ø§Ø³Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_pere: \"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨\",\n      prenom_pere_ar: \"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      nom_mere: \"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù…\",\n      prenom_mere: \"Ø§Ø³Ù… Ø§Ù„Ø£Ù…\",\n      nom_mere_ar: \"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_mere_ar: \"Ø§Ø³Ù… Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      date_de_naissance: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      lieu_de_naissance: \"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      nationalite: \"Ø§Ù„Ø¬Ù†Ø³ÙŠØ©\",\n      passport_number: \"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\n      date_delivrance: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\n      date_expiration: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\n      addresse: \"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\n      telephone: \"Ø§Ù„Ù‡Ø§ØªÙ\",\n      versement: \"Ø¯ÙØ¹Ø©\",\n      credit: \"Ø¯ÙŽÙŠÙ†\",\n      photo: \"Ø§Ù„ØµÙˆØ±Ø© (jpg/png)\"\n    }\n  }\n};\n\nfunction formatDateToFR(dateString) {\n  if (!dateString) return \"\";\n  // Accept both yyyy-mm-dd and dd-mm-yyyy and convert to dd/mm/yyyy\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\n    const [yyyy, mm, dd] = dateString.split(\"-\");\n    return `${dd}/${mm}/${yyyy}`;\n  } else if (/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)) {\n    const [dd, mm, yyyy] = dateString.split(\"-\");\n    return `${dd}/${mm}/${yyyy}`;\n  } else if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)) {\n    return dateString;\n  }\n  return dateString;\n}\n\nfunction formatDateToISO(dateString) {\n  if (!dateString) return \"\";\n  // Accept dd/mm/yyyy or dd-mm-yyyy and convert to yyyy-mm-dd\n  let dd, mm, yyyy;\n  if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)) {\n    [dd, mm, yyyy] = dateString.split(\"/\");\n  } else if (/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)) {\n    [dd, mm, yyyy] = dateString.split(\"-\");\n  } else if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\n    return dateString;\n  }\n  if (yyyy && mm && dd) {\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  return dateString;\n}\n\nfunction isArabic(str) {\n  return /^[\\u0600-\\u06FF\\s]+$/.test(str);\n}\n\nfunction DateInput({ value, onChange, label, resumeLabel, resumeChecked, onResumeChange }) {\n  // value: always like dd/mm/yyyy or \"\"\n  let [resume, setResume] = useState(resumeChecked || false);\n  let [dd, setDd] = useState(\"\");\n  let [mm, setMm] = useState(\"\");\n  let [yyyy, setYyyy] = useState(\"\");\n\n  useEffect(() => {\n    if (!resume && value) {\n      // Normal mode, fill dd, mm, yyyy if value is complete\n      const match = value.match(/^(\\d{2})[\\/-](\\d{2})[\\/-](\\d{4})$/);\n      if (match) {\n        setDd(match[1]);\n        setMm(match[2]);\n        setYyyy(match[3]);\n      } else {\n        setDd(\"\");\n        setMm(\"\");\n        setYyyy(\"\");\n      }\n    } else if (resume && value) {\n      // Resume mode, only yyyy is editable\n      const match = value.match(/^01[\\/-]01[\\/-](\\d{4})$/);\n      if (match) {\n        setDd(\"01\");\n        setMm(\"01\");\n        setYyyy(match[1]);\n      } else {\n        setDd(\"01\");\n        setMm(\"01\");\n        setYyyy(\"\");\n      }\n    } else {\n      setDd(\"\");\n      setMm(\"\");\n      setYyyy(\"\");\n    }\n    // eslint-disable-next-line\n  }, [value, resume]);\n\n  function handleResumeChange(e) {\n    const checked = e.target.checked;\n    setResume(checked);\n    if (onResumeChange) onResumeChange(checked);\n    if (checked) {\n      // Switch to resume, set value to 01/01/yyyy if year is present\n      if (yyyy) {\n        onChange(`01/01/${yyyy}`);\n      } else {\n        onChange(\"\");\n      }\n    } else {\n      // Switch to normal, clear value\n      onChange(\"\");\n    }\n  }\n\n  function handleDdChange(e) {\n    const v = e.target.value.replace(/\\D/, \"\");\n    setDd(v);\n    if (v.length === 2 && mm.length === 2 && yyyy.length === 4) {\n      onChange(`${v}/${mm}/${yyyy}`);\n    } else {\n      onChange(\"\");\n    }\n  }\n  function handleMmChange(e) {\n    const v = e.target.value.replace(/\\D/, \"\");\n    setMm(v);\n    if (dd.length === 2 && v.length === 2 && yyyy.length === 4) {\n      onChange(`${dd}/${v}/${yyyy}`);\n    } else {\n      onChange(\"\");\n    }\n  }\n  function handleYyyyChange(e) {\n    const v = e.target.value.replace(/\\D/, \"\");\n    setYyyy(v);\n    if (resume) {\n      // Resume mode: set value to 01/01/yyyy if yyyy is 4 digits\n      if (v.length === 4) {\n        onChange(`01/01/${v}`);\n      } else {\n        onChange(\"\");\n      }\n    } else {\n      // Normal mode: set value if all are filled\n      if (dd.length === 2 && mm.length === 2 && v.length === 4) {\n        onChange(`${dd}/${mm}/${v}`);\n      } else {\n        onChange(\"\");\n      }\n    }\n  }\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <span>\n        {label}\n        <label style={{ marginLeft: 12, fontSize: \"0.95em\", cursor: \"pointer\" }}>\n          <input type=\"checkbox\" checked={resume} onChange={handleResumeChange} />\n          {resumeLabel}\n        </label>\n      </span>\n      <div style={{ display: \"flex\", gap: \"0.4em\", marginTop: 2 }}>\n        <input\n          type=\"text\"\n          value={dd}\n          onChange={handleDdChange}\n          maxLength={2}\n          placeholder=\"jj\"\n          disabled={resume}\n          style={{ width: 38, textAlign: \"center\" }}\n        />\n        <span style={{ fontSize: 18, color: \"#666\" }}>/</span>\n        <input\n          type=\"text\"\n          value={mm}\n          onChange={handleMmChange}\n          maxLength={2}\n          placeholder=\"mm\"\n          disabled={resume}\n          style={{ width: 38, textAlign: \"center\" }}\n        />\n        <span style={{ fontSize: 18, color: \"#666\" }}>/</span>\n        <input\n          type=\"text\"\n          value={yyyy}\n          onChange={handleYyyyChange}\n          maxLength={4}\n          placeholder=\"aaaa\"\n          style={{ width: 60, textAlign: \"center\" }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction ClientPage({ locale = \"fr\" }) {\n  const [clients, setClients] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [modalMode, setModalMode] = useState(\"add\");\n  const [clientForm, setClientForm] = useState({\n    id: null,\n    nom: \"\",\n    prenom: \"\",\n    nom_ar: \"\",\n    prenom_ar: \"\",\n    prenom_pere: \"\",\n    prenom_pere_ar: \"\",\n    nom_mere: \"\",\n    prenom_mere: \"\",\n    nom_mere_ar: \"\",\n    prenom_mere_ar: \"\",\n    date_de_naissance: \"\",\n    lieu_de_naissance: \"\",\n    nationalite: \"AlgÃ©rienne\",\n    passport_number: \"\",\n    date_delivrance: \"\",\n    date_expiration: \"\",\n    addresse: \"\",\n    telephone: \"\",\n    versement: \"\",\n    credit: \"\",\n    photo: \"\"\n  });\n  const [arErrors, setArErrors] = useState({});\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  // Track resume checkboxes for each date field\n  const [resumeDateFields, setResumeDateFields] = useState({\n    date_de_naissance: false,\n    date_delivrance: false,\n    date_expiration: false\n  });\n\n  const isRtl = locale === \"ar\";\n  const displayedHeaders = isRtl\n    ? [...translations[locale].tableHeaders].reverse()\n    : translations[locale].tableHeaders;\n  const tableFieldsOrder = isRtl\n    ? [...TABLE_FIELDS].reverse()\n    : [...TABLE_FIELDS];\n  const directionStyle = isRtl\n    ? { direction: \"rtl\" }\n    : { direction: \"ltr\" };\n  const tableStyle = isRtl\n    ? { ...styles.table, direction: \"rtl\" }\n    : styles.table;\n\n  const fetchClients = async () => {\n    setIsLoading(true);\n    try {\n      const result = await window.pywebview.api.get_clients();\n      setClients(result || []);\n    } catch (err) {\n      setClients([]);\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchClients();\n    // eslint-disable-next-line\n  }, [locale]);\n\n  const filteredClients = clients.filter((c) => {\n    const q = searchQuery.trim().toLowerCase();\n    if (!q) return true;\n    return (\n      (c.nom || \"\").toLowerCase().includes(q) ||\n      (c.prenom || \"\").toLowerCase().includes(q) ||\n      (c.date_de_naissance || \"\").toLowerCase().includes(q) ||\n      (c.lieu_de_naissance || \"\").toLowerCase().includes(q) ||\n      (c.nationalite || \"\").toLowerCase().includes(q) ||\n      (c.passport_number || \"\").toString().toLowerCase().includes(q) ||\n      (c.telephone || \"\").toLowerCase().includes(q)\n    );\n  });\n\n  const emptyForm = {\n    id: null,\n    nom: \"\",\n    prenom: \"\",\n    nom_ar: \"\",\n    prenom_ar: \"\",\n    prenom_pere: \"\",\n    prenom_pere_ar: \"\",\n    nom_mere: \"\",\n    prenom_mere: \"\",\n    nom_mere_ar: \"\",\n    prenom_mere_ar: \"\",\n    date_de_naissance: \"\",\n    lieu_de_naissance: \"\",\n    nationalite: \"AlgÃ©rienne\",\n    passport_number: \"\",\n    date_delivrance: \"\",\n    date_expiration: \"\",\n    addresse: \"\",\n    telephone: \"\",\n    versement: \"\",\n    credit: \"\",\n    photo: \"\"\n  };\n\n  const handleAjouter = () => {\n    setModalMode(\"add\");\n    setClientForm({ ...emptyForm });\n    setResumeDateFields({\n      date_de_naissance: false,\n      date_delivrance: false,\n      date_expiration: false\n    });\n    setArErrors({});\n    setShowModal(true);\n  };\n\n  const handleModifier = () => {\n    if (selectedIndex !== null && filteredClients[selectedIndex]) {\n      setModalMode(\"edit\");\n      setClientForm({\n        ...filteredClients[selectedIndex],\n        date_de_naissance: formatDateToFR(filteredClients[selectedIndex].date_de_naissance),\n        date_delivrance: formatDateToFR(filteredClients[selectedIndex].date_delivrance),\n        date_expiration: formatDateToFR(filteredClients[selectedIndex].date_expiration)\n      });\n      setResumeDateFields({\n        date_de_naissance: /^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_de_naissance),\n        date_delivrance: /^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_delivrance),\n        date_expiration: /^01[\\/-]01[\\/-]\\d{4}$/.test(filteredClients[selectedIndex].date_expiration)\n      });\n      setArErrors({});\n      setShowModal(true);\n    } else {\n      alert(translations[locale].selectRowAlert);\n    }\n  };\n\n  const handleSupprimer = async () => {\n    if (selectedIndex === null || !filteredClients[selectedIndex]) {\n      alert(translations[locale].selectRowAlert);\n      return;\n    }\n    if (isDeleting) return;\n    const clientId = filteredClients[selectedIndex].id;\n    const clientName =\n      filteredClients[selectedIndex].nom ||\n      filteredClients[selectedIndex].prenom ||\n      filteredClients[selectedIndex].passport_number ||\n      \"\";\n    const confirmDelete = window.confirm(\n      translations[locale].confirmDelete(clientName)\n    );\n    if (!confirmDelete) return;\n    try {\n      setIsDeleting(true);\n      await window.pywebview.api.delete_client(clientId);\n      setSelectedIndex(null);\n      fetchClients();\n    } catch (err) {\n      alert(translations[locale].errorDelete);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setArErrors({});\n    setClientForm({ ...emptyForm });\n    setResumeDateFields({\n      date_de_naissance: false,\n      date_delivrance: false,\n      date_expiration: false\n    });\n  };\n\n  const handleArInput = (field, value) => {\n    let err = \"\";\n    if (value && !isArabic(value)) {\n      err = translations[locale].saisieArabe;\n    }\n    setClientForm((prev) => ({ ...prev, [field]: value }));\n    setArErrors((prev) => ({ ...prev, [field]: err }));\n  };\n\n  const handleSaveClient = async (e) => {\n    e.preventDefault();\n    // Check AR fields before save\n    let newErrors = {};\n    for (const f of Object.keys(clientForm)) {\n      if (f.endsWith(\"_ar\") && clientForm[f] && !isArabic(clientForm[f])) {\n        newErrors[f] = translations[locale].saisieArabe;\n      }\n    }\n    setArErrors(newErrors);\n    if (Object.values(newErrors).some(Boolean)) return;\n\n    try {\n      const payload = {\n        ...clientForm,\n        date_de_naissance: formatDateToISO(clientForm.date_de_naissance),\n        date_delivrance: formatDateToISO(clientForm.date_delivrance),\n        date_expiration: formatDateToISO(clientForm.date_expiration)\n      };\n      if (modalMode === \"add\") {\n        await window.pywebview.api.add_client(payload);\n      } else {\n        await window.pywebview.api.update_client(payload);\n      }\n      handleCloseModal();\n      fetchClients();\n    } catch (err) {\n      alert(translations[locale].errorSave);\n    }\n  };\n\n  const handlePhotoChange = (file) => {\n    if (!file) {\n      setClientForm((s) => ({ ...s, photo: \"\" }));\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      setClientForm((s) => ({ ...s, photo: reader.result }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const photoSrc = (val) => {\n    if (!val) return null;\n    if (typeof val !== \"string\") return null;\n    if (val.startsWith(\"data:\")) return val;\n    return `data:image/png;base64,${val}`;\n  };\n\n  const tableContainerStyle = {\n    maxHeight: \"60vh\",\n    overflowY: \"auto\",\n    border: \"1px solid #e0e0e0\",\n    borderRadius: \"6px\"\n  };\n\n  const spinnerStyle = {\n    margin: \"60px auto\",\n    border: \"8px solid #eee\",\n    borderTop: \"8px solid #3477eb\",\n    borderRadius: \"50%\",\n    width: 48,\n    height: 48,\n    animation: \"spin 1s linear infinite\"\n  };\n\n  if (typeof document !== \"undefined\" && !document.getElementById(\"client-spinner-style\")) {\n    const style = document.createElement(\"style\");\n    style.id = \"client-spinner-style\";\n    style.innerHTML = `\n      @keyframes spin { to { transform: rotate(360deg); } }\n      .tableHeaderSticky { position: sticky; top: 0; background: #e8f0fe; z-index: 2; }\n      .impression-fab-btn { \n        position: fixed; \n        bottom: 32px; \n        right: 32px; \n        background: #3477eb; \n        color: #fff;\n        border-radius: 50px; font-size: 1.2rem; \n        padding: 1rem 2.2rem; \n        border: none; \n        z-index: 10; \n        box-shadow: 0 3px 12px #3477eb44; \n        cursor: pointer; \n        font-weight: bold;\n        transition: background 0.2s;\n      }\n      .impression-fab-btn:hover { background: #265bb1; }\n      .fiche-fab-btn { \n        position: fixed; \n        bottom: 32px; \n        right: 240px; \n        background: #1b9e5c; \n        color: #fff;\n        border-radius: 50px; font-size: 1.2rem; \n        padding: 1rem 2.2rem; \n        border: none; \n        z-index: 10; \n        box-shadow: 0 3px 12px #1b9e5c55; \n        cursor: pointer; \n        font-weight: bold;\n        transition: background 0.2s;\n      }\n      .fiche-fab-btn:hover { background: #177646; }\n      @media (max-width: 800px) {\n        .impression-fab-btn { padding: 0.7rem 1.2rem; right: 12px; bottom: 12px; }\n        .fiche-fab-btn { padding: 0.7rem 1.2rem; right: 160px; bottom: 12px; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  function renderTableCell(client, field) {\n    if (field === \"photo\") {\n      const src = photoSrc(client[field]);\n      return (\n        <td\n          key={`${client.id}-${field}`}\n          style={{\n            ...styles.tableCell,\n            padding: 0,\n            textAlign: \"center\",\n            minWidth: 50,\n            maxWidth: 70,\n            width: 60,\n            verticalAlign: \"middle\",\n            background: \"#fff\"\n          }}\n        >\n          {src ? (\n            <img\n              src={src}\n              alt=\"photo\"\n              style={{\n                width: 50,\n                height: 36,\n                objectFit: \"cover\",\n                borderRadius: 6,\n                display: \"block\",\n                margin: \"0 auto\"\n              }}\n            />\n          ) : (\n            \"-\"\n          )}\n        </td>\n      );\n    }\n    if (\n      field === \"date_de_naissance\" ||\n      field === \"date_delivrance\" ||\n      field === \"date_expiration\"\n    ) {\n      return (\n        <td key={`${client.id}-${field}`} style={styles.tableCell}>\n          {formatDateToFR(client[field])}\n        </td>\n      );\n    }\n    return (\n      <td key={`${client.id}-${field}`} style={styles.tableCell}>\n        {client[field] ?? \"-\"}\n      </td>\n    );\n  }\n\n  // For modal: 4 fields per line, photo on its own line\n  const modalRows = [\n    [\"nom\", \"prenom\", \"nom_ar\", \"prenom_ar\"],\n    [\"prenom_pere\", \"prenom_pere_ar\", \"nom_mere\", \"prenom_mere\"],\n    [\"nom_mere_ar\", \"prenom_mere_ar\", \"date_de_naissance\", \"lieu_de_naissance\"],\n    [\"nationalite\", \"passport_number\", \"date_delivrance\", \"date_expiration\"],\n    [\"addresse\", \"telephone\"]\n    // versement/credit intentionally omitted from modal\n  ];\n\n  // Print handler\n  const handleImpression = () => {\n    window.print();\n  };\n\n  // Fiche client handler (for now, just alert the user)\n  const handleFicheClient = () => {\n    if (selectedIndex === null || !filteredClients[selectedIndex]) {\n      alert(translations[locale].selectRowAlert);\n      return;\n    }\n    alert(\n      (locale === \"ar\"\n        ? \"Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„:\\n\"\n        : \"Fiche client :\\n\") +\n        JSON.stringify(filteredClients[selectedIndex], null, 2)\n    );\n  };\n\n  return (\n    <div style={{ ...styles.pageContainer, ...directionStyle }}>\n      <h2 style={{ textAlign: \"center\" }}>{translations[locale].title}</h2>\n      {/* Search bar + Total client */}\n      <div style={{ ...styles.searchContainer, flexDirection: isRtl ? \"row-reverse\" : \"row\" }}>\n        <span style={styles.searchIcon}>ðŸ”</span>\n        <input\n          type=\"text\"\n          placeholder={translations[locale].searchPlaceholder}\n          value={searchQuery}\n          onChange={(e) => {\n            setSearchQuery(e.target.value);\n            setSelectedIndex(null);\n          }}\n          style={styles.searchInput}\n        />\n        <span style={{\n          marginLeft: isRtl ? 0 : '1.2rem',\n          marginRight: isRtl ? '1.2rem' : 0,\n          fontWeight: 'bold',\n          fontSize: '1.07rem',\n          color: '#265bb1',\n          minWidth: 90\n        }}>\n          {translations[locale].totalClient} : {filteredClients.length}\n        </span>\n      </div>\n      {isLoading ? (\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <div style={spinnerStyle}></div>\n        </div>\n      ) : (\n        <div style={tableContainerStyle}>\n          <table style={tableStyle}>\n            <thead>\n              <tr style={styles.tableHeaderRow}>\n                {isRtl\n                  ? [...displayedHeaders].reverse().map((h, i) => (\n                      <th\n                        key={i}\n                        style={{\n                          ...styles.tableHeader,\n                          ...(h === \"#\" ? { width: 36, minWidth: 24, maxWidth: 40 } : {}),\n                          ...(h === \"Photo\" || h === \"Ø§Ù„ØµÙˆØ±Ø©\" ? { minWidth: 50, maxWidth: 70, width: 60 } : {}),\n                        }}\n                        className=\"tableHeaderSticky\"\n                      >\n                        {h}\n                      </th>\n                    ))\n                  : displayedHeaders.map((h, i) => (\n                      <th\n                        key={i}\n                        style={{\n                          ...styles.tableHeader,\n                          ...(h === \"#\" ? { width: 36, minWidth: 24, maxWidth: 40 } : {}),\n                          ...(h === \"Photo\" || h === \"Ø§Ù„ØµÙˆØ±Ø©\" ? { minWidth: 50, maxWidth: 70, width: 60 } : {}),\n                        }}\n                        className=\"tableHeaderSticky\"\n                      >\n                        {h}\n                      </th>\n                    ))}\n              </tr>\n            </thead>\n            <tbody>\n              {filteredClients.map((client, idx) => (\n                <tr\n                  key={client.id || (client.nom + idx)}\n                  style={{\n                    ...styles.tableRow,\n                    background:\n                      idx === selectedIndex\n                        ? \"#cce5ff\"\n                        : idx % 2 === 0\n                        ? \"#fff\"\n                        : \"#f4f8ff\"\n                  }}\n                  onClick={() => setSelectedIndex(idx)}\n                >\n                  {isRtl ? (\n                    <>\n                      <td style={styles.tableCell}>{idx + 1}</td>\n                      {[...tableFieldsOrder].reverse().map(field => renderTableCell(client, field))}\n                    </>\n                  ) : (\n                    <>\n                      <td style={styles.tableCell}>{idx + 1}</td>\n                      {tableFieldsOrder.map(field => renderTableCell(client, field))}\n                    </>\n                  )}\n                </tr>\n              ))}\n              {filteredClients.length === 0 && !isLoading && (\n                <tr>\n                  <td colSpan={displayedHeaders.length} style={{ padding: \"1rem\", textAlign: \"center\", color: \"#666\" }}>\n                    {translations[locale].errorLoad}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n      {/* Drawer for CRUD buttons */}\n      <div style={{\n        ...styles.drawer,\n        left: isRtl ? \"unset\" : 20,\n        right: isRtl ? 20 : \"unset\",\n        transform: \"none\",\n        justifyContent: \"flex-start\"\n      }}>\n        <button style={styles.drawerButton} onClick={handleAjouter}>\n          {translations[locale].addButton}\n        </button>\n        <button style={styles.drawerButton} onClick={handleModifier}>\n          {translations[locale].editButton}\n        </button>\n        <button style={styles.drawerButton} onClick={handleSupprimer}>\n          {translations[locale].deleteButton}\n        </button>\n      </div>\n      {/* Fiche client floating button */}\n      <button\n        type=\"button\"\n        className=\"fiche-fab-btn\"\n        style={isRtl ? { left: \"240px\", right: \"unset\" } : {}}\n        onClick={handleFicheClient}\n      >\n        {translations[locale].ficheButton}\n      </button>\n      {/* Impression floating button */}\n      <button\n        type=\"button\"\n        className=\"impression-fab-btn\"\n        style={isRtl ? { left: \"32px\", right: \"unset\" } : {}}\n        onClick={handleImpression}\n      >\n        {translations[locale].printButton}\n      </button>\n      {/* Modal for Adding/Editing a Client */}\n      {showModal && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.modalContent, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3>\n              {modalMode === \"add\"\n                ? translations[locale].addClient\n                : translations[locale].editClient}\n            </h3>\n            <form onSubmit={handleSaveClient} style={styles.modalForm}>\n              {modalRows.map((row, rowIdx) => (\n                <div style={styles.fieldRow4} key={rowIdx}>\n                  {row.map((field, i) => {\n                    // Remove versement input from ajouter, and versement/credit from modifier\n                    if (modalMode === \"add\" && field === \"versement\") return null;\n                    if (modalMode === \"edit\" && (field === \"versement\" || field === \"credit\")) return null;\n                    // Date input custom\n                    if (\n                      field === \"date_de_naissance\" ||\n                      field === \"date_delivrance\" ||\n                      field === \"date_expiration\"\n                    ) {\n                      return (\n                        <div style={styles.fieldItem4} key={i}>\n                          <DateInput\n                            value={clientForm[field] || \"\"}\n                            onChange={v =>\n                              setClientForm((prev) => ({\n                                ...prev,\n                                [field]: v\n                              }))\n                            }\n                            label={translations[locale].modalLabels[field]}\n                            resumeLabel={translations[locale].resume}\n                            resumeChecked={resumeDateFields[field]}\n                            onResumeChange={checked =>\n                              setResumeDateFields((prev) => ({\n                                ...prev,\n                                [field]: checked\n                              }))\n                            }\n                          />\n                        </div>\n                      );\n                    }\n                    return (\n                      <div style={styles.fieldItem4} key={i}>\n                        <label style={styles.modalLabel}>\n                          {translations[locale].modalLabels[field]}:\n                          {field === \"nationalite\" ? (\n                            <select\n                              value={clientForm.nationalite}\n                              onChange={e =>\n                                setClientForm({ ...clientForm, nationalite: e.target.value })\n                              }\n                              style={styles.modalInput}\n                            >\n                              {NATIONALITIES.map(nat => (\n                                <option value={nat} key={nat}>{nat}</option>\n                              ))}\n                            </select>\n                          ) : field.endsWith(\"_ar\") ? (\n                            <>\n                              <input\n                                type=\"text\"\n                                value={clientForm[field] || \"\"}\n                                onChange={e => handleArInput(field, e.target.value)}\n                                style={styles.modalInput}\n                                dir=\"rtl\"\n                                lang=\"ar\"\n                                pattern=\"[\\u0600-\\u06FF\\s]+\"\n                                title={translations[locale].saisieArabe}\n                                placeholder=\"...\"\n                              />\n                              {arErrors[field] && (\n                                <span style={styles.arError}>{arErrors[field]}</span>\n                              )}\n                            </>\n                          ) : (\n                            <input\n                              type=\"text\"\n                              value={clientForm[field] || \"\"}\n                              onChange={e =>\n                                setClientForm({ ...clientForm, [field]: e.target.value })\n                              }\n                              style={styles.modalInput}\n                              required={\n                                [\"nom\", \"prenom\", \"passport_number\"].includes(field)\n                              }\n                            />\n                          )}\n                        </label>\n                      </div>\n                    );\n                  })}\n                  {row.length < 4 &&\n                    [...Array(4 - row.length)].map((_, idx) => (\n                      <div style={styles.fieldItem4} key={\"empty\" + idx}></div>\n                    ))}\n                </div>\n              ))}\n              <div style={styles.fieldRow4}>\n                <div style={{ ...styles.fieldItem4, flex: 1 }}>\n                  <label style={styles.modalLabel}>\n                    {translations[locale].modalLabels.photo}:\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => handlePhotoChange(e.target.files[0])}\n                      style={{ marginTop: 6 }}\n                    />\n                    {clientForm.photo ? (\n                      <div style={{ marginTop: 8 }}>\n                        <img\n                          src={photoSrc(clientForm.photo)}\n                          alt=\"preview\"\n                          style={{ width: 80, height: 60, objectFit: \"cover\", borderRadius: 6 }}\n                        />\n                      </div>\n                    ) : null}\n                  </label>\n                </div>\n                <div style={styles.fieldItem4}></div>\n                <div style={styles.fieldItem4}></div>\n                <div style={styles.fieldItem4}></div>\n              </div>\n              <div style={styles.modalButtons}>\n                <button type=\"submit\" style={styles.modalButton}>\n                  {translations[locale].save}\n                </button>\n                <button type=\"button\" style={styles.modalButton} onClick={handleCloseModal}>\n                  {translations[locale].cancel}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ...styles remain unchanged...\n\nconst styles = {\n  pageContainer: {\n    padding: \"1.25rem\",\n    position: \"relative\",\n    minHeight: \"100vh\",\n    boxSizing: \"border-box\"\n  },\n  searchContainer: {\n    marginBottom: \"1rem\",\n    display: \"flex\",\n    alignItems: \"center\",\n    maxWidth: \"900px\"\n  },\n  searchIcon: {\n    fontSize: \"1.2rem\",\n    marginRight: \"0.5rem\"\n  },\n  searchInput: {\n    flex: 1,\n    padding: \"0.5rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"1px solid #ccc\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    marginTop: \"0\",\n    tableLayout: \"fixed\"\n  },\n  tableHeaderRow: {\n    background: \"#e8f0fe\"\n  },\n  tableHeader: {\n    padding: \"0.5rem\",\n    border: \"1px solid #c2c2c2\",\n    fontWeight: \"bold\",\n    fontSize: \"0.98rem\",\n    background: \"#e8f0fe\"\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableCell: {\n    padding: \"0.35rem 0.45rem\",\n    border: \"1px solid #e0e0e0\",\n    fontSize: \"0.96rem\",\n    wordBreak: \"break-word\",\n    verticalAlign: \"middle\"\n  },\n  drawer: {\n    position: \"fixed\",\n    bottom: \"20px\",\n    left: 20,\n    right: \"unset\",\n    background: \"#ffffff\",\n    padding: \"1rem\",\n    borderRadius: \"8px\",\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    gap: \"0.5rem\",\n    zIndex: 8\n  },\n  drawerButton: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"0.3rem\",\n    padding: \"0.5rem 1rem\",\n    fontSize: \"1rem\",\n    color: \"#3477eb\",\n    background: \"#eaf3ff\",\n    border: \"none\",\n    borderRadius: \"4px\",\n    cursor: \"pointer\",\n    transition: \"background 0.2s\"\n  },\n  modalOverlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100vw\",\n    height: \"100vh\",\n    background: \"rgba(0, 0, 0, 0.5)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 1000\n  },\n  modalContent: {\n    background: \"#fff\",\n    padding: \"2rem\",\n    borderRadius: \"8px\",\n    width: \"96%\",\n    maxWidth: \"980px\",\n    boxShadow: \"0 2px 16px rgba(0,0,0,0.25)\"\n  },\n  modalForm: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"1rem\"\n  },\n  modalLabel: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    fontSize: \"0.9rem\",\n    color: \"#333\"\n  },\n  modalInput: {\n    padding: \"0.5rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"1px solid #ccc\",\n    marginTop: \"0.3rem\"\n  },\n  arError: {\n    color: \"#c00\",\n    fontSize: \"0.85em\",\n    marginTop: \"2px\",\n    fontWeight: \"bold\"\n  },\n  modalButtons: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: \"1rem\",\n    marginTop: \"1rem\"\n  },\n  modalButton: {\n    padding: \"0.5rem 1.2rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"none\",\n    cursor: \"pointer\",\n    background: \"#3477eb\",\n    color: \"#fff\",\n    fontWeight: \"bold\",\n    transition: \"background 0.2s\"\n  },\n  fieldRow4: {\n    display: \"flex\",\n    gap: \"0.45rem\",\n    alignItems: \"flex-start\"\n  },\n  fieldItem4: {\n    flex: 1,\n    minWidth: 0\n  }\n};\n\nexport default ClientPage;"],"mappings":"sHAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,YAAY,CAAG,CACnB,KAAK,CACL,QAAQ,CACR,mBAAmB,CACnB,mBAAmB,CACnB,iBAAiB,CACjB,iBAAiB,CACjB,iBAAiB,CACjB,UAAU,CACV,WAAW,CACX,WAAW,CACX,QAAQ,CACR,OAAO,CACR,CAED;AACA,KAAM,CAAAC,YAAY,CAAG,CACnB,KAAK,CACL,QAAQ,CACR,QAAQ,CACR,WAAW,CACX,aAAa,CACb,gBAAgB,CAChB,UAAU,CACV,aAAa,CACb,aAAa,CACb,gBAAgB,CAChB,mBAAmB,CACnB,mBAAmB,CACnB,aAAa,CACb,iBAAiB,CACjB,iBAAiB,CACjB,iBAAiB,CACjB,UAAU,CACV,WAAW,CACX,OAAO,CACR,CAED,KAAM,CAAAC,aAAa,CAAG,CACpB,YAAY,CAAE,WAAW,CAAE,YAAY,CAAE,WAAW,CAAE,WAAW,CAAE,WAAW,CAAE,QAAQ,CAAE,YAAY,CAAE,YAAY,CAAE,UAAU,CAAE,OAAO,CAC1I,CAED,KAAM,CAAAC,YAAY,CAAG,CACnBC,EAAE,CAAE,CACFC,KAAK,CAAE,mBAAmB,CAC1BC,iBAAiB,CAAE,eAAe,CAClCC,WAAW,CAAE,eAAe,CAC5BC,cAAc,CAAE,yCAAyC,CACzDC,SAAS,CAAE,wBAAwB,CACnCC,UAAU,CAAE,iBAAiB,CAC7BC,aAAa,CAAGC,IAAI,yBAAAC,MAAA,CAA4BD,IAAI,MAAI,CACxDE,IAAI,CAAE,aAAa,CACnBC,MAAM,CAAE,SAAS,CACjBC,SAAS,CAAE,WAAW,CACtBC,UAAU,CAAE,aAAa,CACzBC,YAAY,CAAE,eAAe,CAC7BC,WAAW,CAAE,gBAAgB,CAC7BC,WAAW,CAAE,iBAAiB,CAC9BC,MAAM,CAAE,QAAQ,CAChBC,SAAS,CAAE,uCAAuC,CAClDC,SAAS,CAAE,mCAAmC,CAC9CC,WAAW,CAAE,iCAAiC,CAC9CC,WAAW,CAAE,iBAAiB,CAC9BC,YAAY,CAAE,CACZ,GAAG,CACH,KAAK,CACL,QAAQ,CACR,mBAAmB,CACnB,mBAAmB,CACnB,aAAa,CACb,iBAAiB,CACjB,iBAAiB,CACjB,SAAS,CACT,cAAc,CACd,WAAW,CACX,QAAQ,CACR,OAAO,CACR,CACDC,WAAW,CAAE,CACXC,GAAG,CAAE,KAAK,CACVC,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAE,aAAa,CACrBC,SAAS,CAAE,gBAAgB,CAC3BC,WAAW,CAAE,aAAa,CAC1BC,cAAc,CAAE,qBAAqB,CACrCC,QAAQ,CAAE,UAAU,CACpBC,WAAW,CAAE,aAAa,CAC1BC,WAAW,CAAE,kBAAkB,CAC/BC,cAAc,CAAE,qBAAqB,CACrCC,iBAAiB,CAAE,mBAAmB,CACtCC,iBAAiB,CAAE,mBAAmB,CACtCC,WAAW,CAAE,aAAa,CAC1BC,eAAe,CAAE,aAAa,CAC9BC,eAAe,CAAE,iBAAiB,CAClCC,eAAe,CAAE,iBAAiB,CAClCC,QAAQ,CAAE,SAAS,CACnBC,SAAS,CAAE,cAAc,CACzBC,SAAS,CAAE,WAAW,CACtBC,MAAM,CAAE,QAAQ,CAChBC,KAAK,CAAE,iBACT,CACF,CAAC,CACDC,EAAE,CAAE,CACF5C,KAAK,CAAE,eAAe,CACtBC,iBAAiB,CAAE,QAAQ,CAC3BC,WAAW,CAAE,gBAAgB,CAC7BC,cAAc,CAAE,yBAAyB,CACzCC,SAAS,CAAE,iBAAiB,CAC5BC,UAAU,CAAE,cAAc,CAC1BC,aAAa,CAAGC,IAAI,mGAAAC,MAAA,CAA2BD,IAAI,UAAG,CACtDE,IAAI,CAAE,KAAK,CACXC,MAAM,CAAE,OAAO,CACfC,SAAS,CAAE,SAAS,CACpBC,UAAU,CAAE,UAAU,CACtBC,YAAY,CAAE,SAAS,CACvBC,WAAW,CAAE,WAAW,CACxBC,WAAW,CAAE,iBAAiB,CAC9BC,MAAM,CAAE,MAAM,CACdC,SAAS,CAAE,6BAA6B,CACxCC,SAAS,CAAE,sBAAsB,CACjCC,WAAW,CAAE,sBAAsB,CACnCC,WAAW,CAAE,uBAAuB,CACpCC,YAAY,CAAE,CACZ,GAAG,CACH,OAAO,CACP,OAAO,CACP,eAAe,CACf,cAAc,CACd,YAAY,CACZ,eAAe,CACf,gBAAgB,CAChB,SAAS,CACT,QAAQ,CACR,MAAM,CACN,MAAM,CACN,QAAQ,CACT,CACDC,WAAW,CAAE,CACXC,GAAG,CAAE,OAAO,CACZC,MAAM,CAAE,OAAO,CACfC,MAAM,CAAE,kBAAkB,CAC1BC,SAAS,CAAE,kBAAkB,CAC7BC,WAAW,CAAE,UAAU,CACvBC,cAAc,CAAE,qBAAqB,CACrCC,QAAQ,CAAE,UAAU,CACpBC,WAAW,CAAE,UAAU,CACvBC,WAAW,CAAE,qBAAqB,CAClCC,cAAc,CAAE,qBAAqB,CACrCC,iBAAiB,CAAE,eAAe,CAClCC,iBAAiB,CAAE,cAAc,CACjCC,WAAW,CAAE,SAAS,CACtBC,eAAe,CAAE,YAAY,CAC7BC,eAAe,CAAE,eAAe,CAChCC,eAAe,CAAE,gBAAgB,CACjCC,QAAQ,CAAE,SAAS,CACnBC,SAAS,CAAE,QAAQ,CACnBC,SAAS,CAAE,MAAM,CACjBC,MAAM,CAAE,MAAM,CACdC,KAAK,CAAE,kBACT,CACF,CACF,CAAC,CAED,QAAS,CAAAE,cAAcA,CAACC,UAAU,CAAE,CAClC,GAAI,CAACA,UAAU,CAAE,MAAO,EAAE,CAC1B;AACA,GAAI,qBAAqB,CAACC,IAAI,CAACD,UAAU,CAAC,CAAE,CAC1C,KAAM,CAACE,IAAI,CAAEC,EAAE,CAAEC,EAAE,CAAC,CAAGJ,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC,CAC5C,SAAA3C,MAAA,CAAU0C,EAAE,MAAA1C,MAAA,CAAIyC,EAAE,MAAAzC,MAAA,CAAIwC,IAAI,EAC5B,CAAC,IAAM,IAAI,qBAAqB,CAACD,IAAI,CAACD,UAAU,CAAC,CAAE,CACjD,KAAM,CAACI,EAAE,CAAED,EAAE,CAAED,IAAI,CAAC,CAAGF,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC,CAC5C,SAAA3C,MAAA,CAAU0C,EAAE,MAAA1C,MAAA,CAAIyC,EAAE,MAAAzC,MAAA,CAAIwC,IAAI,EAC5B,CAAC,IAAM,IAAI,uBAAuB,CAACD,IAAI,CAACD,UAAU,CAAC,CAAE,CACnD,MAAO,CAAAA,UAAU,CACnB,CACA,MAAO,CAAAA,UAAU,CACnB,CAEA,QAAS,CAAAM,eAAeA,CAACN,UAAU,CAAE,CACnC,GAAI,CAACA,UAAU,CAAE,MAAO,EAAE,CAC1B;AACA,GAAI,CAAAI,EAAE,CAAED,EAAE,CAAED,IAAI,CAChB,GAAI,uBAAuB,CAACD,IAAI,CAACD,UAAU,CAAC,CAAE,CAC5C,CAACI,EAAE,CAAED,EAAE,CAAED,IAAI,CAAC,CAAGF,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC,CACxC,CAAC,IAAM,IAAI,qBAAqB,CAACJ,IAAI,CAACD,UAAU,CAAC,CAAE,CACjD,CAACI,EAAE,CAAED,EAAE,CAAED,IAAI,CAAC,CAAGF,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC,CACxC,CAAC,IAAM,IAAI,qBAAqB,CAACJ,IAAI,CAACD,UAAU,CAAC,CAAE,CACjD,MAAO,CAAAA,UAAU,CACnB,CACA,GAAIE,IAAI,EAAIC,EAAE,EAAIC,EAAE,CAAE,CACpB,SAAA1C,MAAA,CAAUwC,IAAI,MAAAxC,MAAA,CAAIyC,EAAE,MAAAzC,MAAA,CAAI0C,EAAE,EAC5B,CACA,MAAO,CAAAJ,UAAU,CACnB,CAEA,QAAS,CAAAO,QAAQA,CAACC,GAAG,CAAE,CACrB,MAAO,uBAAsB,CAACP,IAAI,CAACO,GAAG,CAAC,CACzC,CAEA,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAyE,IAAxE,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,KAAK,CAAEC,WAAW,CAAEC,aAAa,CAAEC,cAAe,CAAC,CAAAN,IAAA,CACvF;AACA,GAAI,CAACxC,MAAM,CAAE+C,SAAS,CAAC,CAAG3E,QAAQ,CAACyE,aAAa,EAAI,KAAK,CAAC,CAC1D,GAAI,CAACX,EAAE,CAAEc,KAAK,CAAC,CAAG5E,QAAQ,CAAC,EAAE,CAAC,CAC9B,GAAI,CAAC6D,EAAE,CAAEgB,KAAK,CAAC,CAAG7E,QAAQ,CAAC,EAAE,CAAC,CAC9B,GAAI,CAAC4D,IAAI,CAAEkB,OAAO,CAAC,CAAG9E,QAAQ,CAAC,EAAE,CAAC,CAElCD,SAAS,CAAC,IAAM,CACd,GAAI,CAAC6B,MAAM,EAAIyC,KAAK,CAAE,CACpB;AACA,KAAM,CAAAU,KAAK,CAAGV,KAAK,CAACU,KAAK,CAAC,mCAAmC,CAAC,CAC9D,GAAIA,KAAK,CAAE,CACTH,KAAK,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CACfF,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,CACfD,OAAO,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACnB,CAAC,IAAM,CACLH,KAAK,CAAC,EAAE,CAAC,CACTC,KAAK,CAAC,EAAE,CAAC,CACTC,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CAAC,IAAM,IAAIlD,MAAM,EAAIyC,KAAK,CAAE,CAC1B;AACA,KAAM,CAAAU,KAAK,CAAGV,KAAK,CAACU,KAAK,CAAC,yBAAyB,CAAC,CACpD,GAAIA,KAAK,CAAE,CACTH,KAAK,CAAC,IAAI,CAAC,CACXC,KAAK,CAAC,IAAI,CAAC,CACXC,OAAO,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACnB,CAAC,IAAM,CACLH,KAAK,CAAC,IAAI,CAAC,CACXC,KAAK,CAAC,IAAI,CAAC,CACXC,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CAAC,IAAM,CACLF,KAAK,CAAC,EAAE,CAAC,CACTC,KAAK,CAAC,EAAE,CAAC,CACTC,OAAO,CAAC,EAAE,CAAC,CACb,CACA;AACF,CAAC,CAAE,CAACT,KAAK,CAAEzC,MAAM,CAAC,CAAC,CAEnB,QAAS,CAAAoD,kBAAkBA,CAACC,CAAC,CAAE,CAC7B,KAAM,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CAACD,OAAO,CAChCP,SAAS,CAACO,OAAO,CAAC,CAClB,GAAIR,cAAc,CAAEA,cAAc,CAACQ,OAAO,CAAC,CAC3C,GAAIA,OAAO,CAAE,CACX;AACA,GAAItB,IAAI,CAAE,CACRU,QAAQ,UAAAlD,MAAA,CAAUwC,IAAI,CAAE,CAAC,CAC3B,CAAC,IAAM,CACLU,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,IAAM,CACL;AACAA,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAEA,QAAS,CAAAc,cAAcA,CAACH,CAAC,CAAE,CACzB,KAAM,CAAAI,CAAC,CAAGJ,CAAC,CAACE,MAAM,CAACd,KAAK,CAACiB,OAAO,CAAC,IAAI,CAAE,EAAE,CAAC,CAC1CV,KAAK,CAACS,CAAC,CAAC,CACR,GAAIA,CAAC,CAACE,MAAM,GAAK,CAAC,EAAI1B,EAAE,CAAC0B,MAAM,GAAK,CAAC,EAAI3B,IAAI,CAAC2B,MAAM,GAAK,CAAC,CAAE,CAC1DjB,QAAQ,IAAAlD,MAAA,CAAIiE,CAAC,MAAAjE,MAAA,CAAIyC,EAAE,MAAAzC,MAAA,CAAIwC,IAAI,CAAE,CAAC,CAChC,CAAC,IAAM,CACLU,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CACA,QAAS,CAAAkB,cAAcA,CAACP,CAAC,CAAE,CACzB,KAAM,CAAAI,CAAC,CAAGJ,CAAC,CAACE,MAAM,CAACd,KAAK,CAACiB,OAAO,CAAC,IAAI,CAAE,EAAE,CAAC,CAC1CT,KAAK,CAACQ,CAAC,CAAC,CACR,GAAIvB,EAAE,CAACyB,MAAM,GAAK,CAAC,EAAIF,CAAC,CAACE,MAAM,GAAK,CAAC,EAAI3B,IAAI,CAAC2B,MAAM,GAAK,CAAC,CAAE,CAC1DjB,QAAQ,IAAAlD,MAAA,CAAI0C,EAAE,MAAA1C,MAAA,CAAIiE,CAAC,MAAAjE,MAAA,CAAIwC,IAAI,CAAE,CAAC,CAChC,CAAC,IAAM,CACLU,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CACA,QAAS,CAAAmB,gBAAgBA,CAACR,CAAC,CAAE,CAC3B,KAAM,CAAAI,CAAC,CAAGJ,CAAC,CAACE,MAAM,CAACd,KAAK,CAACiB,OAAO,CAAC,IAAI,CAAE,EAAE,CAAC,CAC1CR,OAAO,CAACO,CAAC,CAAC,CACV,GAAIzD,MAAM,CAAE,CACV;AACA,GAAIyD,CAAC,CAACE,MAAM,GAAK,CAAC,CAAE,CAClBjB,QAAQ,UAAAlD,MAAA,CAAUiE,CAAC,CAAE,CAAC,CACxB,CAAC,IAAM,CACLf,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,IAAM,CACL;AACA,GAAIR,EAAE,CAACyB,MAAM,GAAK,CAAC,EAAI1B,EAAE,CAAC0B,MAAM,GAAK,CAAC,EAAIF,CAAC,CAACE,MAAM,GAAK,CAAC,CAAE,CACxDjB,QAAQ,IAAAlD,MAAA,CAAI0C,EAAE,MAAA1C,MAAA,CAAIyC,EAAE,MAAAzC,MAAA,CAAIiE,CAAC,CAAE,CAAC,CAC9B,CAAC,IAAM,CACLf,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CACF,CAEA,mBACElE,KAAA,QAAKsF,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAS,CAAE,CAAAC,QAAA,eACvDzF,KAAA,SAAAyF,QAAA,EACGtB,KAAK,cACNnE,KAAA,UAAOsF,KAAK,CAAE,CAAEI,UAAU,CAAE,EAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAAH,QAAA,eACtE3F,IAAA,UAAO+F,IAAI,CAAC,UAAU,CAACf,OAAO,CAAEtD,MAAO,CAAC0C,QAAQ,CAAEU,kBAAmB,CAAE,CAAC,CACvER,WAAW,EACP,CAAC,EACJ,CAAC,cACPpE,KAAA,QAAKsF,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEO,GAAG,CAAE,OAAO,CAAEC,SAAS,CAAE,CAAE,CAAE,CAAAN,QAAA,eAC1D3F,IAAA,UACE+F,IAAI,CAAC,MAAM,CACX5B,KAAK,CAAEP,EAAG,CACVQ,QAAQ,CAAEc,cAAe,CACzBgB,SAAS,CAAE,CAAE,CACbC,WAAW,CAAC,IAAI,CAChBC,QAAQ,CAAE1E,MAAO,CACjB8D,KAAK,CAAE,CAAEa,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,QAAS,CAAE,CAC3C,CAAC,cACFtG,IAAA,SAAMwF,KAAK,CAAE,CAAEK,QAAQ,CAAE,EAAE,CAAEU,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAAC,GAAC,CAAM,CAAC,cACtD3F,IAAA,UACE+F,IAAI,CAAC,MAAM,CACX5B,KAAK,CAAER,EAAG,CACVS,QAAQ,CAAEkB,cAAe,CACzBY,SAAS,CAAE,CAAE,CACbC,WAAW,CAAC,IAAI,CAChBC,QAAQ,CAAE1E,MAAO,CACjB8D,KAAK,CAAE,CAAEa,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,QAAS,CAAE,CAC3C,CAAC,cACFtG,IAAA,SAAMwF,KAAK,CAAE,CAAEK,QAAQ,CAAE,EAAE,CAAEU,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAAC,GAAC,CAAM,CAAC,cACtD3F,IAAA,UACE+F,IAAI,CAAC,MAAM,CACX5B,KAAK,CAAET,IAAK,CACZU,QAAQ,CAAEmB,gBAAiB,CAC3BW,SAAS,CAAE,CAAE,CACbC,WAAW,CAAC,MAAM,CAClBX,KAAK,CAAE,CAAEa,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,QAAS,CAAE,CAC3C,CAAC,EACC,CAAC,EACH,CAAC,CAEV,CAEA,QAAS,CAAAE,UAAUA,CAAAC,KAAA,CAAoB,IAAnB,CAAEC,MAAM,CAAG,IAAK,CAAC,CAAAD,KAAA,CACnC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAG9G,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC+G,aAAa,CAAEC,gBAAgB,CAAC,CAAGhH,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACiH,WAAW,CAAEC,cAAc,CAAC,CAAGlH,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACmH,SAAS,CAAEC,YAAY,CAAC,CAAGpH,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACqH,SAAS,CAAEC,YAAY,CAAC,CAAGtH,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACuH,UAAU,CAAEC,aAAa,CAAC,CAAGxH,QAAQ,CAAC,CAC3CyH,EAAE,CAAE,IAAI,CACRtF,GAAG,CAAE,EAAE,CACPC,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,EAAE,CACbC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAE,EAAE,CACrBC,WAAW,CAAE,YAAY,CACzBC,eAAe,CAAE,EAAE,CACnBC,eAAe,CAAE,EAAE,CACnBC,eAAe,CAAE,EAAE,CACnBC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,EACT,CAAC,CAAC,CACF,KAAM,CAACmE,QAAQ,CAAEC,WAAW,CAAC,CAAG3H,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAAC4H,UAAU,CAAEC,aAAa,CAAC,CAAG7H,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAC8H,SAAS,CAAEC,YAAY,CAAC,CAAG/H,QAAQ,CAAC,KAAK,CAAC,CACjD;AACA,KAAM,CAACgI,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjI,QAAQ,CAAC,CACvD6C,iBAAiB,CAAE,KAAK,CACxBI,eAAe,CAAE,KAAK,CACtBC,eAAe,CAAE,KACnB,CAAC,CAAC,CAEF,KAAM,CAAAgF,KAAK,CAAGtB,MAAM,GAAK,IAAI,CAC7B,KAAM,CAAAuB,gBAAgB,CAAGD,KAAK,CAC1B,CAAC,GAAGxH,YAAY,CAACkG,MAAM,CAAC,CAAC3E,YAAY,CAAC,CAACmG,OAAO,CAAC,CAAC,CAChD1H,YAAY,CAACkG,MAAM,CAAC,CAAC3E,YAAY,CACrC,KAAM,CAAAoG,gBAAgB,CAAGH,KAAK,CAC1B,CAAC,GAAG3H,YAAY,CAAC,CAAC6H,OAAO,CAAC,CAAC,CAC3B,CAAC,GAAG7H,YAAY,CAAC,CACrB,KAAM,CAAA+H,cAAc,CAAGJ,KAAK,CACxB,CAAEK,SAAS,CAAE,KAAM,CAAC,CACpB,CAAEA,SAAS,CAAE,KAAM,CAAC,CACxB,KAAM,CAAAC,UAAU,CAAGN,KAAK,CAAAO,aAAA,CAAAA,aAAA,IACfC,MAAM,CAACC,KAAK,MAAEJ,SAAS,CAAE,KAAK,GACnCG,MAAM,CAACC,KAAK,CAEhB,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/Bb,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAc,MAAM,CAAG,KAAM,CAAAC,MAAM,CAACC,SAAS,CAACC,GAAG,CAACC,WAAW,CAAC,CAAC,CACvDnC,UAAU,CAAC+B,MAAM,EAAI,EAAE,CAAC,CAC1B,CAAE,MAAOK,GAAG,CAAE,CACZpC,UAAU,CAAC,EAAE,CAAC,CAChB,CACAiB,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAEDhI,SAAS,CAAC,IAAM,CACd6I,YAAY,CAAC,CAAC,CACd;AACF,CAAC,CAAE,CAAChC,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAuC,eAAe,CAAGtC,OAAO,CAACuC,MAAM,CAAEC,CAAC,EAAK,CAC5C,KAAM,CAAAC,CAAC,CAAGrC,WAAW,CAACsC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC1C,GAAI,CAACF,CAAC,CAAE,MAAO,KAAI,CACnB,MACE,CAACD,CAAC,CAAClH,GAAG,EAAI,EAAE,EAAEqH,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EACvC,CAACD,CAAC,CAACjH,MAAM,EAAI,EAAE,EAAEoH,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EAC1C,CAACD,CAAC,CAACxG,iBAAiB,EAAI,EAAE,EAAE2G,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EACrD,CAACD,CAAC,CAACvG,iBAAiB,EAAI,EAAE,EAAE0G,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EACrD,CAACD,CAAC,CAACtG,WAAW,EAAI,EAAE,EAAEyG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EAC/C,CAACD,CAAC,CAACrG,eAAe,EAAI,EAAE,EAAE0G,QAAQ,CAAC,CAAC,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,EAC9D,CAACD,CAAC,CAACjG,SAAS,EAAI,EAAE,EAAEoG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,CAAC,CAAC,CAEjD,CAAC,CAAC,CAEF,KAAM,CAAAK,SAAS,CAAG,CAChBlC,EAAE,CAAE,IAAI,CACRtF,GAAG,CAAE,EAAE,CACPC,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,EAAE,CACbC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAE,EAAE,CACrBC,WAAW,CAAE,YAAY,CACzBC,eAAe,CAAE,EAAE,CACnBC,eAAe,CAAE,EAAE,CACnBC,eAAe,CAAE,EAAE,CACnBC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,EACT,CAAC,CAED,KAAM,CAAAqG,aAAa,CAAGA,CAAA,GAAM,CAC1BtC,YAAY,CAAC,KAAK,CAAC,CACnBE,aAAa,CAAAiB,aAAA,IAAMkB,SAAS,CAAE,CAAC,CAC/B1B,mBAAmB,CAAC,CAClBpF,iBAAiB,CAAE,KAAK,CACxBI,eAAe,CAAE,KAAK,CACtBC,eAAe,CAAE,KACnB,CAAC,CAAC,CACFyE,WAAW,CAAC,CAAC,CAAC,CAAC,CACfP,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAyC,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI9C,aAAa,GAAK,IAAI,EAAIoC,eAAe,CAACpC,aAAa,CAAC,CAAE,CAC5DO,YAAY,CAAC,MAAM,CAAC,CACpBE,aAAa,CAAAiB,aAAA,CAAAA,aAAA,IACRU,eAAe,CAACpC,aAAa,CAAC,MACjClE,iBAAiB,CAAEY,cAAc,CAAC0F,eAAe,CAACpC,aAAa,CAAC,CAAClE,iBAAiB,CAAC,CACnFI,eAAe,CAAEQ,cAAc,CAAC0F,eAAe,CAACpC,aAAa,CAAC,CAAC9D,eAAe,CAAC,CAC/EC,eAAe,CAAEO,cAAc,CAAC0F,eAAe,CAACpC,aAAa,CAAC,CAAC7D,eAAe,CAAC,EAChF,CAAC,CACF+E,mBAAmB,CAAC,CAClBpF,iBAAiB,CAAE,uBAAuB,CAACc,IAAI,CAACwF,eAAe,CAACpC,aAAa,CAAC,CAAClE,iBAAiB,CAAC,CACjGI,eAAe,CAAE,uBAAuB,CAACU,IAAI,CAACwF,eAAe,CAACpC,aAAa,CAAC,CAAC9D,eAAe,CAAC,CAC7FC,eAAe,CAAE,uBAAuB,CAACS,IAAI,CAACwF,eAAe,CAACpC,aAAa,CAAC,CAAC7D,eAAe,CAC9F,CAAC,CAAC,CACFyE,WAAW,CAAC,CAAC,CAAC,CAAC,CACfP,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,IAAM,CACL0C,KAAK,CAACpJ,YAAY,CAACkG,MAAM,CAAC,CAAC7F,cAAc,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAgJ,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAIhD,aAAa,GAAK,IAAI,EAAI,CAACoC,eAAe,CAACpC,aAAa,CAAC,CAAE,CAC7D+C,KAAK,CAACpJ,YAAY,CAACkG,MAAM,CAAC,CAAC7F,cAAc,CAAC,CAC1C,OACF,CACA,GAAI6G,UAAU,CAAE,OAChB,KAAM,CAAAoC,QAAQ,CAAGb,eAAe,CAACpC,aAAa,CAAC,CAACU,EAAE,CAClD,KAAM,CAAAwC,UAAU,CACdd,eAAe,CAACpC,aAAa,CAAC,CAAC5E,GAAG,EAClCgH,eAAe,CAACpC,aAAa,CAAC,CAAC3E,MAAM,EACrC+G,eAAe,CAACpC,aAAa,CAAC,CAAC/D,eAAe,EAC9C,EAAE,CACJ,KAAM,CAAA9B,aAAa,CAAG4H,MAAM,CAACoB,OAAO,CAClCxJ,YAAY,CAACkG,MAAM,CAAC,CAAC1F,aAAa,CAAC+I,UAAU,CAC/C,CAAC,CACD,GAAI,CAAC/I,aAAa,CAAE,OACpB,GAAI,CACF2G,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAAiB,MAAM,CAACC,SAAS,CAACC,GAAG,CAACmB,aAAa,CAACH,QAAQ,CAAC,CAClDhD,gBAAgB,CAAC,IAAI,CAAC,CACtB4B,YAAY,CAAC,CAAC,CAChB,CAAE,MAAOM,GAAG,CAAE,CACZY,KAAK,CAACpJ,YAAY,CAACkG,MAAM,CAAC,CAAC7E,WAAW,CAAC,CACzC,CAAC,OAAS,CACR8F,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAuC,gBAAgB,CAAGA,CAAA,GAAM,CAC7BhD,YAAY,CAAC,KAAK,CAAC,CACnBO,WAAW,CAAC,CAAC,CAAC,CAAC,CACfH,aAAa,CAAAiB,aAAA,IAAMkB,SAAS,CAAE,CAAC,CAC/B1B,mBAAmB,CAAC,CAClBpF,iBAAiB,CAAE,KAAK,CACxBI,eAAe,CAAE,KAAK,CACtBC,eAAe,CAAE,KACnB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAmH,aAAa,CAAGA,CAACC,KAAK,CAAEjG,KAAK,GAAK,CACtC,GAAI,CAAA6E,GAAG,CAAG,EAAE,CACZ,GAAI7E,KAAK,EAAI,CAACJ,QAAQ,CAACI,KAAK,CAAC,CAAE,CAC7B6E,GAAG,CAAGxI,YAAY,CAACkG,MAAM,CAAC,CAAC5E,WAAW,CACxC,CACAwF,aAAa,CAAE+C,IAAI,EAAA9B,aAAA,CAAAA,aAAA,IAAW8B,IAAI,MAAE,CAACD,KAAK,EAAGjG,KAAK,EAAG,CAAC,CACtDsD,WAAW,CAAE4C,IAAI,EAAA9B,aAAA,CAAAA,aAAA,IAAW8B,IAAI,MAAE,CAACD,KAAK,EAAGpB,GAAG,EAAG,CAAC,CACpD,CAAC,CAED,KAAM,CAAAsB,gBAAgB,CAAG,KAAO,CAAAvF,CAAC,EAAK,CACpCA,CAAC,CAACwF,cAAc,CAAC,CAAC,CAClB;AACA,GAAI,CAAAC,SAAS,CAAG,CAAC,CAAC,CAClB,IAAK,KAAM,CAAAC,CAAC,GAAI,CAAAC,MAAM,CAACC,IAAI,CAACtD,UAAU,CAAC,CAAE,CACvC,GAAIoD,CAAC,CAACG,QAAQ,CAAC,KAAK,CAAC,EAAIvD,UAAU,CAACoD,CAAC,CAAC,EAAI,CAAC1G,QAAQ,CAACsD,UAAU,CAACoD,CAAC,CAAC,CAAC,CAAE,CAClED,SAAS,CAACC,CAAC,CAAC,CAAGjK,YAAY,CAACkG,MAAM,CAAC,CAAC5E,WAAW,CACjD,CACF,CACA2F,WAAW,CAAC+C,SAAS,CAAC,CACtB,GAAIE,MAAM,CAACG,MAAM,CAACL,SAAS,CAAC,CAACM,IAAI,CAACC,OAAO,CAAC,CAAE,OAE5C,GAAI,CACF,KAAM,CAAAC,OAAO,CAAAzC,aAAA,CAAAA,aAAA,IACRlB,UAAU,MACb1E,iBAAiB,CAAEmB,eAAe,CAACuD,UAAU,CAAC1E,iBAAiB,CAAC,CAChEI,eAAe,CAAEe,eAAe,CAACuD,UAAU,CAACtE,eAAe,CAAC,CAC5DC,eAAe,CAAEc,eAAe,CAACuD,UAAU,CAACrE,eAAe,CAAC,EAC7D,CACD,GAAImE,SAAS,GAAK,KAAK,CAAE,CACvB,KAAM,CAAAyB,MAAM,CAACC,SAAS,CAACC,GAAG,CAACmC,UAAU,CAACD,OAAO,CAAC,CAChD,CAAC,IAAM,CACL,KAAM,CAAApC,MAAM,CAACC,SAAS,CAACC,GAAG,CAACoC,aAAa,CAACF,OAAO,CAAC,CACnD,CACAd,gBAAgB,CAAC,CAAC,CAClBxB,YAAY,CAAC,CAAC,CAChB,CAAE,MAAOM,GAAG,CAAE,CACZY,KAAK,CAACpJ,YAAY,CAACkG,MAAM,CAAC,CAAC9E,SAAS,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAuJ,iBAAiB,CAAIC,IAAI,EAAK,CAClC,GAAI,CAACA,IAAI,CAAE,CACT9D,aAAa,CAAE+D,CAAC,EAAA9C,aAAA,CAAAA,aAAA,IAAW8C,CAAC,MAAEhI,KAAK,CAAE,EAAE,EAAG,CAAC,CAC3C,OACF,CACA,KAAM,CAAAiI,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,MAAM,CAAG,IAAM,CACpBlE,aAAa,CAAE+D,CAAC,EAAA9C,aAAA,CAAAA,aAAA,IAAW8C,CAAC,MAAEhI,KAAK,CAAEiI,MAAM,CAAC3C,MAAM,EAAG,CAAC,CACxD,CAAC,CACD2C,MAAM,CAACG,aAAa,CAACL,IAAI,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAM,QAAQ,CAAIC,GAAG,EAAK,CACxB,GAAI,CAACA,GAAG,CAAE,MAAO,KAAI,CACrB,GAAI,MAAO,CAAAA,GAAG,GAAK,QAAQ,CAAE,MAAO,KAAI,CACxC,GAAIA,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,CAAE,MAAO,CAAAD,GAAG,CACvC,+BAAAzK,MAAA,CAAgCyK,GAAG,EACrC,CAAC,CAED,KAAM,CAAAE,mBAAmB,CAAG,CAC1BC,SAAS,CAAE,MAAM,CACjBC,SAAS,CAAE,MAAM,CACjBC,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAChB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,CACnBC,MAAM,CAAE,WAAW,CACnBH,MAAM,CAAE,gBAAgB,CACxBI,SAAS,CAAE,mBAAmB,CAC9BH,YAAY,CAAE,KAAK,CACnB5F,KAAK,CAAE,EAAE,CACTgG,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,yBACb,CAAC,CAED,GAAI,MAAO,CAAAC,QAAQ,GAAK,WAAW,EAAI,CAACA,QAAQ,CAACC,cAAc,CAAC,sBAAsB,CAAC,CAAE,CACvF,KAAM,CAAAhH,KAAK,CAAG+G,QAAQ,CAACE,aAAa,CAAC,OAAO,CAAC,CAC7CjH,KAAK,CAAC+B,EAAE,CAAG,sBAAsB,CACjC/B,KAAK,CAACkH,SAAS,0zCAuCd,CACDH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACpH,KAAK,CAAC,CAClC,CAEA,QAAS,CAAAqH,eAAeA,CAACC,MAAM,CAAE1C,KAAK,CAAE,KAAA2C,aAAA,CACtC,GAAI3C,KAAK,GAAK,OAAO,CAAE,CACrB,KAAM,CAAA4C,GAAG,CAAGtB,QAAQ,CAACoB,MAAM,CAAC1C,KAAK,CAAC,CAAC,CACnC,mBACEpK,IAAA,OAEEwF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IACAC,MAAM,CAACyE,SAAS,MACnBC,OAAO,CAAE,CAAC,CACV5G,SAAS,CAAE,QAAQ,CACnB6G,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZ/G,KAAK,CAAE,EAAE,CACTgH,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,MAAM,EAClB,CAAA3H,QAAA,CAEDqH,GAAG,cACFhN,IAAA,QACEgN,GAAG,CAAEA,GAAI,CACTO,GAAG,CAAC,OAAO,CACX/H,KAAK,CAAE,CACLa,KAAK,CAAE,EAAE,CACTgG,MAAM,CAAE,EAAE,CACVmB,SAAS,CAAE,OAAO,CAClBvB,YAAY,CAAE,CAAC,CACfxG,OAAO,CAAE,OAAO,CAChB0G,MAAM,CAAE,QACV,CAAE,CACH,CAAC,CAEF,GACD,KAAAjL,MAAA,CA3BO4L,MAAM,CAACvF,EAAE,MAAArG,MAAA,CAAIkJ,KAAK,CA4BxB,CAAC,CAET,CACA,GACEA,KAAK,GAAK,mBAAmB,EAC7BA,KAAK,GAAK,iBAAiB,EAC3BA,KAAK,GAAK,iBAAiB,CAC3B,CACA,mBACEpK,IAAA,OAAkCwF,KAAK,CAAEgD,MAAM,CAACyE,SAAU,CAAAtH,QAAA,CACvDpC,cAAc,CAACuJ,MAAM,CAAC1C,KAAK,CAAC,CAAC,KAAAlJ,MAAA,CADpB4L,MAAM,CAACvF,EAAE,MAAArG,MAAA,CAAIkJ,KAAK,CAE1B,CAAC,CAET,CACA,mBACEpK,IAAA,OAAkCwF,KAAK,CAAEgD,MAAM,CAACyE,SAAU,CAAAtH,QAAA,EAAAoH,aAAA,CACvDD,MAAM,CAAC1C,KAAK,CAAC,UAAA2C,aAAA,UAAAA,aAAA,CAAI,GAAG,KAAA7L,MAAA,CADX4L,MAAM,CAACvF,EAAE,MAAArG,MAAA,CAAIkJ,KAAK,CAE1B,CAAC,CAET,CAEA;AACA,KAAM,CAAAqD,SAAS,CAAG,CAChB,CAAC,KAAK,CAAE,QAAQ,CAAE,QAAQ,CAAE,WAAW,CAAC,CACxC,CAAC,aAAa,CAAE,gBAAgB,CAAE,UAAU,CAAE,aAAa,CAAC,CAC5D,CAAC,aAAa,CAAE,gBAAgB,CAAE,mBAAmB,CAAE,mBAAmB,CAAC,CAC3E,CAAC,aAAa,CAAE,iBAAiB,CAAE,iBAAiB,CAAE,iBAAiB,CAAC,CACxE,CAAC,UAAU,CAAE,WAAW,CACxB;AAAA,CACD,CAED;AACA,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B9E,MAAM,CAAC+E,KAAK,CAAC,CAAC,CAChB,CAAC,CAED;AACA,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAI/G,aAAa,GAAK,IAAI,EAAI,CAACoC,eAAe,CAACpC,aAAa,CAAC,CAAE,CAC7D+C,KAAK,CAACpJ,YAAY,CAACkG,MAAM,CAAC,CAAC7F,cAAc,CAAC,CAC1C,OACF,CACA+I,KAAK,CACH,CAAClD,MAAM,GAAK,IAAI,CACZ,qBAAqB,CACrB,kBAAkB,EACpBmH,IAAI,CAACC,SAAS,CAAC7E,eAAe,CAACpC,aAAa,CAAC,CAAE,IAAI,CAAE,CAAC,CAC1D,CAAC,CACH,CAAC,CAED,mBACE3G,KAAA,QAAKsF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IAAOC,MAAM,CAACuF,aAAa,EAAK3F,cAAc,CAAG,CAAAzC,QAAA,eACzD3F,IAAA,OAAIwF,KAAK,CAAE,CAAEc,SAAS,CAAE,QAAS,CAAE,CAAAX,QAAA,CAAEnF,YAAY,CAACkG,MAAM,CAAC,CAAChG,KAAK,CAAK,CAAC,cAErER,KAAA,QAAKsF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IAAOC,MAAM,CAACwF,eAAe,MAAEtI,aAAa,CAAEsC,KAAK,CAAG,aAAa,CAAG,KAAK,EAAG,CAAArC,QAAA,eACtF3F,IAAA,SAAMwF,KAAK,CAAEgD,MAAM,CAACyF,UAAW,CAAAtI,QAAA,CAAC,cAAE,CAAM,CAAC,cACzC3F,IAAA,UACE+F,IAAI,CAAC,MAAM,CACXI,WAAW,CAAE3F,YAAY,CAACkG,MAAM,CAAC,CAAC/F,iBAAkB,CACpDwD,KAAK,CAAE4C,WAAY,CACnB3C,QAAQ,CAAGW,CAAC,EAAK,CACfiC,cAAc,CAACjC,CAAC,CAACE,MAAM,CAACd,KAAK,CAAC,CAC9B2C,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAE,CACFtB,KAAK,CAAEgD,MAAM,CAAC0F,WAAY,CAC3B,CAAC,cACFhO,KAAA,SAAMsF,KAAK,CAAE,CACXI,UAAU,CAAEoC,KAAK,CAAG,CAAC,CAAG,QAAQ,CAChCmG,WAAW,CAAEnG,KAAK,CAAG,QAAQ,CAAG,CAAC,CACjCoG,UAAU,CAAE,MAAM,CAClBvI,QAAQ,CAAE,SAAS,CACnBU,KAAK,CAAE,SAAS,CAChB4G,QAAQ,CAAE,EACZ,CAAE,CAAAxH,QAAA,EACCnF,YAAY,CAACkG,MAAM,CAAC,CAAC9F,WAAW,CAAC,KAAG,CAACqI,eAAe,CAAC5D,MAAM,EACxD,CAAC,EACJ,CAAC,CACLuC,SAAS,cACR5H,IAAA,QAAKwF,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAE4I,cAAc,CAAE,QAAS,CAAE,CAAA1I,QAAA,cACxD3F,IAAA,QAAKwF,KAAK,CAAE0G,YAAa,CAAM,CAAC,CAC7B,CAAC,cAENlM,IAAA,QAAKwF,KAAK,CAAEqG,mBAAoB,CAAAlG,QAAA,cAC9BzF,KAAA,UAAOsF,KAAK,CAAE8C,UAAW,CAAA3C,QAAA,eACvB3F,IAAA,UAAA2F,QAAA,cACE3F,IAAA,OAAIwF,KAAK,CAAEgD,MAAM,CAAC8F,cAAe,CAAA3I,QAAA,CAC9BqC,KAAK,CACF,CAAC,GAAGC,gBAAgB,CAAC,CAACC,OAAO,CAAC,CAAC,CAACqG,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBACvCzO,IAAA,OAEEwF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACAC,MAAM,CAACkG,WAAW,EACjBF,CAAC,GAAK,GAAG,CAAG,CAAEnI,KAAK,CAAE,EAAE,CAAE8G,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAG,CAAC,CAAC,EAC1DoB,CAAC,GAAK,OAAO,EAAIA,CAAC,GAAK,QAAQ,CAAG,CAAErB,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAE/G,KAAK,CAAE,EAAG,CAAC,CAAG,CAAC,CAAC,CACpF,CACFsI,SAAS,CAAC,mBAAmB,CAAAhJ,QAAA,CAE5B6I,CAAC,EARGC,CASH,CACL,CAAC,CACFxG,gBAAgB,CAACsG,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBACxBzO,IAAA,OAEEwF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACAC,MAAM,CAACkG,WAAW,EACjBF,CAAC,GAAK,GAAG,CAAG,CAAEnI,KAAK,CAAE,EAAE,CAAE8G,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAG,CAAC,CAAC,EAC1DoB,CAAC,GAAK,OAAO,EAAIA,CAAC,GAAK,QAAQ,CAAG,CAAErB,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAE/G,KAAK,CAAE,EAAG,CAAC,CAAG,CAAC,CAAC,CACpF,CACFsI,SAAS,CAAC,mBAAmB,CAAAhJ,QAAA,CAE5B6I,CAAC,EARGC,CASH,CACL,CAAC,CACJ,CAAC,CACA,CAAC,cACRvO,KAAA,UAAAyF,QAAA,EACGsD,eAAe,CAACsF,GAAG,CAAC,CAACzB,MAAM,CAAE8B,GAAG,gBAC/B5O,IAAA,OAEEwF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IACAC,MAAM,CAACqG,QAAQ,MAClBvB,UAAU,CACRsB,GAAG,GAAK/H,aAAa,CACjB,SAAS,CACT+H,GAAG,CAAG,CAAC,GAAK,CAAC,CACb,MAAM,CACN,SAAS,EACf,CACFE,OAAO,CAAEA,CAAA,GAAMhI,gBAAgB,CAAC8H,GAAG,CAAE,CAAAjJ,QAAA,CAEpCqC,KAAK,cACJ9H,KAAA,CAAAE,SAAA,EAAAuF,QAAA,eACE3F,IAAA,OAAIwF,KAAK,CAAEgD,MAAM,CAACyE,SAAU,CAAAtH,QAAA,CAAEiJ,GAAG,CAAG,CAAC,CAAK,CAAC,CAC1C,CAAC,GAAGzG,gBAAgB,CAAC,CAACD,OAAO,CAAC,CAAC,CAACqG,GAAG,CAACnE,KAAK,EAAIyC,eAAe,CAACC,MAAM,CAAE1C,KAAK,CAAC,CAAC,EAC7E,CAAC,cAEHlK,KAAA,CAAAE,SAAA,EAAAuF,QAAA,eACE3F,IAAA,OAAIwF,KAAK,CAAEgD,MAAM,CAACyE,SAAU,CAAAtH,QAAA,CAAEiJ,GAAG,CAAG,CAAC,CAAK,CAAC,CAC1CzG,gBAAgB,CAACoG,GAAG,CAACnE,KAAK,EAAIyC,eAAe,CAACC,MAAM,CAAE1C,KAAK,CAAC,CAAC,EAC9D,CACH,EAtBI0C,MAAM,CAACvF,EAAE,EAAKuF,MAAM,CAAC7K,GAAG,CAAG2M,GAuB9B,CACL,CAAC,CACD3F,eAAe,CAAC5D,MAAM,GAAK,CAAC,EAAI,CAACuC,SAAS,eACzC5H,IAAA,OAAA2F,QAAA,cACE3F,IAAA,OAAI+O,OAAO,CAAE9G,gBAAgB,CAAC5C,MAAO,CAACG,KAAK,CAAE,CAAE0H,OAAO,CAAE,MAAM,CAAE5G,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAClGnF,YAAY,CAACkG,MAAM,CAAC,CAAC/E,SAAS,CAC7B,CAAC,CACH,CACL,EACI,CAAC,EACH,CAAC,CACL,CACN,cAEDzB,KAAA,QAAKsF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IACLC,MAAM,CAACwG,MAAM,MAChBC,IAAI,CAAEjH,KAAK,CAAG,OAAO,CAAG,EAAE,CAC1BkH,KAAK,CAAElH,KAAK,CAAG,EAAE,CAAG,OAAO,CAC3BmH,SAAS,CAAE,MAAM,CACjBd,cAAc,CAAE,YAAY,EAC5B,CAAA1I,QAAA,eACA3F,IAAA,WAAQwF,KAAK,CAAEgD,MAAM,CAAC4G,YAAa,CAACN,OAAO,CAAEpF,aAAc,CAAA/D,QAAA,CACxDnF,YAAY,CAACkG,MAAM,CAAC,CAACrF,SAAS,CACzB,CAAC,cACTrB,IAAA,WAAQwF,KAAK,CAAEgD,MAAM,CAAC4G,YAAa,CAACN,OAAO,CAAEnF,cAAe,CAAAhE,QAAA,CACzDnF,YAAY,CAACkG,MAAM,CAAC,CAACpF,UAAU,CAC1B,CAAC,cACTtB,IAAA,WAAQwF,KAAK,CAAEgD,MAAM,CAAC4G,YAAa,CAACN,OAAO,CAAEjF,eAAgB,CAAAlE,QAAA,CAC1DnF,YAAY,CAACkG,MAAM,CAAC,CAACnF,YAAY,CAC5B,CAAC,EACN,CAAC,cAENvB,IAAA,WACE+F,IAAI,CAAC,QAAQ,CACb4I,SAAS,CAAC,eAAe,CACzBnJ,KAAK,CAAEwC,KAAK,CAAG,CAAEiH,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAAG,CAAC,CAAE,CACtDJ,OAAO,CAAElB,iBAAkB,CAAAjI,QAAA,CAE1BnF,YAAY,CAACkG,MAAM,CAAC,CAACjF,WAAW,CAC3B,CAAC,cAETzB,IAAA,WACE+F,IAAI,CAAC,QAAQ,CACb4I,SAAS,CAAC,oBAAoB,CAC9BnJ,KAAK,CAAEwC,KAAK,CAAG,CAAEiH,IAAI,CAAE,MAAM,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAAG,CAAC,CAAE,CACrDJ,OAAO,CAAEpB,gBAAiB,CAAA/H,QAAA,CAEzBnF,YAAY,CAACkG,MAAM,CAAC,CAAClF,WAAW,CAC3B,CAAC,CAERyF,SAAS,eACRjH,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAAC6G,YAAa,CAAA1J,QAAA,cAC9BzF,KAAA,QAAKsF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IAAOC,MAAM,CAAC8G,YAAY,EAAMtH,KAAK,CAAG,CAAEK,SAAS,CAAE,KAAK,CAAE/B,SAAS,CAAE,OAAQ,CAAC,CAAG,CAAC,CAAC,CAAI,CAAAX,QAAA,eACjG3F,IAAA,OAAA2F,QAAA,CACGwB,SAAS,GAAK,KAAK,CAChB3G,YAAY,CAACkG,MAAM,CAAC,CAAC5F,SAAS,CAC9BN,YAAY,CAACkG,MAAM,CAAC,CAAC3F,UAAU,CACjC,CAAC,cACLb,KAAA,SAAMqP,QAAQ,CAAEjF,gBAAiB,CAAC9E,KAAK,CAAEgD,MAAM,CAACgH,SAAU,CAAA7J,QAAA,EACvD8H,SAAS,CAACc,GAAG,CAAC,CAACkB,GAAG,CAAEC,MAAM,gBACzBxP,KAAA,QAAKsF,KAAK,CAAEgD,MAAM,CAACmH,SAAU,CAAAhK,QAAA,EAC1B8J,GAAG,CAAClB,GAAG,CAAC,CAACnE,KAAK,CAAEqE,CAAC,GAAK,CACrB;AACA,GAAItH,SAAS,GAAK,KAAK,EAAIiD,KAAK,GAAK,WAAW,CAAE,MAAO,KAAI,CAC7D,GAAIjD,SAAS,GAAK,MAAM,GAAKiD,KAAK,GAAK,WAAW,EAAIA,KAAK,GAAK,QAAQ,CAAC,CAAE,MAAO,KAAI,CACtF;AACA,GACEA,KAAK,GAAK,mBAAmB,EAC7BA,KAAK,GAAK,iBAAiB,EAC3BA,KAAK,GAAK,iBAAiB,CAC3B,CACA,mBACEpK,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,CAAAjK,QAAA,cAC5B3F,IAAA,CAACiE,SAAS,EACRE,KAAK,CAAEkD,UAAU,CAAC+C,KAAK,CAAC,EAAI,EAAG,CAC/BhG,QAAQ,CAAEe,CAAC,EACTmC,aAAa,CAAE+C,IAAI,EAAA9B,aAAA,CAAAA,aAAA,IACd8B,IAAI,MACP,CAACD,KAAK,EAAGjF,CAAC,EACV,CACH,CACDd,KAAK,CAAE7D,YAAY,CAACkG,MAAM,CAAC,CAAC1E,WAAW,CAACoI,KAAK,CAAE,CAC/C9F,WAAW,CAAE9D,YAAY,CAACkG,MAAM,CAAC,CAAChF,MAAO,CACzC6C,aAAa,CAAEuD,gBAAgB,CAACsC,KAAK,CAAE,CACvC5F,cAAc,CAAEQ,OAAO,EACrB+C,mBAAmB,CAAEsC,IAAI,EAAA9B,aAAA,CAAAA,aAAA,IACpB8B,IAAI,MACP,CAACD,KAAK,EAAGpF,OAAO,EAChB,CACH,CACF,CAAC,EAlBgCyJ,CAmB/B,CAAC,CAEV,CACA,mBACEzO,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,CAAAjK,QAAA,cAC5BzF,KAAA,UAAOsF,KAAK,CAAEgD,MAAM,CAACqH,UAAW,CAAAlK,QAAA,EAC7BnF,YAAY,CAACkG,MAAM,CAAC,CAAC1E,WAAW,CAACoI,KAAK,CAAC,CAAC,GACzC,CAACA,KAAK,GAAK,aAAa,cACtBpK,IAAA,WACEmE,KAAK,CAAEkD,UAAU,CAACxE,WAAY,CAC9BuB,QAAQ,CAAEW,CAAC,EACTuC,aAAa,CAAAiB,aAAA,CAAAA,aAAA,IAAMlB,UAAU,MAAExE,WAAW,CAAEkC,CAAC,CAACE,MAAM,CAACd,KAAK,EAAE,CAC7D,CACDqB,KAAK,CAAEgD,MAAM,CAACsH,UAAW,CAAAnK,QAAA,CAExBpF,aAAa,CAACgO,GAAG,CAACwB,GAAG,eACpB/P,IAAA,WAAQmE,KAAK,CAAE4L,GAAI,CAAApK,QAAA,CAAYoK,GAAG,EAATA,GAAkB,CAC5C,CAAC,CACI,CAAC,CACP3F,KAAK,CAACQ,QAAQ,CAAC,KAAK,CAAC,cACvB1K,KAAA,CAAAE,SAAA,EAAAuF,QAAA,eACE3F,IAAA,UACE+F,IAAI,CAAC,MAAM,CACX5B,KAAK,CAAEkD,UAAU,CAAC+C,KAAK,CAAC,EAAI,EAAG,CAC/BhG,QAAQ,CAAEW,CAAC,EAAIoF,aAAa,CAACC,KAAK,CAAErF,CAAC,CAACE,MAAM,CAACd,KAAK,CAAE,CACpDqB,KAAK,CAAEgD,MAAM,CAACsH,UAAW,CACzBE,GAAG,CAAC,KAAK,CACTC,IAAI,CAAC,IAAI,CACTC,OAAO,CAAC,uBAAoB,CAC5BxP,KAAK,CAAEF,YAAY,CAACkG,MAAM,CAAC,CAAC5E,WAAY,CACxCqE,WAAW,CAAC,KAAK,CAClB,CAAC,CACDqB,QAAQ,CAAC4C,KAAK,CAAC,eACdpK,IAAA,SAAMwF,KAAK,CAAEgD,MAAM,CAAC2H,OAAQ,CAAAxK,QAAA,CAAE6B,QAAQ,CAAC4C,KAAK,CAAC,CAAO,CACrD,EACD,CAAC,cAEHpK,IAAA,UACE+F,IAAI,CAAC,MAAM,CACX5B,KAAK,CAAEkD,UAAU,CAAC+C,KAAK,CAAC,EAAI,EAAG,CAC/BhG,QAAQ,CAAEW,CAAC,EACTuC,aAAa,CAAAiB,aAAA,CAAAA,aAAA,IAAMlB,UAAU,MAAE,CAAC+C,KAAK,EAAGrF,CAAC,CAACE,MAAM,CAACd,KAAK,EAAE,CACzD,CACDqB,KAAK,CAAEgD,MAAM,CAACsH,UAAW,CACzBM,QAAQ,CACN,CAAC,KAAK,CAAE,QAAQ,CAAE,iBAAiB,CAAC,CAAC7G,QAAQ,CAACa,KAAK,CACpD,CACF,CACF,EACI,CAAC,EA7C0BqE,CA8C/B,CAAC,CAEV,CAAC,CAAC,CACDgB,GAAG,CAACpK,MAAM,CAAG,CAAC,EACb,CAAC,GAAGgL,KAAK,CAAC,CAAC,CAAGZ,GAAG,CAACpK,MAAM,CAAC,CAAC,CAACkJ,GAAG,CAAC,CAAC+B,CAAC,CAAE1B,GAAG,gBACpC5O,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,EAAM,OAAO,CAAGhB,GAAU,CACzD,CAAC,GAvF6Bc,MAwF9B,CACN,CAAC,cACFxP,KAAA,QAAKsF,KAAK,CAAEgD,MAAM,CAACmH,SAAU,CAAAhK,QAAA,eAC3B3F,IAAA,QAAKwF,KAAK,CAAA+C,aAAA,CAAAA,aAAA,IAAOC,MAAM,CAACoH,UAAU,MAAEW,IAAI,CAAE,CAAC,EAAG,CAAA5K,QAAA,cAC5CzF,KAAA,UAAOsF,KAAK,CAAEgD,MAAM,CAACqH,UAAW,CAAAlK,QAAA,EAC7BnF,YAAY,CAACkG,MAAM,CAAC,CAAC1E,WAAW,CAACqB,KAAK,CAAC,GACxC,cAAArD,IAAA,UACE+F,IAAI,CAAC,MAAM,CACXyK,MAAM,CAAC,SAAS,CAChBpM,QAAQ,CAAGW,CAAC,EAAKoG,iBAAiB,CAACpG,CAAC,CAACE,MAAM,CAACwL,KAAK,CAAC,CAAC,CAAC,CAAE,CACtDjL,KAAK,CAAE,CAAES,SAAS,CAAE,CAAE,CAAE,CACzB,CAAC,CACDoB,UAAU,CAAChE,KAAK,cACfrD,IAAA,QAAKwF,KAAK,CAAE,CAAES,SAAS,CAAE,CAAE,CAAE,CAAAN,QAAA,cAC3B3F,IAAA,QACEgN,GAAG,CAAEtB,QAAQ,CAACrE,UAAU,CAAChE,KAAK,CAAE,CAChCkK,GAAG,CAAC,SAAS,CACb/H,KAAK,CAAE,CAAEa,KAAK,CAAE,EAAE,CAAEgG,MAAM,CAAE,EAAE,CAAEmB,SAAS,CAAE,OAAO,CAAEvB,YAAY,CAAE,CAAE,CAAE,CACvE,CAAC,CACC,CAAC,CACJ,IAAI,EACH,CAAC,CACL,CAAC,cACNjM,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,CAAM,CAAC,cACrC5P,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,CAAM,CAAC,cACrC5P,IAAA,QAAKwF,KAAK,CAAEgD,MAAM,CAACoH,UAAW,CAAM,CAAC,EAClC,CAAC,cACN1P,KAAA,QAAKsF,KAAK,CAAEgD,MAAM,CAACkI,YAAa,CAAA/K,QAAA,eAC9B3F,IAAA,WAAQ+F,IAAI,CAAC,QAAQ,CAACP,KAAK,CAAEgD,MAAM,CAACmI,WAAY,CAAAhL,QAAA,CAC7CnF,YAAY,CAACkG,MAAM,CAAC,CAACvF,IAAI,CACpB,CAAC,cACTnB,IAAA,WAAQ+F,IAAI,CAAC,QAAQ,CAACP,KAAK,CAAEgD,MAAM,CAACmI,WAAY,CAAC7B,OAAO,CAAE5E,gBAAiB,CAAAvE,QAAA,CACxEnF,YAAY,CAACkG,MAAM,CAAC,CAACtF,MAAM,CACtB,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAEA;AAEA,KAAM,CAAAoH,MAAM,CAAG,CACbuF,aAAa,CAAE,CACbb,OAAO,CAAE,SAAS,CAClB0D,QAAQ,CAAE,UAAU,CACpBC,SAAS,CAAE,OAAO,CAClBC,SAAS,CAAE,YACb,CAAC,CACD9C,eAAe,CAAE,CACf+C,YAAY,CAAE,MAAM,CACpBtL,OAAO,CAAE,MAAM,CACfuL,UAAU,CAAE,QAAQ,CACpB5D,QAAQ,CAAE,OACZ,CAAC,CACDa,UAAU,CAAE,CACVpI,QAAQ,CAAE,QAAQ,CAClBsI,WAAW,CAAE,QACf,CAAC,CACDD,WAAW,CAAE,CACXqC,IAAI,CAAE,CAAC,CACPrD,OAAO,CAAE,QAAQ,CACjBrH,QAAQ,CAAE,MAAM,CAChBoG,YAAY,CAAE,KAAK,CACnBD,MAAM,CAAE,gBACV,CAAC,CACDvD,KAAK,CAAE,CACLpC,KAAK,CAAE,MAAM,CACb4K,cAAc,CAAE,UAAU,CAC1BhL,SAAS,CAAE,GAAG,CACdiL,WAAW,CAAE,OACf,CAAC,CACD5C,cAAc,CAAE,CACdhB,UAAU,CAAE,SACd,CAAC,CACDoB,WAAW,CAAE,CACXxB,OAAO,CAAE,QAAQ,CACjBlB,MAAM,CAAE,mBAAmB,CAC3BoC,UAAU,CAAE,MAAM,CAClBvI,QAAQ,CAAE,SAAS,CACnByH,UAAU,CAAE,SACd,CAAC,CACDuB,QAAQ,CAAE,CACR/I,MAAM,CAAE,SACV,CAAC,CACDmH,SAAS,CAAE,CACTC,OAAO,CAAE,iBAAiB,CAC1BlB,MAAM,CAAE,mBAAmB,CAC3BnG,QAAQ,CAAE,SAAS,CACnBsL,SAAS,CAAE,YAAY,CACvB9D,aAAa,CAAE,QACjB,CAAC,CACD2B,MAAM,CAAE,CACN4B,QAAQ,CAAE,OAAO,CACjBQ,MAAM,CAAE,MAAM,CACdnC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,OAAO,CACd5B,UAAU,CAAE,SAAS,CACrBJ,OAAO,CAAE,MAAM,CACfjB,YAAY,CAAE,KAAK,CACnBoF,SAAS,CAAE,4BAA4B,CACvC5L,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,KAAK,CACpBM,GAAG,CAAE,QAAQ,CACbsL,MAAM,CAAE,CACV,CAAC,CACDlC,YAAY,CAAE,CACZ3J,OAAO,CAAE,MAAM,CACfuL,UAAU,CAAE,QAAQ,CACpBhL,GAAG,CAAE,QAAQ,CACbkH,OAAO,CAAE,aAAa,CACtBrH,QAAQ,CAAE,MAAM,CAChBU,KAAK,CAAE,SAAS,CAChB+G,UAAU,CAAE,SAAS,CACrBtB,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBnG,MAAM,CAAE,SAAS,CACjByL,UAAU,CAAE,iBACd,CAAC,CACDlC,YAAY,CAAE,CACZuB,QAAQ,CAAE,OAAO,CACjBY,GAAG,CAAE,CAAC,CACNvC,IAAI,CAAE,CAAC,CACP5I,KAAK,CAAE,OAAO,CACdgG,MAAM,CAAE,OAAO,CACfiB,UAAU,CAAE,oBAAoB,CAChC7H,OAAO,CAAE,MAAM,CACfuL,UAAU,CAAE,QAAQ,CACpB3C,cAAc,CAAE,QAAQ,CACxBiD,MAAM,CAAE,IACV,CAAC,CACDhC,YAAY,CAAE,CACZhC,UAAU,CAAE,MAAM,CAClBJ,OAAO,CAAE,MAAM,CACfjB,YAAY,CAAE,KAAK,CACnB5F,KAAK,CAAE,KAAK,CACZ+G,QAAQ,CAAE,OAAO,CACjBiE,SAAS,CAAE,6BACb,CAAC,CACD7B,SAAS,CAAE,CACT/J,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBM,GAAG,CAAE,MACP,CAAC,CACD6J,UAAU,CAAE,CACVpK,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBG,QAAQ,CAAE,QAAQ,CAClBU,KAAK,CAAE,MACT,CAAC,CACDuJ,UAAU,CAAE,CACV5C,OAAO,CAAE,QAAQ,CACjBrH,QAAQ,CAAE,MAAM,CAChBoG,YAAY,CAAE,KAAK,CACnBD,MAAM,CAAE,gBAAgB,CACxB/F,SAAS,CAAE,QACb,CAAC,CACDkK,OAAO,CAAE,CACP5J,KAAK,CAAE,MAAM,CACbV,QAAQ,CAAE,QAAQ,CAClBI,SAAS,CAAE,KAAK,CAChBmI,UAAU,CAAE,MACd,CAAC,CACDsC,YAAY,CAAE,CACZjL,OAAO,CAAE,MAAM,CACf4I,cAAc,CAAE,UAAU,CAC1BrI,GAAG,CAAE,MAAM,CACXC,SAAS,CAAE,MACb,CAAC,CACD0K,WAAW,CAAE,CACXzD,OAAO,CAAE,eAAe,CACxBrH,QAAQ,CAAE,MAAM,CAChBoG,YAAY,CAAE,KAAK,CACnBD,MAAM,CAAE,MAAM,CACdlG,MAAM,CAAE,SAAS,CACjBwH,UAAU,CAAE,SAAS,CACrB/G,KAAK,CAAE,MAAM,CACb6H,UAAU,CAAE,MAAM,CAClBmD,UAAU,CAAE,iBACd,CAAC,CACD5B,SAAS,CAAE,CACTlK,OAAO,CAAE,MAAM,CACfO,GAAG,CAAE,SAAS,CACdgL,UAAU,CAAE,YACd,CAAC,CACDpB,UAAU,CAAE,CACVW,IAAI,CAAE,CAAC,CACPpD,QAAQ,CAAE,CACZ,CACF,CAAC,CAED,cAAe,CAAA3G,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}