{"ast":null,"code":"// pointage.js - registers openPointage listener and exports openPointage()\n// Drop this in src/ (or adjust App import path) so `import './pointage'` runs it.\nimport React from\"react\";import ReactDOM from\"react-dom/client\";/* Utility helpers (minimal versions) */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatCurrencyFR(value){if(value===undefined||value===null||value===\"\")return\"\";const num=Number(String(value).replace(/\\s+/g,\"\").replace(\",\",\".\"));if(Number.isNaN(num))return String(value);return num.toLocaleString(\"fr-FR\",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\\u202f/g,\" \");}function formatDateISO(d){const yyyy=d.getFullYear();const mm=String(d.getMonth()+1).padStart(2,\"0\");const dd=String(d.getDate()).padStart(2,\"0\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}/* Minimal React modal — replace with your full UI if desired */function PointageModal(_ref){let{detail={},onClose}=_ref;const locale=detail.locale||\"fr\";const personnel=detail.personnel||null;const now=new Date();return/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"92%\",maxWidth:900,background:\"#fff\",borderRadius:8,padding:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:locale===\"fr\"?\"Pointage / Salary\":\"تسجيل الحضور / الراتب\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,\"aria-label\":\"Close\",children:\"\\u2716\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:8,fontWeight:700},children:locale===\"fr\"?\"Personnel selected:\":\"الموظف المحدد:\"}),/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:\"pre-wrap\"},children:JSON.stringify(personnel||{message:\"none\"},null,2)}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsxs(\"div\",{children:[locale===\"fr\"?\"Month:\":\"الشهر:\",\" \",now.getMonth()+1,\" / \",now.getFullYear()]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:locale===\"fr\"?\"This modal is a diagnostic stub.\":\"هذه نافذة اختبارية.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,textAlign:\"right\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{padding:\"0.5rem 1rem\"},children:locale===\"fr\"?\"Close\":\"إغلاق\"})})]})});}/* Programmatic opener: mounts the modal into document.body */export function openPointage(){let detail=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};console.log(\"[pointage] openPointage called with:\",detail);const id=\"pointage-modal-root\";let container=document.getElementById(id);if(!container){container=document.createElement(\"div\");container.id=id;document.body.appendChild(container);}// Try React 18 createRoot, fallback to legacy render\ntry{const root=ReactDOM.createRoot(container);const onClose=()=>{try{root.unmount();container.remove();}catch(e){console.warn(\"[pointage] cleanup error:\",e);}};root.render(/*#__PURE__*/_jsx(PointageModal,{detail:detail,onClose:onClose}));}catch(err){console.warn(\"[pointage] createRoot failed, using legacy render:\",err);ReactDOM.render(/*#__PURE__*/_jsx(PointageModal,{detail:detail,onClose:()=>{try{ReactDOM.unmountComponentAtNode(container);container.remove();}catch(e){}}}),container);}}/* Register event listener and expose helper for console debugging */function onOpenPointageEvent(e){try{console.log(\"[pointage] openPointage event received:\",e===null||e===void 0?void 0:e.detail);openPointage((e===null||e===void 0?void 0:e.detail)||{});}catch(err){console.error(\"[pointage] event handler error:\",err);}}try{window.__pointageLoaded=true;window.addEventListener(\"openPointage\",onOpenPointageEvent);// also expose for manual testing\nwindow.openPointage=window.openPointage||openPointage;console.log(\"[pointage] module loaded. Listener registered. window.__pointageLoaded=true\");}catch(e){console.error(\"[pointage] could not register listener:\",e);}export default openPointage;","map":{"version":3,"names":["React","ReactDOM","jsx","_jsx","jsxs","_jsxs","formatCurrencyFR","value","undefined","num","Number","String","replace","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","formatDateISO","d","yyyy","getFullYear","mm","getMonth","padStart","dd","getDate","concat","PointageModal","_ref","detail","onClose","locale","personnel","now","Date","style","position","inset","background","display","alignItems","justifyContent","zIndex","children","width","maxWidth","borderRadius","padding","onClick","marginTop","marginBottom","fontWeight","whiteSpace","JSON","stringify","message","textAlign","openPointage","arguments","length","console","log","id","container","document","getElementById","createElement","body","appendChild","root","createRoot","unmount","remove","e","warn","render","err","unmountComponentAtNode","onOpenPointageEvent","error","window","__pointageLoaded","addEventListener"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/pointage.js"],"sourcesContent":["// pointage.js - registers openPointage listener and exports openPointage()\n// Drop this in src/ (or adjust App import path) so `import './pointage'` runs it.\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\n/* Utility helpers (minimal versions) */\nfunction formatCurrencyFR(value) {\n  if (value === undefined || value === null || value === \"\") return \"\";\n  const num = Number(String(value).replace(/\\s+/g, \"\").replace(\",\", \".\"));\n  if (Number.isNaN(num)) return String(value);\n  return num.toLocaleString(\"fr-FR\", { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(/\\u202f/g, \" \");\n}\nfunction formatDateISO(d) {\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n}\n\n/* Minimal React modal — replace with your full UI if desired */\nfunction PointageModal({ detail = {}, onClose }) {\n  const locale = detail.locale || \"fr\";\n  const personnel = detail.personnel || null;\n  const now = new Date();\n  return (\n    <div style={{\n      position: \"fixed\", inset: 0, background: \"rgba(0,0,0,0.45)\",\n      display: \"flex\", alignItems: \"center\", justifyContent: \"center\", zIndex: 9999\n    }}>\n      <div style={{ width: \"92%\", maxWidth: 900, background: \"#fff\", borderRadius: 8, padding: 16 }}>\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n          <h3>{locale === \"fr\" ? \"Pointage / Salary\" : \"تسجيل الحضور / الراتب\"}</h3>\n          <button onClick={onClose} aria-label=\"Close\">✖</button>\n        </div>\n\n        <div style={{ marginTop: 12 }}>\n          <div style={{ marginBottom: 8, fontWeight: 700 }}>\n            {locale === \"fr\" ? \"Personnel selected:\" : \"الموظف المحدد:\"}\n          </div>\n          <pre style={{ whiteSpace: \"pre-wrap\" }}>\n            {JSON.stringify(personnel || { message: \"none\" }, null, 2)}\n          </pre>\n\n          <div style={{ marginTop: 12 }}>\n            <div>{locale === \"fr\" ? \"Month:\" : \"الشهر:\"} {now.getMonth() + 1} / {now.getFullYear()}</div>\n            <div style={{ marginTop: 8 }}>{locale === \"fr\" ? \"This modal is a diagnostic stub.\" : \"هذه نافذة اختبارية.\"}</div>\n          </div>\n        </div>\n\n        <div style={{ marginTop: 16, textAlign: \"right\" }}>\n          <button onClick={onClose} style={{ padding: \"0.5rem 1rem\" }}>\n            {locale === \"fr\" ? \"Close\" : \"إغلاق\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* Programmatic opener: mounts the modal into document.body */\nexport function openPointage(detail = {}) {\n  console.log(\"[pointage] openPointage called with:\", detail);\n  const id = \"pointage-modal-root\";\n  let container = document.getElementById(id);\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.id = id;\n    document.body.appendChild(container);\n  }\n\n  // Try React 18 createRoot, fallback to legacy render\n  try {\n    const root = ReactDOM.createRoot(container);\n    const onClose = () => {\n      try {\n        root.unmount();\n        container.remove();\n      } catch (e) {\n        console.warn(\"[pointage] cleanup error:\", e);\n      }\n    };\n    root.render(<PointageModal detail={detail} onClose={onClose} />);\n  } catch (err) {\n    console.warn(\"[pointage] createRoot failed, using legacy render:\", err);\n    ReactDOM.render(<PointageModal detail={detail} onClose={() => {\n      try { ReactDOM.unmountComponentAtNode(container); container.remove(); } catch(e) {}\n    }} />, container);\n  }\n}\n\n/* Register event listener and expose helper for console debugging */\nfunction onOpenPointageEvent(e) {\n  try {\n    console.log(\"[pointage] openPointage event received:\", e?.detail);\n    openPointage(e?.detail || {});\n  } catch (err) {\n    console.error(\"[pointage] event handler error:\", err);\n  }\n}\n\ntry {\n  window.__pointageLoaded = true;\n  window.addEventListener(\"openPointage\", onOpenPointageEvent);\n  // also expose for manual testing\n  window.openPointage = window.openPointage || openPointage;\n  console.log(\"[pointage] module loaded. Listener registered. window.__pointageLoaded=true\");\n} catch (e) {\n  console.error(\"[pointage] could not register listener:\", e);\n}\n\nexport default openPointage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}