{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";/*\n  caisse.js\n\n  Updates:\n  - Calculates and displays totals:\n    * totalEncaissement\n    * totalDepense\n    * soldeCaisse = totalEncaissement - totalDepense\n  - In the Add / Edit modal shows:\n    * Previous solde (latest saved solde or computed 0)\n    * A live \"New solde\" computed as:\n        - encaissement: prevSolde + montant\n        - depense: prevSolde - montant\n  - New solde updates live when user changes montant, operation or nature.\n  - On save, the payload includes the new solde (backend still recomputes too).\n  - Keeps existing backend integration and pickers.\n*/import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatNumberSpaceDot(value){if(value===null||value===undefined||value===\"\")return\"\";const cleaned=String(value).replace(/\\s+/g,\"\").replace(/,/g,\".\");const n=Number(cleaned);if(!Number.isFinite(n))return String(value);const parts=n.toFixed(2).split(\".\");parts[0]=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\" \");return parts.join(\".\");}function parseNumber(value){if(value===null||value===undefined||value===\"\")return 0;const s=String(value).replace(/\\s+/g,\"\").replace(/,/g,\".\");const n=Number(s);return Number.isFinite(n)?n:0;}function formatDateToDisplay(iso){if(!iso)return\"\";const m=iso.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);if(m)return\"\".concat(m[3],\"/\").concat(m[2],\"/\").concat(m[1]);return iso;}function toISODate(input){if(!input)return\"\";if(input instanceof Date){const yyyy=input.getFullYear();const mm=String(input.getMonth()+1).padStart(2,\"0\");const dd=String(input.getDate()).padStart(2,\"0\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(input)){const[dd,mm,yyyy]=input.split(\"/\");return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}if(/^\\d{4}-\\d{2}-\\d{2}$/.test(input))return input;return input;}export default function CaissePage(_ref){let{locale=\"fr\"}=_ref;const isRtl=locale===\"ar\";const[entries,setEntries]=useState([]);const[loading,setLoading]=useState(false);const[selectedIndex,setSelectedIndex]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[showModal,setShowModal]=useState(false);const[showAddChoice,setShowAddChoice]=useState(false);const[modalMode,setModalMode]=useState(\"add\");// add | edit\nconst[showPicker,setShowPicker]=useState(false);const[pickerType,setPickerType]=useState(null);// \"client\" | \"personel\"\nconst[pickerList,setPickerList]=useState([]);const[pickerSearch,setPickerSearch]=useState(\"\");const[form,setForm]=useState({id:null,date:\"\",heure:\"\",operation:\"\",nature:\"\",montant:\"\",solde:\"\",target_type:null,target_id:null,target_label:null});const[error,setError]=useState(\"\");// Totals\nconst[totalEncaissement,setTotalEncaissement]=useState(0);const[totalDepense,setTotalDepense]=useState(0);const[soldeCaisse,setSoldeCaisse]=useState(0);// Modal running-balance preview\nconst[prevSoldePreview,setPrevSoldePreview]=useState(0);const[newSoldePreview,setNewSoldePreview]=useState(0);const TABLE_FIELDS=[\"date\",\"heure\",\"operation\",\"nature\",\"montant\",\"solde\"];const headersFr=[\"#\",\"Date\",\"Heure\",\"OpÃ©ration\",\"Nature\",\"Montant\",\"Solde\"];const headersAr=[\"#\",\"Ø§Ù„ØªØ§Ø±ÙŠØ®\",\"Ø§Ù„Ø³Ø§Ø¹Ø©\",\"Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\",\"Ø§Ù„Ù†ÙˆØ¹\",\"Ø§Ù„Ù…Ø¨Ù„Øº\",\"Ø§Ù„Ø±ØµÙŠØ¯\"];const headers=locale===\"ar\"?headersAr:headersFr;const natureOptions={encaissement:[\"Paiement client\",\"Autre\"],depense:[\"Paiement vol\",\"Paiement hotel\",\"Charge bureautique\",\"Paiement salaire\",\"Avance sur salaire\",\"Autre charge\"]};const directionStyle=isRtl?{direction:\"rtl\"}:{direction:\"ltr\"};function isEncaissementText(opText,natText){const op=(opText||\"\").toLowerCase();const nat=(natText||\"\").toLowerCase();if(op.includes(\"enc\")||op.includes(\"encaisse\"))return true;if(nat.includes(\"enc\")||nat.includes(\"encaisse\")||nat.includes(\"paiement client\"))return true;// fallback: if nature mentions client payment consider encaissement\nif(nat.includes(\"client\")&&nat.includes(\"paiement\"))return true;return false;}// --- Backend integration: load entries ---\nasync function fetchEntries(){setLoading(true);try{var _window$pywebview,_window$pywebview$api,_window$pywebview2,_window$pywebview2$ap,_window$pywebview3,_window$pywebview3$ap;const loader=((_window$pywebview=window.pywebview)===null||_window$pywebview===void 0?void 0:(_window$pywebview$api=_window$pywebview.api)===null||_window$pywebview$api===void 0?void 0:_window$pywebview$api.load_caisse)||((_window$pywebview2=window.pywebview)===null||_window$pywebview2===void 0?void 0:(_window$pywebview2$ap=_window$pywebview2.api)===null||_window$pywebview2$ap===void 0?void 0:_window$pywebview2$ap.loadCaisse)||((_window$pywebview3=window.pywebview)===null||_window$pywebview3===void 0?void 0:(_window$pywebview3$ap=_window$pywebview3.api)===null||_window$pywebview3$ap===void 0?void 0:_window$pywebview3$ap.get_caisse);if(typeof loader===\"function\"){const res=await loader();const normalized=(res||[]).map(r=>_objectSpread(_objectSpread({},r),{},{montant:r.montant!==undefined&&r.montant!==null?String(r.montant):\"\",solde:r.solde!==undefined&&r.solde!==null?Number(r.solde):null,date:r.date||r.date_iso||\"\"}));setEntries(Array.isArray(normalized)?normalized:[]);}else{setEntries([]);console.warn(\"Backend: no load_caisse function found on window.pywebview.api\");}}catch(e){console.error(\"Failed to load caisse entries\",e);setEntries([]);alert(locale===\"ar\"?\"Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª\":\"Failed to load entries\");}finally{setLoading(false);}}useEffect(()=>{fetchEntries();},[locale]);// Compute totals whenever entries change\nuseEffect(()=>{let enc=0;let dep=0;for(const r of entries){const amt=parseNumber(r.montant||0);if(isEncaissementText(r.operation,r.nature))enc+=amt;else dep+=amt;}setTotalEncaissement(enc);setTotalDepense(dep);setSoldeCaisse(enc-dep);// update preview prevSolde to latest saved solde if exists\nconst latest=entries&&entries.length>0?entries[0]:null;const latestSolde=latest&&latest.solde!==null&&latest.solde!==undefined?Number(latest.solde):0;setPrevSoldePreview(latestSolde);},[entries]);// Update newSoldePreview whenever form relevant fields change (operation/nature/montant or prevSoldePreview)\nuseEffect(()=>{const montantNum=parseNumber(form.montant||0);const isEnc=isEncaissementText(form.operation,form.nature);const prev=Number(prevSoldePreview||0);const next=isEnc?prev+montantNum:prev-montantNum;setNewSoldePreview(next);},[form.montant,form.operation,form.nature,prevSoldePreview]);const filtered=entries.filter(e=>{const q=searchQuery.trim().toLowerCase();if(!q)return true;return e.date&&e.date.toLowerCase().includes(q)||e.heure&&e.heure.toLowerCase().includes(q)||e.operation&&String(e.operation).toLowerCase().includes(q)||e.nature&&String(e.nature).toLowerCase().includes(q)||String(e.montant||\"\").toLowerCase().includes(q)||String(e.solde||\"\").toLowerCase().includes(q);});function openAddChoice(){setShowAddChoice(true);}function chooseAdd(type){setShowAddChoice(false);setModalMode(\"add\");const now=new Date();const isoDate=toISODate(now);const hh=String(now.getHours()).padStart(2,\"0\");const mm=String(now.getMinutes()).padStart(2,\"0\");const operationLabel=type===\"encaissement\"?locale===\"ar\"?\"Encaissement\":\"Encaissement\":locale===\"ar\"?\"DÃ©pense\":\"DÃ©pense\";const natureDefault=type===\"encaissement\"?natureOptions.encaissement[0]:natureOptions.depense[0];// set prevSoldePreview from latest entry\nconst latest=entries&&entries.length>0?entries[0]:null;const latestSolde=latest&&latest.solde!==null&&latest.solde!==undefined?Number(latest.solde):0;setPrevSoldePreview(latestSolde);setForm({id:null,date:isoDate,heure:\"\".concat(hh,\":\").concat(mm),operation:operationLabel,nature:natureDefault,montant:\"\",solde:\"\",target_type:null,target_id:null,target_label:null});setError(\"\");setShowModal(true);}function openEdit(){var _row$id;if(selectedIndex===null||filtered[selectedIndex]===undefined){alert(locale===\"ar\"?\"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø³Ø·Ø±.\":\"Please select a row.\");return;}const row=filtered[selectedIndex];setModalMode(\"edit\");// prevSoldePreview should be the latest solde BEFORE this row.\n// For simplicity we use the latest saved solde (entries[0]) â€” if editing older row, preview is approximate.\nconst latest=entries&&entries.length>0?entries[0]:null;const latestSolde=latest&&latest.solde!==null&&latest.solde!==undefined?Number(latest.solde):0;setPrevSoldePreview(latestSolde);setForm({id:(_row$id=row.id)!==null&&_row$id!==void 0?_row$id:null,date:row.date?toISODate(row.date):\"\",heure:row.heure||\"\",operation:row.operation||\"\",nature:row.nature||\"\",montant:row.montant!==undefined&&row.montant!==null?String(row.montant):\"\",solde:row.solde!==undefined&&row.solde!==null?String(row.solde):\"\",target_type:row.target_type||null,target_id:row.target_id||null,target_label:row.target_label||null});setError(\"\");setShowModal(true);}async function handleDelete(){if(selectedIndex===null||filtered[selectedIndex]===undefined){alert(locale===\"ar\"?\"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø³Ø·Ø±.\":\"Please select a row.\");return;}const row=filtered[selectedIndex];const name=\"\".concat(row.date||\"\",\" \").concat(row.operation||\"\");if(!window.confirm((locale===\"ar\"?\"Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ \":\"Delete entry \")+name+\"?\"))return;try{var _window$pywebview4,_window$pywebview4$ap,_window$pywebview5,_window$pywebview5$ap,_window$pywebview6,_window$pywebview6$ap;const deleteFn=((_window$pywebview4=window.pywebview)===null||_window$pywebview4===void 0?void 0:(_window$pywebview4$ap=_window$pywebview4.api)===null||_window$pywebview4$ap===void 0?void 0:_window$pywebview4$ap.delete_caisse_entry)||((_window$pywebview5=window.pywebview)===null||_window$pywebview5===void 0?void 0:(_window$pywebview5$ap=_window$pywebview5.api)===null||_window$pywebview5$ap===void 0?void 0:_window$pywebview5$ap.deleteCaisseEntry)||((_window$pywebview6=window.pywebview)===null||_window$pywebview6===void 0?void 0:(_window$pywebview6$ap=_window$pywebview6.api)===null||_window$pywebview6$ap===void 0?void 0:_window$pywebview6$ap.delete_caisse);if(typeof deleteFn===\"function\"){await deleteFn(row.id);await fetchEntries();setSelectedIndex(null);}else{setEntries(prev=>prev.filter(x=>x.id!==row.id));setSelectedIndex(null);alert(locale===\"ar\"?\"Ù…Ù„Ø§Ø­Ø¸Ø©: ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø­Ø°Ù ØºÙŠØ± Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© â€” ØªÙ… Ø§Ù„Ø­Ø°Ù Ù…Ø­Ù„ÙŠÙ‹Ø§.\":\"Note: delete not available in backend â€” removed locally.\");}}catch(e){console.error(\"delete failed\",e);alert(locale===\"ar\"?\"ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù\":\"Delete failed\");}}async function handleSave(e){var _e$preventDefault;e===null||e===void 0?void 0:(_e$preventDefault=e.preventDefault)===null||_e$preventDefault===void 0?void 0:_e$preventDefault.call(e);setError(\"\");if(!form.date||!form.heure||!form.operation||!form.nature||form.montant===\"\"){setError(locale===\"ar\"?\"ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\":\"Please fill required fields\");return;}const lower=String(form.nature||\"\").toLowerCase();if(lower.includes(\"client\")){if(!form.target_type||form.target_type!==\"client\"||!form.target_id){setError(locale===\"ar\"?\"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„\":\"Please choose a client\");return;}}if(lower.includes(\"salaire\")||lower.includes(\"avance\")){if(!form.target_type||form.target_type!==\"personel\"||!form.target_id){setError(locale===\"ar\"?\"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù\":\"Please choose a personnel\");return;}}// determine prevSolde based on latest saved entry\nlet prevSolde=0;if(entries&&entries.length>0){const latest=entries[0];prevSolde=Number(latest.solde||0);}const montantNum=parseNumber(form.montant);const isEnc=isEncaissementText(form.operation,form.nature);const computedSolde=isEnc?prevSolde+montantNum:prevSolde-montantNum;const payload={date:toISODate(form.date),heure:form.heure,operation:form.operation,nature:form.nature,montant:montantNum,solde:computedSolde,target_type:form.target_type,target_id:form.target_id,target_label:form.target_label,created_at:new Date().toISOString()};try{if(modalMode===\"add\"){var _window$pywebview7,_window$pywebview7$ap,_window$pywebview8,_window$pywebview8$ap,_window$pywebview9,_window$pywebview9$ap;const addFn=((_window$pywebview7=window.pywebview)===null||_window$pywebview7===void 0?void 0:(_window$pywebview7$ap=_window$pywebview7.api)===null||_window$pywebview7$ap===void 0?void 0:_window$pywebview7$ap.add_caisse_entry)||((_window$pywebview8=window.pywebview)===null||_window$pywebview8===void 0?void 0:(_window$pywebview8$ap=_window$pywebview8.api)===null||_window$pywebview8$ap===void 0?void 0:_window$pywebview8$ap.addCaisseEntry)||((_window$pywebview9=window.pywebview)===null||_window$pywebview9===void 0?void 0:(_window$pywebview9$ap=_window$pywebview9.api)===null||_window$pywebview9$ap===void 0?void 0:_window$pywebview9$ap.add_caisse);if(typeof addFn===\"function\"){await addFn(payload);await fetchEntries();}else{const tmpId=Date.now();setEntries(prev=>[_objectSpread(_objectSpread({},payload),{},{id:tmpId}),...prev]);alert(locale===\"ar\"?\"Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªÙˆÙØ± add_caisse_entry.\":\"Note: added locally because backend has no add_caisse_entry.\");}}else{var _window$pywebview0,_window$pywebview0$ap,_window$pywebview1,_window$pywebview1$ap,_window$pywebview10,_window$pywebview10$a;if(!form.id){setError(\"Missing id for update\");return;}const updFn=((_window$pywebview0=window.pywebview)===null||_window$pywebview0===void 0?void 0:(_window$pywebview0$ap=_window$pywebview0.api)===null||_window$pywebview0$ap===void 0?void 0:_window$pywebview0$ap.update_caisse_entry)||((_window$pywebview1=window.pywebview)===null||_window$pywebview1===void 0?void 0:(_window$pywebview1$ap=_window$pywebview1.api)===null||_window$pywebview1$ap===void 0?void 0:_window$pywebview1$ap.updateCaisseEntry)||((_window$pywebview10=window.pywebview)===null||_window$pywebview10===void 0?void 0:(_window$pywebview10$a=_window$pywebview10.api)===null||_window$pywebview10$a===void 0?void 0:_window$pywebview10$a.update_caisse);if(typeof updFn===\"function\"){await updFn(form.id,payload);await fetchEntries();}else{setEntries(prev=>prev.map(x=>x.id===form.id?_objectSpread(_objectSpread({},x),payload):x));alert(locale===\"ar\"?\"Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­Ù„ÙŠ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªØ¯Ø¹Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ«.\":\"Note: updated locally because backend update is not available.\");}}setShowModal(false);}catch(err){console.error(\"save error\",err);setError(locale===\"ar\"?\"Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸\":\"Save error\");}}function handlePrint(){window.print();}async function openPickerFor(natureValue){const lower=String(natureValue||\"\").toLowerCase();let typeToOpen=null;if(lower.includes(\"client\"))typeToOpen=\"client\";else if(lower.includes(\"salaire\")||lower.includes(\"avance\"))typeToOpen=\"personel\";if(!typeToOpen)return;const type=typeToOpen;setPickerType(type);setPickerSearch(\"\");setShowPicker(true);try{if(type===\"client\"){var _window$pywebview11,_window$pywebview11$a,_window$pywebview12,_window$pywebview12$a;const fn=((_window$pywebview11=window.pywebview)===null||_window$pywebview11===void 0?void 0:(_window$pywebview11$a=_window$pywebview11.api)===null||_window$pywebview11$a===void 0?void 0:_window$pywebview11$a.get_clients)||((_window$pywebview12=window.pywebview)===null||_window$pywebview12===void 0?void 0:(_window$pywebview12$a=_window$pywebview12.api)===null||_window$pywebview12$a===void 0?void 0:_window$pywebview12$a.load_all_clients);if(typeof fn===\"function\"){const res=await fn();setPickerList(Array.isArray(res)?res:[]);}else{setPickerList([]);alert(locale===\"ar\"?\"Ø®Ù„ÙÙŠØ©: get_clients ØºÙŠØ± Ù…ØªØ§Ø­Ø©.\":\"Backend: get_clients not available.\");}}else{var _window$pywebview13,_window$pywebview13$a,_window$pywebview14,_window$pywebview14$a;const fn=((_window$pywebview13=window.pywebview)===null||_window$pywebview13===void 0?void 0:(_window$pywebview13$a=_window$pywebview13.api)===null||_window$pywebview13$a===void 0?void 0:_window$pywebview13$a.get_personnel)||((_window$pywebview14=window.pywebview)===null||_window$pywebview14===void 0?void 0:(_window$pywebview14$a=_window$pywebview14.api)===null||_window$pywebview14$a===void 0?void 0:_window$pywebview14$a.load_all_personnel);if(typeof fn===\"function\"){const res=await fn();setPickerList(Array.isArray(res)?res:[]);}else{setPickerList([]);alert(locale===\"ar\"?\"Ø®Ù„ÙÙŠØ©: get_personnel ØºÙŠØ± Ù…ØªØ§Ø­Ø©.\":\"Backend: get_personnel not available.\");}}}catch(e){console.error(\"picker fetch failed\",e);setPickerList([]);alert(locale===\"ar\"?\"ÙØ´Ù„ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯\":\"Failed to fetch picker list\");}}useEffect(()=>{const lower=String(form.nature||\"\").toLowerCase();if(!form.nature)return;if(lower.includes(\"client\")||lower.includes(\"salaire\")||lower.includes(\"avance\")){openPickerFor(form.nature);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[form.nature]);function pickItem(item){if(!item)return;if(pickerType===\"client\"){const label=\"\".concat(item.nom||\"\").concat(item.prenom?\" \"+item.prenom:\"\");setForm(prev=>_objectSpread(_objectSpread({},prev),{},{target_type:\"client\",target_id:item.id,target_label:label}));}else if(pickerType===\"personel\"){const label=\"\".concat(item.nom||\"\").concat(item.prenom?\" \"+item.prenom:\"\");setForm(prev=>_objectSpread(_objectSpread({},prev),{},{target_type:\"personel\",target_id:item.id,target_label:label}));}setShowPicker(false);}function renderCell(row,field,idx){var _row$field;const isLast=idx===TABLE_FIELDS.length-1;const baseStyle=_objectSpread(_objectSpread({},styles.tableCell),{},{borderRight:isLast?\"none\":\"1px solid #e6eefb\"});if(field===\"date\")return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:formatDateToDisplay(row.date)||\"-\"},field);if(field===\"montant\")return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(row[field])||\"-\"})},field);if(field===\"solde\"){const s=row[field];const val=s===null||s===undefined||s===\"\"?0:s;return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(val)})},field);}if(field===\"nature\")return/*#__PURE__*/_jsxs(\"td\",{style:baseStyle,children:[row[field],row.target_label?\" \\u2014 \".concat(row.target_label):\"\"]},field);return/*#__PURE__*/_jsx(\"td\",{style:baseStyle,children:(_row$field=row[field])!==null&&_row$field!==void 0?_row$field:\"-\"},field);}return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.container),directionStyle),children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\"},children:locale===\"ar\"?\"Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\":\"Caisse\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,marginBottom:12,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.searchWrap),{},{maxWidth:420}),children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8},children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:locale===\"ar\"?\"Ø¨Ø­Ø«...\":\"Search...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setSelectedIndex(null);},style:styles.searchInput})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[\"\\uD83D\\uDCB0 \",locale===\"ar\"?\"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„\":\"Total Encaissement\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(totalEncaissement)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[\"\\uD83E\\uDDFE \",locale===\"ar\"?\"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª\":\"Total Depense\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(totalDepense)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[\"\\u2696\\uFE0F \",locale===\"ar\"?\"Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\":\"Solde Caisse\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(soldeCaisse)})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.tableWrap,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:styles.tableHeaderRow,children:[/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.tableHeader),{},{borderRight:\"1px solid #e6eefb\",width:36}),children:\"#\"}),TABLE_FIELDS.map((f,idx)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.tableHeader),{},{borderRight:idx===TABLE_FIELDS.length-1?\"none\":\"1px solid #e6eefb\"}),children:headers[idx+1]},f))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:1+TABLE_FIELDS.length,style:{padding:20,textAlign:\"center\"},children:locale===\"ar\"?\"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...\":\"Loading...\"})}):filtered.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:1+TABLE_FIELDS.length,style:{padding:20,textAlign:\"center\"},children:locale===\"ar\"?\"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª\":\"No entries\"})}):filtered.map((row,i)=>{var _row$id2;return/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>setSelectedIndex(i),style:_objectSpread(_objectSpread({},styles.tableRow),{},{background:i===selectedIndex?\"#cce5ff\":i%2===0?\"#fff\":\"#f4f8ff\",cursor:\"pointer\"}),children:[/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.tableCell),{},{width:36}),children:i+1}),TABLE_FIELDS.map((f,idx)=>renderCell(row,f,idx))]},(_row$id2=row.id)!==null&&_row$id2!==void 0?_row$id2:i);})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{left:20,right:\"unset\",bottom:28}),children:[/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:openAddChoice,children:locale===\"ar\"?\"âž• Ø¥Ø¶Ø§ÙØ©\":\"âž• Ajouter\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:openEdit,children:locale===\"ar\"?\"âœï¸ ØªØ¹Ø¯ÙŠÙ„\":\"âœï¸ Modifier\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleDelete,children:locale===\"ar\"?\"ðŸ—‘ï¸ Ø­Ø°Ù\":\"ðŸ—‘ï¸ Supprimer\"})]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{right:20,left:\"unset\",bottom:28}),children:/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.drawerButton),{},{background:\"#3477eb\",color:\"#fff\"}),onClick:handlePrint,children:locale===\"ar\"?\"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\":\"ðŸ–¨ï¸ Impression\"})}),showAddChoice&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.addChoicePanel),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:locale===\"ar\"?\"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ©\":\"Choisir le type\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.addChoiceButtons,children:[/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.bigButton),styles.encaissementButton),onClick:()=>chooseAdd(\"encaissement\"),children:[/*#__PURE__*/_jsx(\"div\",{style:styles.bigIcon,children:\"\\uFF0B\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:800},children:locale===\"ar\"?\"ØªØ­ØµÙŠÙ„\":\"Encaissement\"})]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.bigButton),styles.depenseButton),onClick:()=>chooseAdd(\"depense\"),children:[/*#__PURE__*/_jsx(\"div\",{style:styles.bigIcon,children:\"\\u2212\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,fontWeight:800},children:locale===\"ar\"?\"Ù…ØµØ±ÙˆÙ\":\"DÃ©pense\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{style:styles.cancelSmall,onClick:()=>setShowAddChoice(false),children:locale===\"ar\"?\"Ø¥Ù„ØºØ§Ø¡\":\"Annuler\"})})]})}),showModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{children:modalMode===\"add\"?locale===\"ar\"?\"Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„\":\"Ajouter entrÃ©e\":locale===\"ar\"?\"ØªØ¹Ø¯ÙŠÙ„ Ø³Ø¬Ù„\":\"Modifier entrÃ©e\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,marginBottom:8,alignItems:\"center\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.modalBadge,children:[\"\\uD83D\\uDCB0 \",locale===\"ar\"?\"ØªØ­ØµÙŠÙ„ Ø¥Ø¬Ù…Ø§Ù„ÙŠ\":\"Total Encaissement\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(totalEncaissement)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalBadge,children:[\"\\uD83E\\uDDFE \",locale===\"ar\"?\"Ù…ØµØ±ÙˆÙ Ø¥Ø¬Ù…Ø§Ù„ÙŠ\":\"Total Depense\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(totalDepense)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalBadge,children:[\"\\u2696\\uFE0F \",locale===\"ar\"?\"Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\":\"Solde Caisse\",\": \",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:formatNumberSpaceDot(soldeCaisse)})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,style:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„ØªØ§Ø±ÙŠØ®\":\"Date\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.date?toISODate(form.date):\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{date:e.target.value})),style:styles.input,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„Ø³Ø§Ø¹Ø©\":\"Heure\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:form.heure||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{heure:e.target.value})),style:styles.input,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\":\"OpÃ©ration\",/*#__PURE__*/_jsx(\"input\",{value:form.operation||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{operation:e.target.value})),style:styles.input,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„Ù†ÙˆØ¹\":\"Nature\",/*#__PURE__*/_jsx(\"select\",{value:form.nature||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{nature:e.target.value})),style:styles.input,required:true,children:String(form.operation||\"\").toLowerCase().includes(\"enc\")||String(form.operation||\"\").toLowerCase().includes(\"encaissement\")?natureOptions.encaissement.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt)):natureOptions.depense.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt))})]})]}),(String(form.nature||\"\").toLowerCase().includes(\"client\")||String(form.nature||\"\").toLowerCase().includes(\"salaire\")||String(form.nature||\"\").toLowerCase().includes(\"avance\"))&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:6,display:\"flex\",gap:12,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:\"#666\"},children:locale===\"ar\"?\"Ø§Ù„Ù…Ø­Ø¯Ù‘ÙŽØ¯\":\"Selected\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:form.target_label||(locale===\"ar\"?\"Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯\":\"None selected\")})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.drawerButton,onClick:()=>openPickerFor(form.nature),children:locale===\"ar\"?\"Ø§Ø®ØªÙŠØ§Ø±\":\"Choose\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.row,children:[/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„Ù…Ø¨Ù„Øº\":\"Montant\",/*#__PURE__*/_jsx(\"input\",{value:form.montant||\"\",onChange:e=>setForm(s=>_objectSpread(_objectSpread({},s),{},{montant:e.target.value})),style:styles.input,type:\"number\",step:\"0.01\",required:true})]}),/*#__PURE__*/_jsxs(\"label\",{style:styles.label,children:[locale===\"ar\"?\"Ø§Ù„Ø±ØµÙŠØ¯ (Ø¹Ø±Ø¶ ÙÙ‚Ø·)\":\"Previous Solde (preview)\",/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.input),{},{padding:\"0.45rem 0.6rem\",background:\"#fafafa\"}),children:formatNumberSpaceDot(prevSoldePreview)})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:\"#666\"},children:locale===\"ar\"?\"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø¹Ø§ÙŠÙ†Ø©)\":\"New Solde (preview)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:800,fontSize:16},children:formatNumberSpaceDot(newSoldePreview)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:240},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:13,color:\"#666\"},children:locale===\"ar\"?\"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø­ÙØ¸Ù‡\":\"Solde to be saved\"}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.input),{},{padding:\"0.45rem 0.6rem\",background:\"#fff\",textAlign:\"center\"}),children:formatNumberSpaceDot(newSoldePreview)})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",gap:8,marginTop:12},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.saveButton,children:locale===\"ar\"?\"Ø­ÙØ¸\":\"Enregistrer\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.cancelButton,onClick:()=>setShowModal(false),children:locale===\"ar\"?\"Ø¥Ù„ØºØ§Ø¡\":\"Annuler\"})]})]})]})}),showPicker&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),{},{width:\"88%\",maxWidth:860},isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{children:pickerType===\"client\"?locale===\"ar\"?\"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„\":\"Select client\":locale===\"ar\"?\"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù\":\"Select personnel\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,marginBottom:8},children:/*#__PURE__*/_jsx(\"input\",{placeholder:locale===\"ar\"?\"Ø¨Ø­Ø«...\":\"Search...\",value:pickerSearch,onChange:e=>setPickerSearch(e.target.value),style:styles.searchInput})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:360,overflowY:\"auto\",border:\"1px solid #eef3fb\",borderRadius:6},children:[pickerList.filter(item=>{const q=pickerSearch.trim().toLowerCase();if(!q)return true;const name=\"\".concat(item.nom||\"\",\" \").concat(item.prenom||\"\").toLowerCase();const passport=(item.passport_number||item.passport||\"\").toLowerCase();const telephone=(item.telephone||\"\").toLowerCase();const credit=String(item.credit||item.credit_formatted||\"\");return name.includes(q)||passport.includes(q)||telephone.includes(q)||credit.includes(q);}).map(item=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,borderBottom:\"1px solid #f2f6ff\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:(item.nom||\"\")+(item.prenom?\" \"+item.prenom:\"\")}),pickerType===\"client\"?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:\"#666\"},children:[item.passport_number||item.passport||\"\",\" \\u2022 \",formatNumberSpaceDot(item.credit||item.credit_formatted||\"\")]}):/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:\"#666\"},children:[item.poste||\"\",\" \\u2022 \",item.telephone||\"\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:()=>pickItem(item),children:locale===\"ar\"?\"Ø§Ø®ØªÙŠØ§Ø±\":\"Choose\"})})]},item.id)),pickerList.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:20,textAlign:\"center\",color:\"#666\"},children:locale===\"ar\"?\"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª\":\"No items found\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{style:styles.cancelSmall,onClick:()=>setShowPicker(false),children:locale===\"ar\"?\"Ø¥Ù„ØºØ§Ø¡\":\"Annuler\"})})]})})]});}const styles={container:{padding:\"1.25rem\",position:\"relative\",minHeight:\"100vh\",boxSizing:\"border-box\"},searchWrap:{flex:1,maxWidth:420,display:\"flex\",alignItems:\"center\",gap:8},searchInput:{width:\"100%\",padding:\"0.5rem\",borderRadius:6,border:\"1px solid #ccc\",fontSize:\"1rem\"},tableWrap:{maxHeight:\"60vh\",overflowY:\"auto\",border:\"1px solid #e0e0e0\",borderRadius:6,background:\"#fff\"},table:{width:\"100%\",borderCollapse:\"separate\",tableLayout:\"fixed\",borderSpacing:0},tableHeaderRow:{background:\"#f1f6ff\"},tableHeader:{textAlign:\"center\",padding:\"0.6rem\",borderBottom:\"1px solid #e2e8f0\",background:\"#f1f6ff\",fontWeight:700},tableRow:{cursor:\"pointer\"},tableCell:{padding:\"0.45rem 0.6rem\",borderBottom:\"1px solid #f0f4fb\",verticalAlign:\"middle\",wordBreak:\"break-word\"},drawer:{position:\"fixed\",background:\"transparent\",padding:\"1rem\",borderRadius:\"8px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.15)\",display:\"flex\",flexDirection:\"row\",gap:\"0.5rem\",zIndex:8,minWidth:0,width:\"auto\",alignItems:\"center\"},drawerButton:{display:\"flex\",alignItems:\"center\",gap:\"0.3rem\",padding:\"0.5rem 1rem\",fontSize:\"1rem\",color:\"#3477eb\",background:\"#eaf3ff\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\"},summaryBadge:{padding:\"0.4rem 0.6rem\",background:\"rgba(255,255,255,0.9)\",borderRadius:8,border:\"1px solid #e6eefb\",display:\"flex\",alignItems:\"center\",gap:8,fontWeight:700,color:\"#14355f\"},modalBadge:{padding:\"0.25rem 0.6rem\",background:\"#fff\",borderRadius:8,border:\"1px solid #eef3fb\",display:\"inline-flex\",alignItems:\"center\",gap:8,fontWeight:700,color:\"#14355f\"},modalOverlay:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:999},modal:{background:\"#fff\",padding:20,borderRadius:10,width:\"92%\",maxWidth:820,boxShadow:\"0 8px 30px rgba(0,0,0,0.2)\"},form:{display:\"flex\",flexDirection:\"column\",gap:12},row:{display:\"flex\",gap:12},label:{flex:1,display:\"flex\",flexDirection:\"column\",fontSize:14,color:\"#333\"},input:{marginTop:6,padding:\"0.5rem\",borderRadius:6,border:\"1px solid #ccc\",fontSize:14},saveButton:{padding:\"0.55rem 1rem\",background:\"#3477eb\",color:\"#fff\",border:\"none\",borderRadius:6,cursor:\"pointer\",fontWeight:700},cancelButton:{padding:\"0.45rem 0.9rem\",background:\"#f1f4f8\",color:\"#333\",border:\"none\",borderRadius:6,cursor:\"pointer\",fontWeight:700},ltr:{direction:\"ltr\",unicodeBidi:\"isolate\"},addChoicePanel:{background:\"#fff\",padding:20,borderRadius:12,width:\"84%\",maxWidth:720,boxShadow:\"0 12px 40px rgba(0,0,0,0.35)\",textAlign:\"center\"},addChoiceButtons:{display:\"flex\",gap:18,justifyContent:\"center\",marginTop:12,flexWrap:\"wrap\"},bigButton:{width:260,height:160,borderRadius:12,border:\"none\",color:\"#fff\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",gap:12,fontSize:16,cursor:\"pointer\",boxShadow:\"0 10px 30px rgba(11,30,60,0.12)\"},encaissementButton:{background:\"linear-gradient(180deg,#26a65b,#1e8f47)\"},depenseButton:{background:\"linear-gradient(180deg,#e74c3c,#c83a2b)\"},bigIcon:{width:56,height:56,borderRadius:28,background:\"rgba(255,255,255,0.15)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:28,fontWeight:900},cancelSmall:{padding:\"0.45rem 0.9rem\",background:\"#f1f4f8\",border:\"none\",borderRadius:8,cursor:\"pointer\"}};","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","formatNumberSpaceDot","value","undefined","cleaned","String","replace","n","Number","isFinite","parts","toFixed","split","join","parseNumber","s","formatDateToDisplay","iso","m","match","concat","toISODate","input","Date","yyyy","getFullYear","mm","getMonth","padStart","dd","getDate","test","CaissePage","_ref","locale","isRtl","entries","setEntries","loading","setLoading","selectedIndex","setSelectedIndex","searchQuery","setSearchQuery","showModal","setShowModal","showAddChoice","setShowAddChoice","modalMode","setModalMode","showPicker","setShowPicker","pickerType","setPickerType","pickerList","setPickerList","pickerSearch","setPickerSearch","form","setForm","id","date","heure","operation","nature","montant","solde","target_type","target_id","target_label","error","setError","totalEncaissement","setTotalEncaissement","totalDepense","setTotalDepense","soldeCaisse","setSoldeCaisse","prevSoldePreview","setPrevSoldePreview","newSoldePreview","setNewSoldePreview","TABLE_FIELDS","headersFr","headersAr","headers","natureOptions","encaissement","depense","directionStyle","direction","isEncaissementText","opText","natText","op","toLowerCase","nat","includes","fetchEntries","_window$pywebview","_window$pywebview$api","_window$pywebview2","_window$pywebview2$ap","_window$pywebview3","_window$pywebview3$ap","loader","window","pywebview","api","load_caisse","loadCaisse","get_caisse","res","normalized","map","r","_objectSpread","date_iso","Array","isArray","console","warn","e","alert","enc","dep","amt","latest","length","latestSolde","montantNum","isEnc","prev","next","filtered","filter","q","trim","openAddChoice","chooseAdd","type","now","isoDate","hh","getHours","getMinutes","operationLabel","natureDefault","openEdit","_row$id","row","handleDelete","name","confirm","_window$pywebview4","_window$pywebview4$ap","_window$pywebview5","_window$pywebview5$ap","_window$pywebview6","_window$pywebview6$ap","deleteFn","delete_caisse_entry","deleteCaisseEntry","delete_caisse","x","handleSave","_e$preventDefault","preventDefault","call","lower","prevSolde","computedSolde","payload","created_at","toISOString","_window$pywebview7","_window$pywebview7$ap","_window$pywebview8","_window$pywebview8$ap","_window$pywebview9","_window$pywebview9$ap","addFn","add_caisse_entry","addCaisseEntry","add_caisse","tmpId","_window$pywebview0","_window$pywebview0$ap","_window$pywebview1","_window$pywebview1$ap","_window$pywebview10","_window$pywebview10$a","updFn","update_caisse_entry","updateCaisseEntry","update_caisse","err","handlePrint","print","openPickerFor","natureValue","typeToOpen","_window$pywebview11","_window$pywebview11$a","_window$pywebview12","_window$pywebview12$a","fn","get_clients","load_all_clients","_window$pywebview13","_window$pywebview13$a","_window$pywebview14","_window$pywebview14$a","get_personnel","load_all_personnel","pickItem","item","label","nom","prenom","renderCell","field","idx","_row$field","isLast","baseStyle","styles","tableCell","borderRight","style","children","ltr","val","container","textAlign","display","gap","marginBottom","alignItems","searchWrap","maxWidth","marginRight","placeholder","onChange","target","searchInput","marginLeft","summaryBadge","tableWrap","table","tableHeaderRow","tableHeader","width","f","colSpan","padding","i","_row$id2","onClick","tableRow","background","cursor","drawer","left","right","bottom","drawerButton","color","modalOverlay","addChoicePanel","marginTop","addChoiceButtons","bigButton","encaissementButton","bigIcon","fontSize","fontWeight","depenseButton","justifyContent","cancelSmall","modal","flexWrap","modalBadge","onSubmit","required","opt","flex","step","saveButton","cancelButton","maxHeight","overflowY","border","borderRadius","passport","passport_number","telephone","credit","credit_formatted","borderBottom","poste","position","minHeight","boxSizing","borderCollapse","tableLayout","borderSpacing","verticalAlign","wordBreak","boxShadow","flexDirection","zIndex","minWidth","inset","unicodeBidi","height"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/caisse.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n/*\n  caisse.js\n\n  Updates:\n  - Calculates and displays totals:\n    * totalEncaissement\n    * totalDepense\n    * soldeCaisse = totalEncaissement - totalDepense\n  - In the Add / Edit modal shows:\n    * Previous solde (latest saved solde or computed 0)\n    * A live \"New solde\" computed as:\n        - encaissement: prevSolde + montant\n        - depense: prevSolde - montant\n  - New solde updates live when user changes montant, operation or nature.\n  - On save, the payload includes the new solde (backend still recomputes too).\n  - Keeps existing backend integration and pickers.\n*/\n\nfunction formatNumberSpaceDot(value) {\n  if (value === null || value === undefined || value === \"\") return \"\";\n  const cleaned = String(value).replace(/\\s+/g, \"\").replace(/,/g, \".\");\n  const n = Number(cleaned);\n  if (!Number.isFinite(n)) return String(value);\n  const parts = n.toFixed(2).split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n  return parts.join(\".\");\n}\nfunction parseNumber(value) {\n  if (value === null || value === undefined || value === \"\") return 0;\n  const s = String(value).replace(/\\s+/g, \"\").replace(/,/g, \".\");\n  const n = Number(s);\n  return Number.isFinite(n) ? n : 0;\n}\nfunction formatDateToDisplay(iso) {\n  if (!iso) return \"\";\n  const m = iso.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n  if (m) return `${m[3]}/${m[2]}/${m[1]}`;\n  return iso;\n}\nfunction toISODate(input) {\n  if (!input) return \"\";\n  if (input instanceof Date) {\n    const yyyy = input.getFullYear();\n    const mm = String(input.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(input.getDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(input)) {\n    const [dd, mm, yyyy] = input.split(\"/\");\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(input)) return input;\n  return input;\n}\n\nexport default function CaissePage({ locale = \"fr\" }) {\n  const isRtl = locale === \"ar\";\n\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const [showModal, setShowModal] = useState(false);\n  const [showAddChoice, setShowAddChoice] = useState(false);\n  const [modalMode, setModalMode] = useState(\"add\"); // add | edit\n\n  const [showPicker, setShowPicker] = useState(false);\n  const [pickerType, setPickerType] = useState(null); // \"client\" | \"personel\"\n  const [pickerList, setPickerList] = useState([]);\n  const [pickerSearch, setPickerSearch] = useState(\"\");\n\n  const [form, setForm] = useState({\n    id: null,\n    date: \"\",\n    heure: \"\",\n    operation: \"\",\n    nature: \"\",\n    montant: \"\",\n    solde: \"\",\n    target_type: null,\n    target_id: null,\n    target_label: null\n  });\n\n  const [error, setError] = useState(\"\");\n\n  // Totals\n  const [totalEncaissement, setTotalEncaissement] = useState(0);\n  const [totalDepense, setTotalDepense] = useState(0);\n  const [soldeCaisse, setSoldeCaisse] = useState(0);\n\n  // Modal running-balance preview\n  const [prevSoldePreview, setPrevSoldePreview] = useState(0);\n  const [newSoldePreview, setNewSoldePreview] = useState(0);\n\n  const TABLE_FIELDS = [\"date\", \"heure\", \"operation\", \"nature\", \"montant\", \"solde\"];\n  const headersFr = [\"#\", \"Date\", \"Heure\", \"OpÃ©ration\", \"Nature\", \"Montant\", \"Solde\"];\n  const headersAr = [\"#\", \"Ø§Ù„ØªØ§Ø±ÙŠØ®\", \"Ø§Ù„Ø³Ø§Ø¹Ø©\", \"Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\", \"Ø§Ù„Ù†ÙˆØ¹\", \"Ø§Ù„Ù…Ø¨Ù„Øº\", \"Ø§Ù„Ø±ØµÙŠØ¯\"];\n  const headers = locale === \"ar\" ? headersAr : headersFr;\n\n  const natureOptions = {\n    encaissement: [\"Paiement client\", \"Autre\"],\n    depense: [\"Paiement vol\", \"Paiement hotel\", \"Charge bureautique\", \"Paiement salaire\", \"Avance sur salaire\", \"Autre charge\"]\n  };\n\n  const directionStyle = isRtl ? { direction: \"rtl\" } : { direction: \"ltr\" };\n\n  function isEncaissementText(opText, natText) {\n    const op = (opText || \"\").toLowerCase();\n    const nat = (natText || \"\").toLowerCase();\n    if (op.includes(\"enc\") || op.includes(\"encaisse\")) return true;\n    if (nat.includes(\"enc\") || nat.includes(\"encaisse\") || nat.includes(\"paiement client\")) return true;\n    // fallback: if nature mentions client payment consider encaissement\n    if (nat.includes(\"client\") && nat.includes(\"paiement\")) return true;\n    return false;\n  }\n\n  // --- Backend integration: load entries ---\n  async function fetchEntries() {\n    setLoading(true);\n    try {\n      const loader = window.pywebview?.api?.load_caisse || window.pywebview?.api?.loadCaisse || window.pywebview?.api?.get_caisse;\n      if (typeof loader === \"function\") {\n        const res = await loader();\n        const normalized = (res || []).map(r => ({\n          ...r,\n          montant: r.montant !== undefined && r.montant !== null ? String(r.montant) : \"\",\n          solde: r.solde !== undefined && r.solde !== null ? Number(r.solde) : null,\n          date: r.date || r.date_iso || \"\"\n        }));\n        setEntries(Array.isArray(normalized) ? normalized : []);\n      } else {\n        setEntries([]);\n        console.warn(\"Backend: no load_caisse function found on window.pywebview.api\");\n      }\n    } catch (e) {\n      console.error(\"Failed to load caisse entries\", e);\n      setEntries([]);\n      alert((locale === \"ar\" ? \"Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª\" : \"Failed to load entries\"));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => { fetchEntries(); }, [locale]);\n\n  // Compute totals whenever entries change\n  useEffect(() => {\n    let enc = 0;\n    let dep = 0;\n    for (const r of entries) {\n      const amt = parseNumber(r.montant || 0);\n      if (isEncaissementText(r.operation, r.nature)) enc += amt;\n      else dep += amt;\n    }\n    setTotalEncaissement(enc);\n    setTotalDepense(dep);\n    setSoldeCaisse(enc - dep);\n\n    // update preview prevSolde to latest saved solde if exists\n    const latest = entries && entries.length > 0 ? entries[0] : null;\n    const latestSolde = latest && (latest.solde !== null && latest.solde !== undefined) ? Number(latest.solde) : 0;\n    setPrevSoldePreview(latestSolde);\n  }, [entries]);\n\n  // Update newSoldePreview whenever form relevant fields change (operation/nature/montant or prevSoldePreview)\n  useEffect(() => {\n    const montantNum = parseNumber(form.montant || 0);\n    const isEnc = isEncaissementText(form.operation, form.nature);\n    const prev = Number(prevSoldePreview || 0);\n    const next = isEnc ? prev + montantNum : prev - montantNum;\n    setNewSoldePreview(next);\n  }, [form.montant, form.operation, form.nature, prevSoldePreview]);\n\n  const filtered = entries.filter((e) => {\n    const q = searchQuery.trim().toLowerCase();\n    if (!q) return true;\n    return (\n      (e.date && e.date.toLowerCase().includes(q)) ||\n      (e.heure && e.heure.toLowerCase().includes(q)) ||\n      (e.operation && String(e.operation).toLowerCase().includes(q)) ||\n      (e.nature && String(e.nature).toLowerCase().includes(q)) ||\n      (String(e.montant || \"\").toLowerCase().includes(q)) ||\n      (String(e.solde || \"\").toLowerCase().includes(q))\n    );\n  });\n\n  function openAddChoice() { setShowAddChoice(true); }\n\n  function chooseAdd(type) {\n    setShowAddChoice(false);\n    setModalMode(\"add\");\n    const now = new Date();\n    const isoDate = toISODate(now);\n    const hh = String(now.getHours()).padStart(2, \"0\");\n    const mm = String(now.getMinutes()).padStart(2, \"0\");\n    const operationLabel = type === \"encaissement\" ? (locale === \"ar\" ? \"Encaissement\" : \"Encaissement\") : (locale === \"ar\" ? \"DÃ©pense\" : \"DÃ©pense\");\n    const natureDefault = type === \"encaissement\" ? natureOptions.encaissement[0] : natureOptions.depense[0];\n\n    // set prevSoldePreview from latest entry\n    const latest = entries && entries.length > 0 ? entries[0] : null;\n    const latestSolde = latest && (latest.solde !== null && latest.solde !== undefined) ? Number(latest.solde) : 0;\n    setPrevSoldePreview(latestSolde);\n\n    setForm({\n      id: null,\n      date: isoDate,\n      heure: `${hh}:${mm}`,\n      operation: operationLabel,\n      nature: natureDefault,\n      montant: \"\",\n      solde: \"\",\n      target_type: null,\n      target_id: null,\n      target_label: null\n    });\n    setError(\"\");\n    setShowModal(true);\n  }\n\n  function openEdit() {\n    if (selectedIndex === null || filtered[selectedIndex] === undefined) {\n      alert(locale === \"ar\" ? \"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø³Ø·Ø±.\" : \"Please select a row.\");\n      return;\n    }\n    const row = filtered[selectedIndex];\n    setModalMode(\"edit\");\n\n    // prevSoldePreview should be the latest solde BEFORE this row.\n    // For simplicity we use the latest saved solde (entries[0]) â€” if editing older row, preview is approximate.\n    const latest = entries && entries.length > 0 ? entries[0] : null;\n    const latestSolde = latest && (latest.solde !== null && latest.solde !== undefined) ? Number(latest.solde) : 0;\n    setPrevSoldePreview(latestSolde);\n\n    setForm({\n      id: row.id ?? null,\n      date: row.date ? toISODate(row.date) : \"\",\n      heure: row.heure || \"\",\n      operation: row.operation || \"\",\n      nature: row.nature || \"\",\n      montant: row.montant !== undefined && row.montant !== null ? String(row.montant) : \"\",\n      solde: row.solde !== undefined && row.solde !== null ? String(row.solde) : \"\",\n      target_type: row.target_type || null,\n      target_id: row.target_id || null,\n      target_label: row.target_label || null\n    });\n    setError(\"\");\n    setShowModal(true);\n  }\n\n  async function handleDelete() {\n    if (selectedIndex === null || filtered[selectedIndex] === undefined) {\n      alert(locale === \"ar\" ? \"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø³Ø·Ø±.\" : \"Please select a row.\");\n      return;\n    }\n    const row = filtered[selectedIndex];\n    const name = `${row.date || \"\"} ${row.operation || \"\"}`;\n    if (!window.confirm((locale === \"ar\" ? \"Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ \" : \"Delete entry \") + name + \"?\")) return;\n    try {\n      const deleteFn = window.pywebview?.api?.delete_caisse_entry || window.pywebview?.api?.deleteCaisseEntry || window.pywebview?.api?.delete_caisse;\n      if (typeof deleteFn === \"function\") {\n        await deleteFn(row.id);\n        await fetchEntries();\n        setSelectedIndex(null);\n      } else {\n        setEntries(prev => prev.filter(x => x.id !== row.id));\n        setSelectedIndex(null);\n        alert((locale === \"ar\" ? \"Ù…Ù„Ø§Ø­Ø¸Ø©: ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø­Ø°Ù ØºÙŠØ± Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© â€” ØªÙ… Ø§Ù„Ø­Ø°Ù Ù…Ø­Ù„ÙŠÙ‹Ø§.\" : \"Note: delete not available in backend â€” removed locally.\"));\n      }\n    } catch (e) {\n      console.error(\"delete failed\", e);\n      alert((locale === \"ar\" ? \"ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù\" : \"Delete failed\"));\n    }\n  }\n\n  async function handleSave(e) {\n    e?.preventDefault?.();\n    setError(\"\");\n    if (!form.date || !form.heure || !form.operation || !form.nature || form.montant === \"\") {\n      setError(locale === \"ar\" ? \"ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\" : \"Please fill required fields\");\n      return;\n    }\n\n    const lower = String(form.nature || \"\").toLowerCase();\n    if (lower.includes(\"client\")) {\n      if (!form.target_type || form.target_type !== \"client\" || !form.target_id) {\n        setError(locale === \"ar\" ? \"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„\" : \"Please choose a client\");\n        return;\n      }\n    }\n    if (lower.includes(\"salaire\") || lower.includes(\"avance\")) {\n      if (!form.target_type || form.target_type !== \"personel\" || !form.target_id) {\n        setError(locale === \"ar\" ? \"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù\" : \"Please choose a personnel\");\n        return;\n      }\n    }\n\n    // determine prevSolde based on latest saved entry\n    let prevSolde = 0;\n    if (entries && entries.length > 0) {\n      const latest = entries[0];\n      prevSolde = Number(latest.solde || 0);\n    }\n    const montantNum = parseNumber(form.montant);\n    const isEnc = isEncaissementText(form.operation, form.nature);\n    const computedSolde = isEnc ? prevSolde + montantNum : prevSolde - montantNum;\n\n    const payload = {\n      date: toISODate(form.date),\n      heure: form.heure,\n      operation: form.operation,\n      nature: form.nature,\n      montant: montantNum,\n      solde: computedSolde,\n      target_type: form.target_type,\n      target_id: form.target_id,\n      target_label: form.target_label,\n      created_at: new Date().toISOString()\n    };\n\n    try {\n      if (modalMode === \"add\") {\n        const addFn = window.pywebview?.api?.add_caisse_entry || window.pywebview?.api?.addCaisseEntry || window.pywebview?.api?.add_caisse;\n        if (typeof addFn === \"function\") {\n          await addFn(payload);\n          await fetchEntries();\n        } else {\n          const tmpId = Date.now();\n          setEntries(prev => [{ ...payload, id: tmpId }, ...prev]);\n          alert((locale === \"ar\" ? \"Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªÙˆÙØ± add_caisse_entry.\" : \"Note: added locally because backend has no add_caisse_entry.\"));\n        }\n      } else {\n        if (!form.id) {\n          setError(\"Missing id for update\");\n          return;\n        }\n        const updFn = window.pywebview?.api?.update_caisse_entry || window.pywebview?.api?.updateCaisseEntry || window.pywebview?.api?.update_caisse;\n        if (typeof updFn === \"function\") {\n          await updFn(form.id, payload);\n          await fetchEntries();\n        } else {\n          setEntries(prev => prev.map(x => (x.id === form.id ? { ...x, ...payload } : x)));\n          alert((locale === \"ar\" ? \"Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­Ù„ÙŠ Ù„Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªØ¯Ø¹Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ«.\" : \"Note: updated locally because backend update is not available.\"));\n        }\n      }\n      setShowModal(false);\n    } catch (err) {\n      console.error(\"save error\", err);\n      setError(locale === \"ar\" ? \"Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸\" : \"Save error\");\n    }\n  }\n\n  function handlePrint() { window.print(); }\n\n  async function openPickerFor(natureValue) {\n    const lower = String(natureValue || \"\").toLowerCase();\n    let typeToOpen = null;\n    if (lower.includes(\"client\")) typeToOpen = \"client\";\n    else if (lower.includes(\"salaire\") || lower.includes(\"avance\")) typeToOpen = \"personel\";\n    if (!typeToOpen) return;\n\n    const type = typeToOpen;\n    setPickerType(type);\n    setPickerSearch(\"\");\n    setShowPicker(true);\n\n    try {\n      if (type === \"client\") {\n        const fn = window.pywebview?.api?.get_clients || window.pywebview?.api?.load_all_clients;\n        if (typeof fn === \"function\") {\n          const res = await fn();\n          setPickerList(Array.isArray(res) ? res : []);\n        } else {\n          setPickerList([]);\n          alert((locale === \"ar\" ? \"Ø®Ù„ÙÙŠØ©: get_clients ØºÙŠØ± Ù…ØªØ§Ø­Ø©.\" : \"Backend: get_clients not available.\"));\n        }\n      } else {\n        const fn = window.pywebview?.api?.get_personnel || window.pywebview?.api?.load_all_personnel;\n        if (typeof fn === \"function\") {\n          const res = await fn();\n          setPickerList(Array.isArray(res) ? res : []);\n        } else {\n          setPickerList([]);\n          alert((locale === \"ar\" ? \"Ø®Ù„ÙÙŠØ©: get_personnel ØºÙŠØ± Ù…ØªØ§Ø­Ø©.\" : \"Backend: get_personnel not available.\"));\n        }\n      }\n    } catch (e) {\n      console.error(\"picker fetch failed\", e);\n      setPickerList([]);\n      alert((locale === \"ar\" ? \"ÙØ´Ù„ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯\" : \"Failed to fetch picker list\"));\n    }\n  }\n\n  useEffect(() => {\n    const lower = String(form.nature || \"\").toLowerCase();\n    if (!form.nature) return;\n    if (lower.includes(\"client\") || lower.includes(\"salaire\") || lower.includes(\"avance\")) {\n      openPickerFor(form.nature);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [form.nature]);\n\n  function pickItem(item) {\n    if (!item) return;\n    if (pickerType === \"client\") {\n      const label = `${item.nom || \"\"}${item.prenom ? \" \" + item.prenom : \"\"}`;\n      setForm(prev => ({ ...prev, target_type: \"client\", target_id: item.id, target_label: label }));\n    } else if (pickerType === \"personel\") {\n      const label = `${item.nom || \"\"}${item.prenom ? \" \" + item.prenom : \"\"}`;\n      setForm(prev => ({ ...prev, target_type: \"personel\", target_id: item.id, target_label: label }));\n    }\n    setShowPicker(false);\n  }\n\n  function renderCell(row, field, idx) {\n    const isLast = idx === TABLE_FIELDS.length - 1;\n    const baseStyle = { ...styles.tableCell, borderRight: isLast ? \"none\" : \"1px solid #e6eefb\" };\n    if (field === \"date\") return <td key={field} style={baseStyle}>{formatDateToDisplay(row.date) || \"-\"}</td>;\n    if (field === \"montant\") return <td key={field} style={baseStyle}><span style={styles.ltr}>{formatNumberSpaceDot(row[field]) || \"-\"}</span></td>;\n    if (field === \"solde\") {\n      const s = row[field];\n      const val = (s === null || s === undefined || s === \"\") ? 0 : s;\n      return <td key={field} style={baseStyle}><span style={styles.ltr}>{formatNumberSpaceDot(val)}</span></td>;\n    }\n    if (field === \"nature\") return <td key={field} style={baseStyle}>{row[field]}{row.target_label ? ` â€” ${row.target_label}` : \"\"}</td>;\n    return <td key={field} style={baseStyle}>{row[field] ?? \"-\"}</td>;\n  }\n\n  return (\n    <div style={{ ...styles.container, ...directionStyle }}>\n      <h2 style={{ textAlign: \"center\" }}>{locale === \"ar\" ? \"Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\" : \"Caisse\"}</h2>\n\n      <div style={{ display: \"flex\", gap: 12, marginBottom: 12, alignItems: \"center\" }}>\n        <div style={{ ...styles.searchWrap, maxWidth: 420 }}>\n          <span style={{ marginRight: 8 }}>ðŸ”</span>\n          <input placeholder={locale === \"ar\" ? \"Ø¨Ø­Ø«...\" : \"Search...\"} value={searchQuery} onChange={e => { setSearchQuery(e.target.value); setSelectedIndex(null); }} style={styles.searchInput} />\n        </div>\n\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8, alignItems: \"center\" }}>\n          <div style={styles.summaryBadge}>\n            ðŸ’° {locale === \"ar\" ? \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„\" : \"Total Encaissement\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(totalEncaissement)}</strong>\n          </div>\n          <div style={styles.summaryBadge}>\n            ðŸ§¾ {locale === \"ar\" ? \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª\" : \"Total Depense\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(totalDepense)}</strong>\n          </div>\n          <div style={styles.summaryBadge}>\n            âš–ï¸ {locale === \"ar\" ? \"Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\" : \"Solde Caisse\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(soldeCaisse)}</strong>\n          </div>\n        </div>\n      </div>\n\n      <div style={styles.tableWrap}>\n        <table style={styles.table}>\n          <thead>\n            <tr style={styles.tableHeaderRow}>\n              <th style={{ ...styles.tableHeader, borderRight: \"1px solid #e6eefb\", width: 36 }}>#</th>\n              {TABLE_FIELDS.map((f, idx) => <th key={f} style={{ ...styles.tableHeader, borderRight: idx === TABLE_FIELDS.length - 1 ? \"none\" : \"1px solid #e6eefb\" }}>{headers[idx + 1]}</th>)}\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? <tr><td colSpan={1 + TABLE_FIELDS.length} style={{ padding: 20, textAlign: \"center\" }}>{locale === \"ar\" ? \"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...\" : \"Loading...\"}</td></tr>\n              : filtered.length === 0 ? <tr><td colSpan={1 + TABLE_FIELDS.length} style={{ padding: 20, textAlign: \"center\" }}>{locale === \"ar\" ? \"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª\" : \"No entries\"}</td></tr>\n              : filtered.map((row, i) => (\n                <tr key={row.id ?? i} onClick={() => setSelectedIndex(i)} style={{ ...styles.tableRow, background: i === selectedIndex ? \"#cce5ff\" : i % 2 === 0 ? \"#fff\" : \"#f4f8ff\", cursor: \"pointer\" }}>\n                  <td style={{ ...styles.tableCell, width: 36 }}>{i + 1}</td>\n                  {TABLE_FIELDS.map((f, idx) => renderCell(row, f, idx))}\n                </tr>\n              ))\n            }\n          </tbody>\n        </table>\n      </div>\n\n      <div style={{ ...styles.drawer, left: 20, right: \"unset\", bottom: 28 }}>\n        <button style={styles.drawerButton} onClick={openAddChoice}>{locale === \"ar\" ? \"âž• Ø¥Ø¶Ø§ÙØ©\" : \"âž• Ajouter\"}</button>\n        <button style={styles.drawerButton} onClick={openEdit}>{locale === \"ar\" ? \"âœï¸ ØªØ¹Ø¯ÙŠÙ„\" : \"âœï¸ Modifier\"}</button>\n        <button style={styles.drawerButton} onClick={handleDelete}>{locale === \"ar\" ? \"ðŸ—‘ï¸ Ø­Ø°Ù\" : \"ðŸ—‘ï¸ Supprimer\"}</button>\n      </div>\n\n      <div style={{ ...styles.drawer, right: 20, left: \"unset\", bottom: 28 }}>\n        <button style={{ ...styles.drawerButton, background: \"#3477eb\", color: \"#fff\" }} onClick={handlePrint}>{locale === \"ar\" ? \"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\" : \"ðŸ–¨ï¸ Impression\"}</button>\n      </div>\n\n      {/* Add Choice */}\n      {showAddChoice && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.addChoicePanel, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3 style={{ marginTop: 0 }}>{locale === \"ar\" ? \"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ©\" : \"Choisir le type\"}</h3>\n            <div style={styles.addChoiceButtons}>\n              <button style={{ ...styles.bigButton, ...styles.encaissementButton }} onClick={() => chooseAdd(\"encaissement\")}>\n                <div style={styles.bigIcon}>ï¼‹</div>\n                <div style={{ fontSize: 18, fontWeight: 800 }}>{locale === \"ar\" ? \"ØªØ­ØµÙŠÙ„\" : \"Encaissement\"}</div>\n              </button>\n              <button style={{ ...styles.bigButton, ...styles.depenseButton }} onClick={() => chooseAdd(\"depense\")}>\n                <div style={styles.bigIcon}>âˆ’</div>\n                <div style={{ fontSize: 18, fontWeight: 800 }}>{locale === \"ar\" ? \"Ù…ØµØ±ÙˆÙ\" : \"DÃ©pense\"}</div>\n              </button>\n            </div>\n            <div style={{ display: \"flex\", justifyContent: \"flex-end\", marginTop: 12 }}>\n              <button style={styles.cancelSmall} onClick={() => setShowAddChoice(false)}>{locale === \"ar\" ? \"Ø¥Ù„ØºØ§Ø¡\" : \"Annuler\"}</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add/Edit Modal */}\n      {showModal && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.modal, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3>{modalMode === \"add\" ? (locale === \"ar\" ? \"Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„\" : \"Ajouter entrÃ©e\") : (locale === \"ar\" ? \"ØªØ¹Ø¯ÙŠÙ„ Ø³Ø¬Ù„\" : \"Modifier entrÃ©e\")}</h3>\n\n            {/* Totals summary inside modal */}\n            <div style={{ display: \"flex\", gap: 12, marginBottom: 8, alignItems: \"center\", flexWrap: \"wrap\" }}>\n              <div style={styles.modalBadge}>ðŸ’° {locale === \"ar\" ? \"ØªØ­ØµÙŠÙ„ Ø¥Ø¬Ù…Ø§Ù„ÙŠ\" : \"Total Encaissement\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(totalEncaissement)}</strong></div>\n              <div style={styles.modalBadge}>ðŸ§¾ {locale === \"ar\" ? \"Ù…ØµØ±ÙˆÙ Ø¥Ø¬Ù…Ø§Ù„ÙŠ\" : \"Total Depense\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(totalDepense)}</strong></div>\n              <div style={styles.modalBadge}>âš–ï¸ {locale === \"ar\" ? \"Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²ÙŠÙ†Ø©\" : \"Solde Caisse\"}: <strong style={{ marginLeft: 6 }}>{formatNumberSpaceDot(soldeCaisse)}</strong></div>\n            </div>\n\n            <form onSubmit={handleSave} style={styles.form}>\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„ØªØ§Ø±ÙŠØ®\" : \"Date\"}\n                  <input type=\"date\" value={form.date ? toISODate(form.date) : \"\"} onChange={e => setForm(s => ({ ...s, date: e.target.value }))} style={styles.input} required />\n                </label>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„Ø³Ø§Ø¹Ø©\" : \"Heure\"}\n                  <input type=\"time\" value={form.heure || \"\"} onChange={e => setForm(s => ({ ...s, heure: e.target.value }))} style={styles.input} required />\n                </label>\n              </div>\n\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„Ø¹Ù…Ù„ÙŠØ©\" : \"OpÃ©ration\"}\n                  <input value={form.operation || \"\"} onChange={e => setForm(s => ({ ...s, operation: e.target.value }))} style={styles.input} required />\n                </label>\n\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„Ù†ÙˆØ¹\" : \"Nature\"}\n                  <select value={form.nature || \"\"} onChange={e => setForm(s => ({ ...s, nature: e.target.value }))} style={styles.input} required>\n                    { (String(form.operation || \"\").toLowerCase().includes(\"enc\") || String(form.operation || \"\").toLowerCase().includes(\"encaissement\"))\n                      ? natureOptions.encaissement.map(opt => <option key={opt} value={opt}>{opt}</option>)\n                      : natureOptions.depense.map(opt => <option key={opt} value={opt}>{opt}</option>)\n                    }\n                  </select>\n                </label>\n              </div>\n\n              {(String(form.nature || \"\").toLowerCase().includes(\"client\") ||\n                String(form.nature || \"\").toLowerCase().includes(\"salaire\") ||\n                String(form.nature || \"\").toLowerCase().includes(\"avance\")) && (\n                <div style={{ marginTop: 6, display: \"flex\", gap: 12, alignItems: \"center\" }}>\n                  <div style={{ flex: 1 }}>\n                    <div style={{ fontSize: 13, color: \"#666\" }}>{locale === \"ar\" ? \"Ø§Ù„Ù…Ø­Ø¯Ù‘ÙŽØ¯\" : \"Selected\"}</div>\n                    <div style={{ fontWeight: 700 }}>{form.target_label || (locale === \"ar\" ? \"Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯\" : \"None selected\")}</div>\n                  </div>\n                  <div>\n                    <button type=\"button\" style={styles.drawerButton} onClick={() => openPickerFor(form.nature)}>{locale === \"ar\" ? \"Ø§Ø®ØªÙŠØ§Ø±\" : \"Choose\"}</button>\n                  </div>\n                </div>\n              )}\n\n              <div style={styles.row}>\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„Ù…Ø¨Ù„Øº\" : \"Montant\"}\n                  <input value={form.montant || \"\"} onChange={e => setForm(s => ({ ...s, montant: e.target.value }))} style={styles.input} type=\"number\" step=\"0.01\" required />\n                </label>\n\n                <label style={styles.label}>\n                  {locale === \"ar\" ? \"Ø§Ù„Ø±ØµÙŠØ¯ (Ø¹Ø±Ø¶ ÙÙ‚Ø·)\" : \"Previous Solde (preview)\"}\n                  <div style={{ ...styles.input, padding: \"0.45rem 0.6rem\", background: \"#fafafa\" }}>\n                    {formatNumberSpaceDot(prevSoldePreview)}\n                  </div>\n                </label>\n              </div>\n\n              <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\n                <div style={{ flex: 1 }}>\n                  <div style={{ fontSize: 13, color: \"#666\" }}>{locale === \"ar\" ? \"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø¹Ø§ÙŠÙ†Ø©)\" : \"New Solde (preview)\"}</div>\n                  <div style={{ fontWeight: 800, fontSize: 16 }}>{formatNumberSpaceDot(newSoldePreview)}</div>\n                </div>\n\n                <div style={{ width: 240 }}>\n                  <label style={{ fontSize: 13, color: \"#666\" }}>{locale === \"ar\" ? \"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø­ÙØ¸Ù‡\" : \"Solde to be saved\"}</label>\n                  <div style={{ ...styles.input, padding: \"0.45rem 0.6rem\", background: \"#fff\", textAlign: \"center\" }}>\n                    {formatNumberSpaceDot(newSoldePreview)}\n                  </div>\n                </div>\n              </div>\n\n              {error && <div style={{ color: \"red\" }}>{error}</div>}\n\n              <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: 8, marginTop: 12 }}>\n                <button type=\"submit\" style={styles.saveButton}>{locale === \"ar\" ? \"Ø­ÙØ¸\" : \"Enregistrer\"}</button>\n                <button type=\"button\" style={styles.cancelButton} onClick={() => setShowModal(false)}>{locale === \"ar\" ? \"Ø¥Ù„ØºØ§Ø¡\" : \"Annuler\"}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Picker Modal */}\n      {showPicker && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.modal, width: \"88%\", maxWidth: 860, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3>{pickerType === \"client\" ? (locale === \"ar\" ? \"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„\" : \"Select client\") : (locale === \"ar\" ? \"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù\" : \"Select personnel\")}</h3>\n            <div style={{ marginTop: 8, marginBottom: 8 }}>\n              <input placeholder={locale === \"ar\" ? \"Ø¨Ø­Ø«...\" : \"Search...\"} value={pickerSearch} onChange={e => setPickerSearch(e.target.value)} style={styles.searchInput} />\n            </div>\n            <div style={{ maxHeight: 360, overflowY: \"auto\", border: \"1px solid #eef3fb\", borderRadius: 6 }}>\n              {pickerList\n                .filter(item => {\n                  const q = pickerSearch.trim().toLowerCase();\n                  if (!q) return true;\n                  const name = `${item.nom || \"\"} ${(item.prenom || \"\")}`.toLowerCase();\n                  const passport = (item.passport_number || item.passport || \"\").toLowerCase();\n                  const telephone = (item.telephone || \"\").toLowerCase();\n                  const credit = String(item.credit || item.credit_formatted || \"\");\n                  return name.includes(q) || passport.includes(q) || telephone.includes(q) || credit.includes(q);\n                })\n                .map(item => (\n                <div key={item.id} style={{ padding: 10, borderBottom: \"1px solid #f2f6ff\", display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                  <div>\n                    <div style={{ fontWeight: 700 }}>{(item.nom || \"\") + (item.prenom ? \" \" + item.prenom : \"\")}</div>\n                    {pickerType === \"client\" ? (\n                      <div style={{ fontSize: 12, color: \"#666\" }}>{(item.passport_number || item.passport || \"\")} â€¢ {formatNumberSpaceDot(item.credit || item.credit_formatted || \"\")}</div>\n                    ) : (\n                      <div style={{ fontSize: 12, color: \"#666\" }}>{item.poste || \"\"} â€¢ {item.telephone || \"\"}</div>\n                    )}\n                  </div>\n                  <div>\n                    <button style={styles.drawerButton} onClick={() => pickItem(item)}>{locale === \"ar\" ? \"Ø§Ø®ØªÙŠØ§Ø±\" : \"Choose\"}</button>\n                  </div>\n                </div>\n              ))}\n              {pickerList.length === 0 && <div style={{ padding: 20, textAlign: \"center\", color: \"#666\" }}>{locale === \"ar\" ? \"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª\" : \"No items found\"}</div>}\n            </div>\n            <div style={{ display: \"flex\", justifyContent: \"flex-end\", marginTop: 12 }}>\n              <button style={styles.cancelSmall} onClick={() => setShowPicker(false)}>{locale === \"ar\" ? \"Ø¥Ù„ØºØ§Ø¡\" : \"Annuler\"}</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n\nconst styles = {\n  container: { padding: \"1.25rem\", position: \"relative\", minHeight: \"100vh\", boxSizing: \"border-box\" },\n  searchWrap: { flex: 1, maxWidth: 420, display: \"flex\", alignItems: \"center\", gap: 8 },\n  searchInput: { width: \"100%\", padding: \"0.5rem\", borderRadius: 6, border: \"1px solid #ccc\", fontSize: \"1rem\" },\n  tableWrap: { maxHeight: \"60vh\", overflowY: \"auto\", border: \"1px solid #e0e0e0\", borderRadius: 6, background: \"#fff\" },\n  table: { width: \"100%\", borderCollapse: \"separate\", tableLayout: \"fixed\", borderSpacing: 0 },\n  tableHeaderRow: { background: \"#f1f6ff\" },\n  tableHeader: { textAlign: \"center\", padding: \"0.6rem\", borderBottom: \"1px solid #e2e8f0\", background: \"#f1f6ff\", fontWeight: 700 },\n  tableRow: { cursor: \"pointer\" },\n  tableCell: { padding: \"0.45rem 0.6rem\", borderBottom: \"1px solid #f0f4fb\", verticalAlign: \"middle\", wordBreak: \"break-word\" },\n  drawer: { position: \"fixed\", background: \"transparent\", padding: \"1rem\", borderRadius: \"8px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\", display: \"flex\", flexDirection: \"row\", gap: \"0.5rem\", zIndex: 8, minWidth: 0, width: \"auto\", alignItems: \"center\" },\n  drawerButton: { display: \"flex\", alignItems: \"center\", gap: \"0.3rem\", padding: \"0.5rem 1rem\", fontSize: \"1rem\", color: \"#3477eb\", background: \"#eaf3ff\", border: \"none\", borderRadius: \"4px\", cursor: \"pointer\" },\n  summaryBadge: { padding: \"0.4rem 0.6rem\", background: \"rgba(255,255,255,0.9)\", borderRadius: 8, border: \"1px solid #e6eefb\", display: \"flex\", alignItems: \"center\", gap: 8, fontWeight: 700, color: \"#14355f\" },\n  modalBadge: { padding: \"0.25rem 0.6rem\", background: \"#fff\", borderRadius: 8, border: \"1px solid #eef3fb\", display: \"inline-flex\", alignItems: \"center\", gap: 8, fontWeight: 700, color: \"#14355f\" },\n  modalOverlay: { position: \"fixed\", inset: 0, background: \"rgba(0,0,0,0.45)\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", zIndex: 999 },\n  modal: { background: \"#fff\", padding: 20, borderRadius: 10, width: \"92%\", maxWidth: 820, boxShadow: \"0 8px 30px rgba(0,0,0,0.2)\" },\n  form: { display: \"flex\", flexDirection: \"column\", gap: 12 },\n  row: { display: \"flex\", gap: 12 },\n  label: { flex: 1, display: \"flex\", flexDirection: \"column\", fontSize: 14, color: \"#333\" },\n  input: { marginTop: 6, padding: \"0.5rem\", borderRadius: 6, border: \"1px solid #ccc\", fontSize: 14 },\n  saveButton: { padding: \"0.55rem 1rem\", background: \"#3477eb\", color: \"#fff\", border: \"none\", borderRadius: 6, cursor: \"pointer\", fontWeight: 700 },\n  cancelButton: { padding: \"0.45rem 0.9rem\", background: \"#f1f4f8\", color: \"#333\", border: \"none\", borderRadius: 6, cursor: \"pointer\", fontWeight: 700 },\n  ltr: { direction: \"ltr\", unicodeBidi: \"isolate\" },\n  addChoicePanel: { background: \"#fff\", padding: 20, borderRadius: 12, width: \"84%\", maxWidth: 720, boxShadow: \"0 12px 40px rgba(0,0,0,0.35)\", textAlign: \"center\" },\n  addChoiceButtons: { display: \"flex\", gap: 18, justifyContent: \"center\", marginTop: 12, flexWrap: \"wrap\" },\n  bigButton: { width: 260, height: 160, borderRadius: 12, border: \"none\", color: \"#fff\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", gap: 12, fontSize: 16, cursor: \"pointer\", boxShadow: \"0 10px 30px rgba(11,30,60,0.12)\" },\n  encaissementButton: { background: \"linear-gradient(180deg,#26a65b,#1e8f47)\" },\n  depenseButton: { background: \"linear-gradient(180deg,#e74c3c,#c83a2b)\" },\n  bigIcon: { width: 56, height: 56, borderRadius: 28, background: \"rgba(255,255,255,0.15)\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: 28, fontWeight: 900 },\n  cancelSmall: { padding: \"0.45rem 0.9rem\", background: \"#f1f4f8\", border: \"none\", borderRadius: 8, cursor: \"pointer\" }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}