{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// hystorique.js\n// Historique modal — updates per user request:\n// - \"avance\" is shown only if it exists in the pointage record for that month (otherwise 0).\n// - Arabic numbers show like: \"5 000.00 دج\" (space thousands, dot decimal, currency suffix).\n// - When Arabic (RTL) the name columns are inverted: header order and values are swapped (prenom/nom).\n// - The top area (header with X close and the yearly summary) remains visible while scrolling the month tables.\n// - Exposes openHistorique(detail) and listens to openHystorique/openHistorique events.\nimport React,{useEffect,useState}from\"react\";import ReactDOM from\"react-dom/client\";/* ---------------- Helpers ---------------- */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function monthLabel(i){let locale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"fr\";const monthsFr=[\"Jan\",\"Fév\",\"Mar\",\"Avr\",\"Mai\",\"Juin\",\"Juil\",\"Août\",\"Sep\",\"Oct\",\"Nov\",\"Déc\"];const monthsAr=[\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];return locale===\"ar\"?monthsAr[i]:monthsFr[i];}function formatNumberSpaceDot(value){if(value===null||value===undefined||value===\"\")return\"\";const cleaned=String(value).replace(/\\s+/g,\"\").replace(\",\",\".\");const n=Number(cleaned);if(!Number.isFinite(n))return String(value);const parts=n.toFixed(2).split(\".\");parts[0]=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\" \");return parts.join(\".\");}function safeNum(v){if(v===null||v===undefined||v===\"\")return 0;const n=Number(String(v).toString().replace(/\\s+/g,\"\").replace(\",\",\".\"));return Number.isFinite(n)?n:0;}/* ---------------- Component ---------------- */function HistoriqueModal(_ref){let{detail={},onClose}=_ref;const locale=detail.locale||\"fr\";const isRtl=locale===\"ar\";const currencySuffix=locale===\"ar\"?\" دج\":\" DZD\";const[year,setYear]=useState(detail.year&&Number(detail.year)||new Date().getFullYear());const[personnel,setPersonnel]=useState([]);const[loading,setLoading]=useState(false);const[dataByPerson,setDataByPerson]=useState({});// { personId: [records] } records for the year\nconst[error,setError]=useState(null);// Load personnel list on mount\nuseEffect(()=>{let mounted=true;async function loadPersonnel(){try{setLoading(true);const ppl=window.pywebview&&window.pywebview.api&&window.pywebview.api.get_personnel?await window.pywebview.api.get_personnel():[];if(!mounted)return;setPersonnel(Array.isArray(ppl)?ppl:[]);}catch(e){console.warn(\"hystorique: failed to load personnel\",e);if(mounted)setPersonnel([]);}finally{if(mounted)setLoading(false);}}loadPersonnel();return()=>{mounted=false;};},[]);// Load pointage for each person for the selected year\nuseEffect(()=>{let mounted=true;async function loadAllPointage(){setLoading(true);setError(null);const map={};try{for(const p of personnel){try{// get_pointage(personnel_id, year, null) -> all months for that person/year\nconst recs=window.pywebview&&window.pywebview.api&&window.pywebview.api.get_pointage?await window.pywebview.api.get_pointage(p.id,year,null):[];map[p.id]=Array.isArray(recs)?recs:[];}catch(e){console.warn(\"hystorique: failed to load pointage for person\",p.id,e);map[p.id]=[];}}if(!mounted)return;setDataByPerson(map);}catch(e){console.error(\"hystorique: unexpected error\",e);if(mounted)setError(\"Failed to load historique.\");}finally{if(mounted)setLoading(false);}}if(personnel.length>0){loadAllPointage();}else{setDataByPerson({});}return()=>{mounted=false;};},[personnel,year]);function prevYear(){setYear(y=>y-1);}function nextYear(){setYear(y=>y+1);}function onYearChange(e){const v=Number(e.target.value);if(!Number.isNaN(v))setYear(v);}// For a given person and month return computed values\nfunction computeMonthValues(p,month){// month: 1..12\nconst recs=dataByPerson[p.id]||[];const rec=recs.find(r=>Number(r.month)===Number(month))||null;const days=rec?safeNum(rec.days_present):0;const salaryPerDay=rec?safeNum(rec.salary_per_day):0;const gross=salaryPerDay*days;// avance ONLY from the month record if it exists (otherwise 0)\nconst avance=rec?safeNum(rec.avance):0;const net=rec&&\"salary_due\"in rec?safeNum(rec.salary_due):gross-avance;return{days,gross,avance,net};}// Totals across all personnel for a month\nfunction computeMonthTotals(month){let days=0,gross=0,avance=0,net=0;for(const p of personnel){const v=computeMonthValues(p,month);days+=safeNum(v.days);gross+=safeNum(v.gross);avance+=safeNum(v.avance);net+=safeNum(v.net);}return{days,gross,avance,net};}// Yearly totals (sum of monthly totals)\nfunction computeYearlyTotals(){let days=0,gross=0,avance=0,net=0;for(let m=1;m<=12;m++){const t=computeMonthTotals(m);days+=safeNum(t.days);gross+=safeNum(t.gross);avance+=safeNum(t.avance);net+=safeNum(t.net);}return{days,gross,avance,net};}const yearlyTotals=computeYearlyTotals();// Decide header labels order based on locale (nom/prenom order swap for Arabic)\nconst nameLabelFirst=isRtl?locale===\"ar\"?\"اللقب\":\"Prénom\":locale===\"ar\"?\"الاسم\":\"Nom\";const nameLabelSecond=isRtl?locale===\"ar\"?\"الاسم\":\"Nom\":locale===\"ar\"?\"اللقب\":\"Prénom\";return/*#__PURE__*/_jsx(\"div\",{style:styles.overlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modal),{},{direction:isRtl?\"rtl\":\"ltr\"}),children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:isRtl?\"سجل الحضور السنوي\":\"Historique \\u2014 \".concat(year)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:prevYear,style:styles.smallButton,children:\"\\u25C0\"}),/*#__PURE__*/_jsx(\"input\",{value:year,onChange:onYearChange,style:styles.yearInput}),/*#__PURE__*/_jsx(\"button\",{onClick:nextYear,style:styles.smallButton,children:\"\\u25B6\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:styles.closeButton,children:\"\\u2716\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryTop,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:isRtl?\"إجمالي الأيام (سنة)\":\"Total Jours (année)\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.summaryValue,children:yearlyTotals.days})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:isRtl?\"إجمالي الرواتب\":\"Salaire brut (année)\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryValue,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(yearlyTotals.gross)}),currencySuffix]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:isRtl?\"إجمالي السلفة\":\"Avance (année)\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryValue,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(yearlyTotals.avance)}),currencySuffix]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryItem,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.summaryLabel,children:isRtl?\"الصافي\":\"Net à payer (année)\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.summaryValue),{},{color:yearlyTotals.net<0?\"#c00\":\"#14355f\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(yearlyTotals.net)}),currencySuffix]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.contentWrap,children:loading?/*#__PURE__*/_jsx(\"div\",{style:{padding:30,textAlign:\"center\"},children:isRtl?\"جاري التحميل...\":\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\",padding:16},children:error}):/*#__PURE__*/_jsx(\"div\",{style:{marginTop:6,display:\"grid\",gap:18,paddingBottom:16},children:Array.from({length:12}).map((_,idx)=>{const m=idx+1;const monthTotals=computeMonthTotals(m);return/*#__PURE__*/_jsxs(\"div\",{style:styles.monthBlock,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.monthHeaderRow,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.monthTitle,children:[monthLabel(idx,locale),\" \",year]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.monthTotals,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:isRtl?\"الأيام\":\"Jrs\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatValue,children:monthTotals.days})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:isRtl?\"الراتب\":\"Salaire\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStatValue,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.gross)}),currencySuffix]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:isRtl?\"السلفة\":\"Avance\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStatValue,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.avance)}),currencySuffix]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.smallStat,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.smallStatLabel,children:isRtl?\"الصافي\":\"Net\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.smallStatValue),{},{color:monthTotals.net<0?\"#c00\":\"#14355f\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.net)}),currencySuffix]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.thName,children:nameLabelFirst}),/*#__PURE__*/_jsx(\"th\",{style:styles.thName,children:nameLabelSecond}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Jrs\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Salaire\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Avance\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Net\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[personnel.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:6,style:{padding:16,textAlign:\"center\"},children:isRtl?\"لا يوجد موظفون\":\"No personnel found\"})}):personnel.map(p=>{const v=computeMonthValues(p,m);// row name order follows header order\nconst firstNameCell=isRtl?p.prenom||\"-\":p.nom||\"-\";const secondNameCell=isRtl?p.nom||\"-\":p.prenom||\"-\";return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tdName,children:firstNameCell}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdName,children:secondNameCell}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:v.days||0}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.gross)}),currencySuffix]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.avance)}),currencySuffix]}),/*#__PURE__*/_jsxs(\"td\",{style:_objectSpread(_objectSpread({},styles.td),{},{fontWeight:700,color:v.net<0?\"#c00\":\"#14355f\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(v.net)}),currencySuffix]})]},\"\".concat(p.id,\"-\").concat(m));}),/*#__PURE__*/_jsxs(\"tr\",{style:styles.totalsRow,children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tdNameTotals,colSpan:2,children:isRtl?\"المجموع\":\"Total\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.tdTotals,children:monthTotals.days}),/*#__PURE__*/_jsxs(\"td\",{style:styles.tdTotals,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.gross)}),currencySuffix]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.tdTotals,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.avance)}),currencySuffix]}),/*#__PURE__*/_jsxs(\"td\",{style:_objectSpread(_objectSpread({},styles.tdTotals),{},{fontWeight:900,color:monthTotals.net<0?\"#c00\":\"#14355f\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.ltr,children:formatNumberSpaceDot(monthTotals.net)}),currencySuffix]})]})]})]})})]},\"month-\".concat(m));})})})]})});}/* ---------------- Programmatic opener & events ---------------- */export function openHistorique(){let detail=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};console.log(\"[hystorique] openHistorique called\",detail);const id=\"hystorique-modal-root\";let container=document.getElementById(id);if(!container){container=document.createElement(\"div\");container.id=id;document.body.appendChild(container);}function cleanup(root,containerEl){try{root.unmount();}catch(e){}try{containerEl.remove();}catch(e){}}try{const root=ReactDOM.createRoot(container);const onClose=()=>cleanup(root,container);root.render(/*#__PURE__*/_jsx(HistoriqueModal,{detail:detail,onClose:onClose}));}catch(err){try{// fallback for older React\n// eslint-disable-next-line\nReactDOM.render(/*#__PURE__*/_jsx(HistoriqueModal,{detail:detail,onClose:()=>{try{ReactDOM.unmountComponentAtNode(container);}catch(e){}try{container.remove();}catch(e){}}}),container);}catch(e){console.error(\"[hystorique] failed to render modal:\",e);alert(\"Failed to open historique (see console).\");}}}export default openHistorique;function onOpenEvent(e){try{const detail=(e===null||e===void 0?void 0:e.detail)||{};openHistorique(detail);}catch(err){console.error(\"[hystorique] event handler error:\",err);}}try{window.addEventListener(\"openHystorique\",onOpenEvent);window.addEventListener(\"openHistorique\",onOpenEvent);window.openHistorique=window.openHistorique||openHistorique;window.openHystorique=window.openHystorique||openHistorique;console.log(\"[hystorique] module loaded and listeners registered\");}catch(e){console.warn(\"[hystorique] could not register event listeners\",e);}/* ---------------- Styles ---------------- */const styles={overlay:{position:\"fixed\",inset:0,background:\"rgba(0,0,0,0.45)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},modal:{width:\"96%\",maxWidth:1200,maxHeight:\"90vh\",display:\"flex\",flexDirection:\"column\",background:\"#fff\",borderRadius:10,padding:12,boxShadow:\"0 16px 40px rgba(0,0,0,0.35)\"},header:{display:\"flex\",justifyContent:\"space-between\",gap:12,alignItems:\"center\",marginBottom:8},smallButton:{padding:\"6px 8px\",borderRadius:6,border:\"1px solid #bcd9ff\",background:\"#dff0ff\",cursor:\"pointer\"},yearInput:{width:88,padding:\"6px 8px\",borderRadius:6,border:\"1px solid #bcd9ff\",textAlign:\"center\"},closeButton:{padding:\"6px 8px\",borderRadius:6,border:\"none\",background:\"#e9f6ff\",cursor:\"pointer\"},summaryTop:{display:\"flex\",gap:12,alignItems:\"center\",marginBottom:10,flexWrap:\"wrap\"// keep visible (fixed at top of modal) by being outside the scrollable content\n},summaryItem:{background:\"#eaf6ff\",padding:\"8px 12px\",borderRadius:8,border:\"1px solid #cfe8ff\",minWidth:160},summaryLabel:{fontSize:12,color:\"#666\"},summaryValue:{fontSize:16,fontWeight:800},// Content wrap: scrollable area for month blocks; header+summary remain visible above\ncontentWrap:{overflowY:\"auto\",padding:\"6px 2px 10px 2px\",maxHeight:\"calc(90vh - 170px)\"// leave space for header and summary\n},monthBlock:{border:\"1px solid #cfe8ff\",borderRadius:8,padding:8,background:\"#f7fbff\"},monthHeaderRow:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:8},monthTitle:{fontWeight:800,fontSize:15,color:\"#0b3a75\"},monthTotals:{display:\"flex\",gap:10,alignItems:\"center\"},smallStat:{padding:\"6px 8px\",borderRadius:6,background:\"#e9f6ff\",border:\"1px solid #cfe8ff\",textAlign:\"right\",minWidth:100},smallStatLabel:{fontSize:11,color:\"#666\"},smallStatValue:{fontWeight:800},table:{width:\"100%\",borderCollapse:\"collapse\",fontSize:13},thName:{padding:\"8px\",border:\"1px solid #cfe8ff\",textAlign:\"left\",minWidth:160,background:\"#eaf6ff\",fontWeight:700},th:{padding:\"8px\",border:\"1px solid #cfe8ff\",textAlign:\"center\",width:110,background:\"#eaf6ff\",fontWeight:700},tdName:{padding:\"8px\",border:\"1px solid #e6f3ff\",textAlign:\"left\",background:\"#fff\"},td:{padding:\"8px\",border:\"1px solid #e6f3ff\",textAlign:\"right\",background:\"#fff\",whiteSpace:\"nowrap\"},tdTotals:{padding:\"8px\",borderTop:\"2px solid #bcd9ff\",borderLeft:\"1px solid #e6f3ff\",borderRight:\"1px solid #e6f3ff\",textAlign:\"right\",background:\"#e9f6ff\",fontWeight:800},tdNameTotals:{padding:\"8px\",borderTop:\"2px solid #bcd9ff\",borderLeft:\"1px solid #e6f3ff\",borderRight:\"1px solid #e6f3ff\",background:\"#e9f6ff\",fontWeight:800,textAlign:\"left\"},totalsRow:{background:\"#f4fbff\"},ltr:{direction:\"ltr\",unicodeBidi:\"isolate\"}};","map":{"version":3,"names":["React","useEffect","useState","ReactDOM","jsx","_jsx","jsxs","_jsxs","monthLabel","i","locale","arguments","length","undefined","monthsFr","monthsAr","formatNumberSpaceDot","value","cleaned","String","replace","n","Number","isFinite","parts","toFixed","split","join","safeNum","v","toString","HistoriqueModal","_ref","detail","onClose","isRtl","currencySuffix","year","setYear","Date","getFullYear","personnel","setPersonnel","loading","setLoading","dataByPerson","setDataByPerson","error","setError","mounted","loadPersonnel","ppl","window","pywebview","api","get_personnel","Array","isArray","e","console","warn","loadAllPointage","map","p","recs","get_pointage","id","prevYear","y","nextYear","onYearChange","target","isNaN","computeMonthValues","month","rec","find","r","days","days_present","salaryPerDay","salary_per_day","gross","avance","net","salary_due","computeMonthTotals","computeYearlyTotals","m","t","yearlyTotals","nameLabelFirst","nameLabelSecond","style","styles","overlay","children","_objectSpread","modal","direction","header","margin","concat","display","gap","alignItems","onClick","smallButton","onChange","yearInput","closeButton","summaryTop","summaryItem","summaryLabel","summaryValue","ltr","color","contentWrap","padding","textAlign","marginTop","paddingBottom","from","_","idx","monthTotals","monthBlock","monthHeaderRow","monthTitle","smallStat","smallStatLabel","smallStatValue","overflowX","table","thName","th","colSpan","firstNameCell","prenom","nom","secondNameCell","tdName","td","fontWeight","totalsRow","tdNameTotals","tdTotals","openHistorique","log","container","document","getElementById","createElement","body","appendChild","cleanup","root","containerEl","unmount","remove","createRoot","render","err","unmountComponentAtNode","alert","onOpenEvent","addEventListener","openHystorique","position","inset","background","justifyContent","zIndex","width","maxWidth","maxHeight","flexDirection","borderRadius","boxShadow","marginBottom","border","cursor","flexWrap","minWidth","fontSize","overflowY","borderCollapse","whiteSpace","borderTop","borderLeft","borderRight","unicodeBidi"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/hystorique.js"],"sourcesContent":["// hystorique.js\n// Historique modal — updates per user request:\n// - \"avance\" is shown only if it exists in the pointage record for that month (otherwise 0).\n// - Arabic numbers show like: \"5 000.00 دج\" (space thousands, dot decimal, currency suffix).\n// - When Arabic (RTL) the name columns are inverted: header order and values are swapped (prenom/nom).\n// - The top area (header with X close and the yearly summary) remains visible while scrolling the month tables.\n// - Exposes openHistorique(detail) and listens to openHystorique/openHistorique events.\n\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\n/* ---------------- Helpers ---------------- */\n\nfunction monthLabel(i, locale = \"fr\") {\n  const monthsFr = [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Août\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"];\n  const monthsAr = [\"يناير\",\"فيفري\",\"مارس\",\"أبريل\",\"ماي\",\"جوان\",\"جويلية\",\"أوت\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"];\n  return locale === \"ar\" ? monthsAr[i] : monthsFr[i];\n}\n\nfunction formatNumberSpaceDot(value) {\n  if (value === null || value === undefined || value === \"\") return \"\";\n  const cleaned = String(value).replace(/\\s+/g, \"\").replace(\",\", \".\");\n  const n = Number(cleaned);\n  if (!Number.isFinite(n)) return String(value);\n  const parts = n.toFixed(2).split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n  return parts.join(\".\");\n}\n\nfunction safeNum(v) {\n  if (v === null || v === undefined || v === \"\") return 0;\n  const n = Number(String(v).toString().replace(/\\s+/g, \"\").replace(\",\", \".\"));\n  return Number.isFinite(n) ? n : 0;\n}\n\n/* ---------------- Component ---------------- */\n\nfunction HistoriqueModal({ detail = {}, onClose }) {\n  const locale = detail.locale || \"fr\";\n  const isRtl = locale === \"ar\";\n  const currencySuffix = locale === \"ar\" ? \" دج\" : \" DZD\";\n\n  const [year, setYear] = useState((detail.year && Number(detail.year)) || new Date().getFullYear());\n  const [personnel, setPersonnel] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [dataByPerson, setDataByPerson] = useState({}); // { personId: [records] } records for the year\n  const [error, setError] = useState(null);\n\n  // Load personnel list on mount\n  useEffect(() => {\n    let mounted = true;\n    async function loadPersonnel() {\n      try {\n        setLoading(true);\n        const ppl = (window.pywebview && window.pywebview.api && window.pywebview.api.get_personnel)\n          ? await window.pywebview.api.get_personnel()\n          : [];\n        if (!mounted) return;\n        setPersonnel(Array.isArray(ppl) ? ppl : []);\n      } catch (e) {\n        console.warn(\"hystorique: failed to load personnel\", e);\n        if (mounted) setPersonnel([]);\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    }\n    loadPersonnel();\n    return () => { mounted = false; };\n  }, []);\n\n  // Load pointage for each person for the selected year\n  useEffect(() => {\n    let mounted = true;\n    async function loadAllPointage() {\n      setLoading(true);\n      setError(null);\n      const map = {};\n      try {\n        for (const p of personnel) {\n          try {\n            // get_pointage(personnel_id, year, null) -> all months for that person/year\n            const recs = (window.pywebview && window.pywebview.api && window.pywebview.api.get_pointage)\n              ? await window.pywebview.api.get_pointage(p.id, year, null)\n              : [];\n            map[p.id] = Array.isArray(recs) ? recs : [];\n          } catch (e) {\n            console.warn(\"hystorique: failed to load pointage for person\", p.id, e);\n            map[p.id] = [];\n          }\n        }\n        if (!mounted) return;\n        setDataByPerson(map);\n      } catch (e) {\n        console.error(\"hystorique: unexpected error\", e);\n        if (mounted) setError(\"Failed to load historique.\");\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    }\n\n    if (personnel.length > 0) {\n      loadAllPointage();\n    } else {\n      setDataByPerson({});\n    }\n\n    return () => { mounted = false; };\n  }, [personnel, year]);\n\n  function prevYear() { setYear(y => y - 1); }\n  function nextYear() { setYear(y => y + 1); }\n  function onYearChange(e) {\n    const v = Number(e.target.value);\n    if (!Number.isNaN(v)) setYear(v);\n  }\n\n  // For a given person and month return computed values\n  function computeMonthValues(p, month) {\n    // month: 1..12\n    const recs = dataByPerson[p.id] || [];\n    const rec = recs.find(r => Number(r.month) === Number(month)) || null;\n    const days = rec ? safeNum(rec.days_present) : 0;\n    const salaryPerDay = rec ? safeNum(rec.salary_per_day) : 0;\n    const gross = salaryPerDay * days;\n    // avance ONLY from the month record if it exists (otherwise 0)\n    const avance = rec ? safeNum(rec.avance) : 0;\n    const net = rec && (\"salary_due\" in rec) ? safeNum(rec.salary_due) : (gross - avance);\n    return { days, gross, avance, net };\n  }\n\n  // Totals across all personnel for a month\n  function computeMonthTotals(month) {\n    let days = 0, gross = 0, avance = 0, net = 0;\n    for (const p of personnel) {\n      const v = computeMonthValues(p, month);\n      days += safeNum(v.days);\n      gross += safeNum(v.gross);\n      avance += safeNum(v.avance);\n      net += safeNum(v.net);\n    }\n    return { days, gross, avance, net };\n  }\n\n  // Yearly totals (sum of monthly totals)\n  function computeYearlyTotals() {\n    let days = 0, gross = 0, avance = 0, net = 0;\n    for (let m = 1; m <= 12; m++) {\n      const t = computeMonthTotals(m);\n      days += safeNum(t.days);\n      gross += safeNum(t.gross);\n      avance += safeNum(t.avance);\n      net += safeNum(t.net);\n    }\n    return { days, gross, avance, net };\n  }\n\n  const yearlyTotals = computeYearlyTotals();\n\n  // Decide header labels order based on locale (nom/prenom order swap for Arabic)\n  const nameLabelFirst = isRtl ? (locale === \"ar\" ? \"اللقب\" : \"Prénom\") : (locale === \"ar\" ? \"الاسم\" : \"Nom\");\n  const nameLabelSecond = isRtl ? (locale === \"ar\" ? \"الاسم\" : \"Nom\") : (locale === \"ar\" ? \"اللقب\" : \"Prénom\");\n\n  return (\n    <div style={styles.overlay}>\n      <div style={{ ...styles.modal, direction: isRtl ? \"rtl\" : \"ltr\" }}>\n        {/* Header + summary remain visible (outside the scrollable content) */}\n        <div style={styles.header}>\n          <h3 style={{ margin: 0 }}>{isRtl ? \"سجل الحضور السنوي\" : `Historique — ${year}`}</h3>\n          <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n            <button onClick={prevYear} style={styles.smallButton}>◀</button>\n            <input value={year} onChange={onYearChange} style={styles.yearInput} />\n            <button onClick={nextYear} style={styles.smallButton}>▶</button>\n            <button onClick={onClose} style={styles.closeButton}>✖</button>\n          </div>\n        </div>\n\n        <div style={styles.summaryTop}>\n          <div style={styles.summaryItem}>\n            <div style={styles.summaryLabel}>{isRtl ? \"إجمالي الأيام (سنة)\" : \"Total Jours (année)\"}</div>\n            <div style={styles.summaryValue}>{yearlyTotals.days}</div>\n          </div>\n          <div style={styles.summaryItem}>\n            <div style={styles.summaryLabel}>{isRtl ? \"إجمالي الرواتب\" : \"Salaire brut (année)\"}</div>\n            <div style={styles.summaryValue}>\n              <span style={styles.ltr}>{formatNumberSpaceDot(yearlyTotals.gross)}</span>{currencySuffix}\n            </div>\n          </div>\n          <div style={styles.summaryItem}>\n            <div style={styles.summaryLabel}>{isRtl ? \"إجمالي السلفة\" : \"Avance (année)\"}</div>\n            <div style={styles.summaryValue}>\n              <span style={styles.ltr}>{formatNumberSpaceDot(yearlyTotals.avance)}</span>{currencySuffix}\n            </div>\n          </div>\n          <div style={styles.summaryItem}>\n            <div style={styles.summaryLabel}>{isRtl ? \"الصافي\" : \"Net à payer (année)\"}</div>\n            <div style={{ ...styles.summaryValue, color: yearlyTotals.net < 0 ? \"#c00\" : \"#14355f\" }}>\n              <span style={styles.ltr}>{formatNumberSpaceDot(yearlyTotals.net)}</span>{currencySuffix}\n            </div>\n          </div>\n        </div>\n\n        {/* Scrollable content area containing month blocks */}\n        <div style={styles.contentWrap}>\n          {loading ? (\n            <div style={{ padding: 30, textAlign: \"center\" }}>{isRtl ? \"جاري التحميل...\" : \"Loading...\"}</div>\n          ) : error ? (\n            <div style={{ color: \"red\", padding: 16 }}>{error}</div>\n          ) : (\n            <div style={{ marginTop: 6, display: \"grid\", gap: 18, paddingBottom: 16 }}>\n              {Array.from({ length: 12 }).map((_, idx) => {\n                const m = idx + 1;\n                const monthTotals = computeMonthTotals(m);\n                return (\n                  <div key={`month-${m}`} style={styles.monthBlock}>\n                    <div style={styles.monthHeaderRow}>\n                      <div style={styles.monthTitle}>{monthLabel(idx, locale)} {year}</div>\n                      <div style={styles.monthTotals}>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{isRtl ? \"الأيام\" : \"Jrs\"}</div>\n                          <div style={styles.smallStatValue}>{monthTotals.days}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{isRtl ? \"الراتب\" : \"Salaire\"}</div>\n                          <div style={styles.smallStatValue}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.gross)}</span>{currencySuffix}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{isRtl ? \"السلفة\" : \"Avance\"}</div>\n                          <div style={styles.smallStatValue}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.avance)}</span>{currencySuffix}</div>\n                        </div>\n                        <div style={styles.smallStat}>\n                          <div style={styles.smallStatLabel}>{isRtl ? \"الصافي\" : \"Net\"}</div>\n                          <div style={{ ...styles.smallStatValue, color: monthTotals.net < 0 ? \"#c00\" : \"#14355f\" }}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.net)}</span>{currencySuffix}</div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div style={{ overflowX: \"auto\" }}>\n                      <table style={styles.table}>\n                        <thead>\n                          <tr>\n                            {/* Header order depends on locale: swap labels/values when Arabic */}\n                            <th style={styles.thName}>{nameLabelFirst}</th>\n                            <th style={styles.thName}>{nameLabelSecond}</th>\n                            <th style={styles.th}>Jrs</th>\n                            <th style={styles.th}>Salaire</th>\n                            <th style={styles.th}>Avance</th>\n                            <th style={styles.th}>Net</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {personnel.length === 0 ? (\n                            <tr><td colSpan={6} style={{ padding: 16, textAlign: \"center\" }}>{isRtl ? \"لا يوجد موظفون\" : \"No personnel found\"}</td></tr>\n                          ) : personnel.map(p => {\n                            const v = computeMonthValues(p, m);\n                            // row name order follows header order\n                            const firstNameCell = isRtl ? (p.prenom || \"-\") : (p.nom || \"-\");\n                            const secondNameCell = isRtl ? (p.nom || \"-\") : (p.prenom || \"-\");\n                            return (\n                              <tr key={`${p.id}-${m}`}>\n                                <td style={styles.tdName}>{firstNameCell}</td>\n                                <td style={styles.tdName}>{secondNameCell}</td>\n                                <td style={styles.td}>{v.days || 0}</td>\n                                <td style={styles.td}><span style={styles.ltr}>{formatNumberSpaceDot(v.gross)}</span>{currencySuffix}</td>\n                                <td style={styles.td}><span style={styles.ltr}>{formatNumberSpaceDot(v.avance)}</span>{currencySuffix}</td>\n                                <td style={{ ...styles.td, fontWeight: 700, color: v.net < 0 ? \"#c00\" : \"#14355f\" }}><span style={styles.ltr}>{formatNumberSpaceDot(v.net)}</span>{currencySuffix}</td>\n                              </tr>\n                            );\n                          })}\n                          {/* Totals row for the month */}\n                          <tr style={styles.totalsRow}>\n                            <td style={styles.tdNameTotals} colSpan={2}>{isRtl ? \"المجموع\" : \"Total\"}</td>\n                            <td style={styles.tdTotals}>{monthTotals.days}</td>\n                            <td style={styles.tdTotals}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.gross)}</span>{currencySuffix}</td>\n                            <td style={styles.tdTotals}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.avance)}</span>{currencySuffix}</td>\n                            <td style={{ ...styles.tdTotals, fontWeight: 900, color: monthTotals.net < 0 ? \"#c00\" : \"#14355f\" }}><span style={styles.ltr}>{formatNumberSpaceDot(monthTotals.net)}</span>{currencySuffix}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ---------------- Programmatic opener & events ---------------- */\n\nexport function openHistorique(detail = {}) {\n  console.log(\"[hystorique] openHistorique called\", detail);\n  const id = \"hystorique-modal-root\";\n  let container = document.getElementById(id);\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.id = id;\n    document.body.appendChild(container);\n  }\n\n  function cleanup(root, containerEl) {\n    try { root.unmount(); } catch (e) {}\n    try { containerEl.remove(); } catch (e) {}\n  }\n\n  try {\n    const root = ReactDOM.createRoot(container);\n    const onClose = () => cleanup(root, container);\n    root.render(<HistoriqueModal detail={detail} onClose={onClose} />);\n  } catch (err) {\n    try {\n      // fallback for older React\n      // eslint-disable-next-line\n      ReactDOM.render(<HistoriqueModal detail={detail} onClose={() => {\n        try { ReactDOM.unmountComponentAtNode(container); } catch (e) {}\n        try { container.remove(); } catch (e) {}\n      }} />, container);\n    } catch (e) {\n      console.error(\"[hystorique] failed to render modal:\", e);\n      alert(\"Failed to open historique (see console).\");\n    }\n  }\n}\n\nexport default openHistorique;\n\nfunction onOpenEvent(e) {\n  try {\n    const detail = e?.detail || {};\n    openHistorique(detail);\n  } catch (err) {\n    console.error(\"[hystorique] event handler error:\", err);\n  }\n}\n\ntry {\n  window.addEventListener(\"openHystorique\", onOpenEvent);\n  window.addEventListener(\"openHistorique\", onOpenEvent);\n  window.openHistorique = window.openHistorique || openHistorique;\n  window.openHystorique = window.openHystorique || openHistorique;\n  console.log(\"[hystorique] module loaded and listeners registered\");\n} catch (e) {\n  console.warn(\"[hystorique] could not register event listeners\", e);\n}\n\n/* ---------------- Styles ---------------- */\n\nconst styles = {\n  overlay: {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,0.45)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 9999\n  },\n  modal: {\n    width: \"96%\",\n    maxWidth: 1200,\n    maxHeight: \"90vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    background: \"#fff\",\n    borderRadius: 10,\n    padding: 12,\n    boxShadow: \"0 16px 40px rgba(0,0,0,0.35)\"\n  },\n  header: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: 12,\n    alignItems: \"center\",\n    marginBottom: 8\n  },\n  smallButton: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"1px solid #bcd9ff\",\n    background: \"#dff0ff\",\n    cursor: \"pointer\"\n  },\n  yearInput: {\n    width: 88,\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"1px solid #bcd9ff\",\n    textAlign: \"center\"\n  },\n  closeButton: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    border: \"none\",\n    background: \"#e9f6ff\",\n    cursor: \"pointer\"\n  },\n  summaryTop: {\n    display: \"flex\",\n    gap: 12,\n    alignItems: \"center\",\n    marginBottom: 10,\n    flexWrap: \"wrap\",\n    // keep visible (fixed at top of modal) by being outside the scrollable content\n  },\n  summaryItem: {\n    background: \"#eaf6ff\",\n    padding: \"8px 12px\",\n    borderRadius: 8,\n    border: \"1px solid #cfe8ff\",\n    minWidth: 160\n  },\n  summaryLabel: {\n    fontSize: 12,\n    color: \"#666\"\n  },\n  summaryValue: {\n    fontSize: 16,\n    fontWeight: 800\n  },\n\n  // Content wrap: scrollable area for month blocks; header+summary remain visible above\n  contentWrap: {\n    overflowY: \"auto\",\n    padding: \"6px 2px 10px 2px\",\n    maxHeight: \"calc(90vh - 170px)\" // leave space for header and summary\n  },\n\n  monthBlock: {\n    border: \"1px solid #cfe8ff\",\n    borderRadius: 8,\n    padding: 8,\n    background: \"#f7fbff\"\n  },\n  monthHeaderRow: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: 8\n  },\n  monthTitle: {\n    fontWeight: 800,\n    fontSize: 15,\n    color: \"#0b3a75\"\n  },\n  monthTotals: {\n    display: \"flex\",\n    gap: 10,\n    alignItems: \"center\"\n  },\n  smallStat: {\n    padding: \"6px 8px\",\n    borderRadius: 6,\n    background: \"#e9f6ff\",\n    border: \"1px solid #cfe8ff\",\n    textAlign: \"right\",\n    minWidth: 100\n  },\n  smallStatLabel: { fontSize: 11, color: \"#666\" },\n  smallStatValue: { fontWeight: 800 },\n\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    fontSize: 13\n  },\n  thName: {\n    padding: \"8px\",\n    border: \"1px solid #cfe8ff\",\n    textAlign: \"left\",\n    minWidth: 160,\n    background: \"#eaf6ff\",\n    fontWeight: 700\n  },\n  th: {\n    padding: \"8px\",\n    border: \"1px solid #cfe8ff\",\n    textAlign: \"center\",\n    width: 110,\n    background: \"#eaf6ff\",\n    fontWeight: 700\n  },\n  tdName: {\n    padding: \"8px\",\n    border: \"1px solid #e6f3ff\",\n    textAlign: \"left\",\n    background: \"#fff\"\n  },\n  td: {\n    padding: \"8px\",\n    border: \"1px solid #e6f3ff\",\n    textAlign: \"right\",\n    background: \"#fff\",\n    whiteSpace: \"nowrap\"\n  },\n  tdTotals: {\n    padding: \"8px\",\n    borderTop: \"2px solid #bcd9ff\",\n    borderLeft: \"1px solid #e6f3ff\",\n    borderRight: \"1px solid #e6f3ff\",\n    textAlign: \"right\",\n    background: \"#e9f6ff\",\n    fontWeight: 800\n  },\n  tdNameTotals: {\n    padding: \"8px\",\n    borderTop: \"2px solid #bcd9ff\",\n    borderLeft: \"1px solid #e6f3ff\",\n    borderRight: \"1px solid #e6f3ff\",\n    background: \"#e9f6ff\",\n    fontWeight: 800,\n    textAlign: \"left\"\n  },\n  totalsRow: {\n    background: \"#f4fbff\"\n  },\n  ltr: {\n    direction: \"ltr\",\n    unicodeBidi: \"isolate\"\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}