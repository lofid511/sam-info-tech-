{"ast":null,"code":"import _objectSpread from\"C:/Users/R-TECH/Desktop/00/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{jsPDF}from\"jspdf\";// Table columns\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TABLE_FIELDS=[\"nom\",\"prenom\",\"date_de_naissance\",\"lieu_de_naissance\",\"passport_number\",\"date_delivrance\",\"date_expiration\",\"addresse\",\"telephone\",\"credit\",\"photo\"];const NATIONALITIES=[\"AlgÃ©rienne\",\"Marocaine\",\"Tunisienne\",\"FranÃ§aise\",\"Espagnole\",\"Italienne\",\"Turque\",\"Saoudienne\",\"Ã‰gyptienne\",\"Ù„ÙŠØ¨ÙŠØ©\",\"Autre\"];const translations={fr:{title:\"Liste des Clients\",searchPlaceholder:\"Rechercher...\",selectRowAlert:\"Veuillez sÃ©lectionner une ligne client.\",addClient:\"Ajouter Nouveau Client\",editClient:\"Modifier Client\",confirmDelete:name=>\"Supprimer le client \".concat(name,\" ?\"),save:\"Enregistrer\",cancel:\"Annuler\",addButton:\"âž• Ajouter\",editButton:\"âœï¸ Modifier\",deleteButton:\"ðŸ—‘ï¸ Supprimer\",printButton:\"ðŸ–¨ï¸ Impression\",ficheButton:\"ðŸ§¾ Fiche client\",errorLoad:\"Erreur lors du chargement des clients\",errorSave:\"Erreur lors de l'enregistrement !\",errorDelete:\"Erreur lors de la suppression !\",saisieArabe:\"Saisir en arabe\",tableHeaders:[\"#\",\"Nom\",\"PrÃ©nom\",\"Date de naissance\",\"Lieu de naissance\",\"NÂ° Passport\",\"Date dÃ©livrance\",\"Date expiration\",\"Adresse\",\"NÂ° TÃ©lÃ©phone\",\"CrÃ©dit\",\"Photo\"],modalLabels:{nom:\"Nom\",prenom:\"PrÃ©nom\",nom_ar:\"Nom (arabe)\",prenom_ar:\"PrÃ©nom (arabe)\",prenom_pere:\"PrÃ©nom pÃ¨re\",prenom_pere_ar:\"PrÃ©nom pÃ¨re (arabe)\",nom_mere:\"Nom mÃ¨re\",prenom_mere:\"PrÃ©nom mÃ¨re\",nom_mere_ar:\"Nom mÃ¨re (arabe)\",prenom_mere_ar:\"PrÃ©nom mÃ¨re (arabe)\",date_de_naissance:\"Date de naissance\",lieu_de_naissance:\"Lieu de naissance\",nationalite:\"NationalitÃ©\",passport_number:\"NÂ° Passport\",date_delivrance:\"Date dÃ©livrance\",date_expiration:\"Date expiration\",addresse:\"Adresse\",telephone:\"NÂ° TÃ©lÃ©phone\",credit:\"CrÃ©dit\",photo:\"Photo (jpg/png)\"}},ar:{title:\"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",searchPlaceholder:\"Ø¨Ø­Ø«...\",selectRowAlert:\"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ ØµÙ Ø§Ù„Ø¹Ù…ÙŠÙ„.\",addClient:\"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\",editClient:\"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„\",confirmDelete:name=>\"\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 \".concat(name,\"\\u061F\"),save:\"Ø­ÙØ¸\",cancel:\"Ø¥Ù„ØºØ§Ø¡\",addButton:\"âž• Ø¥Ø¶Ø§ÙØ©\",editButton:\"âœï¸ ØªØ¹Ø¯ÙŠÙ„\",deleteButton:\"ðŸ—‘ï¸ Ø­Ø°Ù\",printButton:\"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\",ficheButton:\"ðŸ§¾ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„\",errorLoad:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",errorSave:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸!\",errorDelete:\"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù!\",saisieArabe:\"ÙŠØ±Ø¬Ù‰ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\",tableHeaders:[\"#\",\"Ø§Ù„Ù„Ù‚Ø¨\",\"Ø§Ù„Ø§Ø³Ù…\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\"Ø§Ù„Ù‡Ø§ØªÙ\",\"Ø¯ÙŽÙŠÙ†\",\"Ø§Ù„ØµÙˆØ±Ø©\"],modalLabels:{nom:\"Ø§Ù„Ù„Ù‚Ø¨\",prenom:\"Ø§Ù„Ø§Ø³Ù…\",nom_ar:\"Ø§Ù„Ù„Ù‚Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_ar:\"Ø§Ù„Ø§Ø³Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_pere:\"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨\",prenom_pere_ar:\"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",nom_mere:\"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù…\",prenom_mere:\"Ø§Ø³Ù… Ø§Ù„Ø£Ù…\",nom_mere_ar:\"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",prenom_mere_ar:\"Ø§Ø³Ù… Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",date_de_naissance:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",lieu_de_naissance:\"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",nationalite:\"Ø§Ù„Ø¬Ù†Ø³ÙŠØ©\",passport_number:\"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",date_delivrance:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",date_expiration:\"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",addresse:\"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",telephone:\"Ø§Ù„Ù‡Ø§ØªÙ\",credit:\"Ø¯ÙŽÙŠÙ†\",photo:\"Ø§Ù„ØµÙˆØ±Ø© (jpg/png)\"}}};// Format helpers (credit and dates)\nfunction formatDateToFR(dateString){if(!dateString)return\"\";if(/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)){const[yyyy,mm,dd]=dateString.split(\"-\");return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yyyy);}else if(/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)){const[dd,mm,yyyy]=dateString.split(\"-\");return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yyyy);}else if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)){return dateString;}return dateString;}function formatDateToISO(dateString){if(!dateString)return\"\";let dd,mm,yyyy;if(/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)){[dd,mm,yyyy]=dateString.split(\"/\");}else if(/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)){[dd,mm,yyyy]=dateString.split(\"-\");}else if(/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)){return dateString;}if(yyyy&&mm&&dd){return\"\".concat(yyyy,\"-\").concat(mm,\"-\").concat(dd);}return dateString;}function isArabic(str){return /^[\\u0600-\\u06FF\\s]+$/.test(str);}// Helper: unformat credit input (remove spaces/commas)\nfunction unformatCredit(value){if(value===undefined||value===null)return\"\";return String(value).replace(/\\s+/g,\"\").replace(/,/g,\"\").trim();}// Helper: format number/string to \"x xxx.xx\" for display (fallback if backend doesn't provide formatted)\nfunction formatCreditForDisplay(value){if(value===undefined||value===null||value===\"\")return\"\";try{const cleaned=String(value).replace(/\\s+/g,\"\").replace(/,/g,\"\");const num=parseFloat(cleaned);if(Number.isNaN(num))return String(value);return num.toLocaleString('fr-FR',{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\\u202f/g,' ');}catch(e){return String(value);}}// PDF generator for Fiche client, sends to backend for system preview\nasync function generateClientPDF(client,locale,translations){var _client$credit_format;const doc=new jsPDF();let y=12;doc.setFontSize(18);doc.text(translations[locale].ficheButton,12,y);y+=10;doc.setFontSize(12);const L=translations[locale].modalLabels;const printField=(label,value)=>{doc.text(\"\".concat(label,\": \").concat(value!==null&&value!==void 0?value:\"\"),12,y);y+=8;};printField(L.nom,client.nom);printField(L.prenom,client.prenom);printField(L.nom_ar,client.nom_ar);printField(L.prenom_ar,client.prenom_ar);printField(L.prenom_pere,client.prenom_pere);printField(L.prenom_pere_ar,client.prenom_pere_ar);printField(L.nom_mere,client.nom_mere);printField(L.prenom_mere,client.prenom_mere);printField(L.nom_mere_ar,client.nom_mere_ar);printField(L.prenom_mere_ar,client.prenom_mere_ar);printField(L.date_de_naissance,client.date_de_naissance);printField(L.lieu_de_naissance,client.lieu_de_naissance);printField(L.nationalite,client.nationalite);printField(L.passport_number,client.passport_number);printField(L.date_delivrance,client.date_delivrance);printField(L.date_expiration,client.date_expiration);printField(L.addresse,client.addresse);printField(L.telephone,client.telephone);// Use formatted credit if available, else format from canonical credit\nconst creditForPDF=(_client$credit_format=client.credit_formatted)!==null&&_client$credit_format!==void 0?_client$credit_format:formatCreditForDisplay(client.credit);printField(L.credit,creditForPDF);if(client.photo&&client.photo.startsWith(\"data:\")){try{doc.addImage(client.photo,\"JPEG\",140,12,40,32);}catch(e){}}// Get PDF as Uint8Array and then to base64\nconst pdfBlob=doc.output(\"blob\");const arrayBuffer=await pdfBlob.arrayBuffer();const uint8Array=new Uint8Array(arrayBuffer);let binary='';for(let i=0;i<uint8Array.length;i++){binary+=String.fromCharCode(uint8Array[i]);}const base64PDF=window.btoa(binary);// Send to backend for system PDF preview\nif(window.pywebview&&window.pywebview.api&&window.pywebview.api.open_pdf_base64){await window.pywebview.api.open_pdf_base64(base64PDF);}else{alert(\"PDF preview not supported in this environment.\");}}function ClientPage(_ref){let{locale=\"fr\"}=_ref;const[clients,setClients]=useState([]);const[selectedIndex,setSelectedIndex]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[showModal,setShowModal]=useState(false);const[modalMode,setModalMode]=useState(\"add\");const[clientForm,setClientForm]=useState({id:null,nom:\"\",prenom:\"\",nom_ar:\"\",prenom_ar:\"\",prenom_pere:\"\",prenom_pere_ar:\"\",nom_mere:\"\",prenom_mere:\"\",nom_mere_ar:\"\",prenom_mere_ar:\"\",date_de_naissance:\"\",lieu_de_naissance:\"\",nationalite:\"AlgÃ©rienne\",passport_number:\"\",date_delivrance:\"\",date_expiration:\"\",addresse:\"\",telephone:\"\",credit:\"\",photo:\"\"});const[arErrors,setArErrors]=useState({});const[isDeleting,setIsDeleting]=useState(false);const[isLoading,setIsLoading]=useState(false);const isRtl=locale===\"ar\";const displayedHeaders=isRtl?[...translations[locale].tableHeaders].reverse():translations[locale].tableHeaders;const tableFieldsOrder=isRtl?[...TABLE_FIELDS].reverse():[...TABLE_FIELDS];const directionStyle=isRtl?{direction:\"rtl\"}:{direction:\"ltr\"};const tableStyle=isRtl?_objectSpread(_objectSpread({},styles.table),{},{direction:\"rtl\"}):styles.table;const fetchClients=async()=>{setIsLoading(true);try{const result=await window.pywebview.api.get_clients();// ensure credit fields are normalized and formatted as backend may return\nconst normalized=(result||[]).map(c=>{var _c$credit_formatted;return _objectSpread(_objectSpread({},c),{},{credit:c.credit!==undefined&&c.credit!==null?String(c.credit):\"\",credit_formatted:(_c$credit_formatted=c.credit_formatted)!==null&&_c$credit_formatted!==void 0?_c$credit_formatted:c.credit?formatCreditForDisplay(c.credit):\"\"});});setClients(normalized);}catch(err){setClients([]);}setIsLoading(false);};useEffect(()=>{fetchClients();// eslint-disable-next-line\n},[locale]);const filteredClients=clients.filter(c=>{const q=searchQuery.trim().toLowerCase();if(!q)return true;return(c.nom||\"\").toLowerCase().includes(q)||(c.prenom||\"\").toLowerCase().includes(q)||(c.date_de_naissance||\"\").toLowerCase().includes(q)||(c.lieu_de_naissance||\"\").toLowerCase().includes(q)||(c.nationalite||\"\").toLowerCase().includes(q)||(c.passport_number||\"\").toString().toLowerCase().includes(q)||(c.telephone||\"\").toLowerCase().includes(q);});// SUMMARY BADGES (same UX as personnel)\nconst totalClients=filteredClients.length;const totalCredit=filteredClients.reduce((sum,c)=>{var _c$credit;const valStr=(_c$credit=c.credit)!==null&&_c$credit!==void 0?_c$credit:\"\";const val=parseFloat(String(valStr).replace(/\\s+/g,\"\").replace(/,/g,\"\"));return sum+(isNaN(val)?0:val);},0);const emptyForm={id:null,nom:\"\",prenom:\"\",nom_ar:\"\",prenom_ar:\"\",prenom_pere:\"\",prenom_pere_ar:\"\",nom_mere:\"\",prenom_mere:\"\",nom_mere_ar:\"\",prenom_mere_ar:\"\",date_de_naissance:\"\",lieu_de_naissance:\"\",nationalite:\"AlgÃ©rienne\",passport_number:\"\",date_delivrance:\"\",date_expiration:\"\",addresse:\"\",telephone:\"\",credit:\"\",photo:\"\"};const handleAjouter=()=>{setModalMode(\"add\");setClientForm(_objectSpread({},emptyForm));setArErrors({});setShowModal(true);};const handleModifier=()=>{if(selectedIndex!==null&&filteredClients[selectedIndex]){const selected=filteredClients[selectedIndex];setModalMode(\"edit\");// Load canonical credit into form for editing (fallback to unformat formatted)\nconst canonicalCredit=selected.credit!==undefined&&selected.credit!==null&&selected.credit!==\"\"?selected.credit:unformatCredit(selected.credit_formatted||\"\");setClientForm(_objectSpread(_objectSpread({},selected),{},{date_de_naissance:formatDateToFR(selected.date_de_naissance),date_delivrance:formatDateToFR(selected.date_delivrance),date_expiration:formatDateToFR(selected.date_expiration),credit:canonicalCredit}));setArErrors({});setShowModal(true);}else{alert(translations[locale].selectRowAlert);}};const handleSupprimer=async()=>{if(selectedIndex===null||!filteredClients[selectedIndex]){alert(translations[locale].selectRowAlert);return;}if(isDeleting)return;const clientId=filteredClients[selectedIndex].id;const clientName=filteredClients[selectedIndex].nom||filteredClients[selectedIndex].prenom||filteredClients[selectedIndex].passport_number||\"\";const confirmDelete=window.confirm(translations[locale].confirmDelete(clientName));if(!confirmDelete)return;try{setIsDeleting(true);await window.pywebview.api.delete_client(clientId);setClients(prev=>prev.filter(c=>c.id!==clientId));setSelectedIndex(null);}catch(err){alert(translations[locale].errorDelete);}finally{setIsDeleting(false);}};const handleCloseModal=()=>{setShowModal(false);setArErrors({});setClientForm(_objectSpread({},emptyForm));};const handleArInput=(field,value)=>{let err=\"\";if(value&&!isArabic(value)){err=translations[locale].saisieArabe;}setClientForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setArErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:err}));};const handleSaveClient=async e=>{e.preventDefault();let newErrors={};for(const f of Object.keys(clientForm)){if(f.endsWith(\"_ar\")&&clientForm[f]&&!isArabic(clientForm[f])){newErrors[f]=translations[locale].saisieArabe;}}setArErrors(newErrors);if(Object.values(newErrors).some(Boolean))return;try{// Prepare payload: ensure credit is sent in canonical unformatted form\nconst payload=_objectSpread(_objectSpread({},clientForm),{},{date_de_naissance:formatDateToISO(clientForm.date_de_naissance),date_delivrance:formatDateToISO(clientForm.date_delivrance),date_expiration:formatDateToISO(clientForm.date_expiration),credit:unformatCredit(clientForm.credit)});if(modalMode===\"add\"){const newClient=await window.pywebview.api.add_client(payload);if(newClient&&newClient.id!==undefined){setClients(prev=>{var _newClient$credit_for;return[...prev,_objectSpread(_objectSpread({},newClient),{},{credit:newClient.credit!==undefined&&newClient.credit!==null?String(newClient.credit):\"\",credit_formatted:(_newClient$credit_for=newClient.credit_formatted)!==null&&_newClient$credit_for!==void 0?_newClient$credit_for:newClient.credit?formatCreditForDisplay(newClient.credit):\"\"})];});}else{await fetchClients();}}else{const updatedClient=await window.pywebview.api.update_client(payload);if(updatedClient&&updatedClient.id!==undefined){setClients(prev=>prev.map(c=>{var _updatedClient$credit;return c.id===updatedClient.id?_objectSpread(_objectSpread({},updatedClient),{},{credit:updatedClient.credit!==undefined&&updatedClient.credit!==null?String(updatedClient.credit):\"\",credit_formatted:(_updatedClient$credit=updatedClient.credit_formatted)!==null&&_updatedClient$credit!==void 0?_updatedClient$credit:updatedClient.credit?formatCreditForDisplay(updatedClient.credit):\"\"}):c;}));}else{await fetchClients();}}handleCloseModal();}catch(err){alert(translations[locale].errorSave);}};const handlePhotoChange=file=>{if(!file){setClientForm(s=>_objectSpread(_objectSpread({},s),{},{photo:\"\"}));return;}const reader=new FileReader();reader.onload=()=>{setClientForm(s=>_objectSpread(_objectSpread({},s),{},{photo:reader.result}));};reader.readAsDataURL(file);};const photoSrc=val=>{if(!val)return null;if(typeof val!==\"string\")return null;if(val.startsWith(\"data:\"))return val;return\"data:image/png;base64,\".concat(val);};const tableContainerStyle={maxHeight:\"60vh\",overflowY:\"auto\",border:\"1px solid #e0e0e0\",borderRadius:\"6px\"};const spinnerStyle={margin:\"60px auto\",border:\"8px solid #eee\",borderTop:\"8px solid #3477eb\",borderRadius:\"50%\",width:48,height:48,animation:\"spin 1s linear infinite\"};if(typeof document!==\"undefined\"&&!document.getElementById(\"client-spinner-style\")){const style=document.createElement(\"style\");style.id=\"client-spinner-style\";style.innerHTML=\"\\n      @keyframes spin { to { transform: rotate(360deg); } }\\n      .tableHeaderSticky { position: sticky; top: 0; background: #e8f0fe; z-index: 2; }\\n    \";document.head.appendChild(style);}function renderTableCell(client,field){var _client$field;if(field===\"photo\"){const src=photoSrc(client[field]);return/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.tableCell),{},{padding:0,textAlign:\"center\",minWidth:50,maxWidth:70,width:60,verticalAlign:\"middle\",background:\"#fff\"}),children:src?/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"photo\",style:{width:50,height:36,objectFit:\"cover\",borderRadius:6,display:\"block\",margin:\"0 auto\"}}):\"-\"},\"\".concat(client.id,\"-\").concat(field));}if(field===\"credit\"){var _client$credit_format2;// Prefer backend-provided formatted value, otherwise format on the fly\nconst formatted=(_client$credit_format2=client.credit_formatted)!==null&&_client$credit_format2!==void 0?_client$credit_format2:formatCreditForDisplay(client.credit);return/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:formatted||\"-\"},\"\".concat(client.id,\"-\").concat(field));}if(field===\"date_de_naissance\"||field===\"date_delivrance\"||field===\"date_expiration\"){return/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:formatDateToFR(client[field])},\"\".concat(client.id,\"-\").concat(field));}return/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:(_client$field=client[field])!==null&&_client$field!==void 0?_client$field:\"-\"},\"\".concat(client.id,\"-\").concat(field));}// For modal: 4 fields per line, photo on its own line\nconst modalRows=[[\"nom\",\"prenom\",\"nom_ar\",\"prenom_ar\"],[\"prenom_pere\",\"prenom_pere_ar\",\"nom_mere\",\"prenom_mere\"],[\"nom_mere_ar\",\"prenom_mere_ar\",\"date_de_naissance\",\"lieu_de_naissance\"],[\"nationalite\",\"passport_number\",\"date_delivrance\",\"date_expiration\"],[\"addresse\",\"telephone\",\"credit\"]];// Print handler (opens system print dialog for current page)\nconst handleImpression=()=>{window.print();};// Fiche client handler: generate PDF of client info and send to backend for preview\nconst handleFicheClient=()=>{if(selectedIndex===null||!filteredClients[selectedIndex]){alert(translations[locale].selectRowAlert);return;}generateClientPDF(filteredClients[selectedIndex],locale,translations);};// Two drawers: left and right, slightly lower (bottom: 28px)\nconst drawerLeft=/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{left:20,right:\"unset\",bottom:28,justifyContent:\"flex-start\",width:\"auto\",minWidth:0}),children:[/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleAjouter,children:translations[locale].addButton}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleModifier,children:translations[locale].editButton}),/*#__PURE__*/_jsx(\"button\",{style:styles.drawerButton,onClick:handleSupprimer,children:translations[locale].deleteButton})]});const drawerRight=/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.drawer),{},{right:20,left:\"unset\",bottom:28,justifyContent:\"flex-end\",width:\"auto\",minWidth:0}),children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.drawerButton),{},{background:\"#1b9e5c\",color:\"#fff\"}),onClick:handleFicheClient,children:translations[locale].ficheButton}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.drawerButton),{},{background:\"#3477eb\",color:\"#fff\"}),onClick:handleImpression,children:translations[locale].printButton})]});return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.pageContainer),directionStyle),children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\"},children:translations[locale].title}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,marginBottom:12,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.searchContainer),{},{maxWidth:420,flexDirection:isRtl?\"row-reverse\":\"row\"}),children:[/*#__PURE__*/_jsx(\"span\",{style:styles.searchIcon,children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:translations[locale].searchPlaceholder,value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setSelectedIndex(null);},style:styles.searchInput})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[\"\\uD83D\\uDC65 \",locale===\"fr\"?\"Total Clients\":\"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\":\",/*#__PURE__*/_jsx(\"strong\",{style:{marginLeft:6},children:totalClients})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.summaryBadge,children:[\"\\uD83D\\uDCB0 \",locale===\"fr\"?\"Total CrÃ©dit\":\"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙˆÙ†\",\":\",/*#__PURE__*/_jsxs(\"strong\",{style:{marginLeft:6},children:[totalCredit.toLocaleString('fr-FR',{minimumFractionDigits:2,maximumFractionDigits:2}),\" DZD\"]})]})]})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"div\",{style:spinnerStyle})}):/*#__PURE__*/_jsx(\"div\",{style:tableContainerStyle,children:/*#__PURE__*/_jsxs(\"table\",{style:tableStyle,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{style:styles.tableHeaderRow,children:isRtl?[...displayedHeaders].reverse().map((h,i)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.tableHeader),h===\"#\"?{width:36,minWidth:24,maxWidth:40}:{}),h===\"Photo\"||h===\"Ø§Ù„ØµÙˆØ±Ø©\"?{minWidth:50,maxWidth:70,width:60}:{}),className:\"tableHeaderSticky\",children:h},i)):displayedHeaders.map((h,i)=>/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.tableHeader),h===\"#\"?{width:36,minWidth:24,maxWidth:40}:{}),h===\"Photo\"||h===\"Ø§Ù„ØµÙˆØ±Ø©\"?{minWidth:50,maxWidth:70,width:60}:{}),className:\"tableHeaderSticky\",children:h},i))})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[filteredClients.map((client,idx)=>/*#__PURE__*/_jsx(\"tr\",{style:_objectSpread(_objectSpread({},styles.tableRow),{},{background:idx===selectedIndex?\"#cce5ff\":idx%2===0?\"#fff\":\"#f4f8ff\"}),onClick:()=>setSelectedIndex(idx),children:isRtl?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:idx+1}),[...tableFieldsOrder].reverse().map(field=>renderTableCell(client,field))]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.tableCell,children:idx+1}),tableFieldsOrder.map(field=>renderTableCell(client,field))]})},client.id||client.nom+idx)),filteredClients.length===0&&!isLoading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:displayedHeaders.length,style:{padding:\"1rem\",textAlign:\"center\",color:\"#666\"},children:translations[locale].errorLoad})})]})]})}),drawerLeft,drawerRight,showModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.modalContent),isRtl?{direction:\"rtl\",textAlign:\"right\"}:{}),children:[/*#__PURE__*/_jsx(\"h3\",{children:modalMode===\"add\"?translations[locale].addClient:translations[locale].editClient}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveClient,style:styles.modalForm,children:[modalRows.map((row,rowIdx)=>/*#__PURE__*/_jsxs(\"div\",{style:styles.fieldRow4,children:[row.map((field,i)=>{// For date fields, use native date input (like group js)\nif(field===\"date_de_naissance\"||field===\"date_delivrance\"||field===\"date_expiration\"){return/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4,children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels[field],\":\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:clientForm[field]?formatDateToISO(clientForm[field]):\"\",onChange:e=>setClientForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:e.target.value?formatDateToFR(e.target.value):\"\"})),style:styles.modalInput})]})},i);}// For credit, use a number input (show canonical credit in editor)\nif(field===\"credit\"){return/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4,children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels.credit,\":\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:clientForm.credit||\"\",onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{credit:e.target.value})),style:styles.modalInput,min:0,step:\"0.01\"})]})},i);}return/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4,children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels[field],\":\",field===\"nationalite\"?/*#__PURE__*/_jsx(\"select\",{value:clientForm.nationalite,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{nationalite:e.target.value})),style:styles.modalInput,children:NATIONALITIES.map(nat=>/*#__PURE__*/_jsx(\"option\",{value:nat,children:nat},nat))}):field.endsWith(\"_ar\")?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm[field]||\"\",onChange:e=>handleArInput(field,e.target.value),style:styles.modalInput,dir:\"rtl\",lang:\"ar\",pattern:\"[\\\\u0600-\\\\u06FF\\\\s]+\",title:translations[locale].saisieArabe,placeholder:\"...\"}),arErrors[field]&&/*#__PURE__*/_jsx(\"span\",{style:styles.arError,children:arErrors[field]})]}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm[field]||\"\",onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{[field]:e.target.value})),style:styles.modalInput,required:[\"nom\",\"prenom\",\"passport_number\"].includes(field)})]})},i);}),row.length<4&&[...Array(4-row.length)].map((_,idx)=>/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4},\"empty\"+idx))]},rowIdx)),/*#__PURE__*/_jsxs(\"div\",{style:styles.fieldRow4,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.fieldItem4),{},{flex:1}),children:/*#__PURE__*/_jsxs(\"label\",{style:styles.modalLabel,children:[translations[locale].modalLabels.photo,\":\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>handlePhotoChange(e.target.files[0]),style:{marginTop:6}}),clientForm.photo?/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"img\",{src:photoSrc(clientForm.photo),alt:\"preview\",style:{width:80,height:60,objectFit:\"cover\",borderRadius:6}})}):null]})}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4}),/*#__PURE__*/_jsx(\"div\",{style:styles.fieldItem4})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalButtons,children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.modalButton,children:translations[locale].save}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.modalButton,onClick:handleCloseModal,children:translations[locale].cancel})]})]})]})})]});}const styles={pageContainer:{padding:\"1.25rem\",position:\"relative\",minHeight:\"100vh\",boxSizing:\"border-box\"},// Updated to match personel search sizing/spacing: flex layout, gap and maxWidth 420\nsearchContainer:{marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",maxWidth:\"420px\",gap:8,flex:1},searchIcon:{fontSize:\"1.2rem\",marginRight:\"0.5rem\"},// Use full-width input style like personel\nsearchInput:{width:\"100%\",padding:\"0.5rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"1px solid #ccc\"},table:{width:\"100%\",borderCollapse:\"collapse\",marginTop:\"0\",tableLayout:\"fixed\"},tableHeaderRow:{background:\"#e8f0fe\"},tableHeader:{padding:\"0.5rem\",border:\"1px solid #c2c2c2\",fontWeight:\"bold\",fontSize:\"0.98rem\",background:\"#e8f0fe\"},tableRow:{cursor:\"pointer\"},tableCell:{padding:\"0.35rem 0.45rem\",border:\"1px solid #e0e0e0\",fontSize:\"0.96rem\",wordBreak:\"break-word\",verticalAlign:\"middle\"},drawer:{position:\"fixed\",background:\"transparent\",padding:\"1rem\",borderRadius:\"8px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.15)\",display:\"flex\",flexDirection:\"row\",gap:\"0.5rem\",zIndex:8,minWidth:0,width:\"auto\",alignItems:\"center\"},drawerButton:{display:\"flex\",alignItems:\"center\",gap:\"0.3rem\",padding:\"0.5rem 1rem\",fontSize:\"1rem\",color:\"#3477eb\",background:\"#eaf3ff\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\",transition:\"background 0.2s\"},modalOverlay:{position:\"fixed\",top:0,left:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:1000},modalContent:{background:\"#fff\",padding:\"2rem\",borderRadius:\"8px\",width:\"96%\",maxWidth:\"980px\",boxShadow:\"0 2px 16px rgba(0,0,0,0.25)\"},modalForm:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},modalLabel:{display:\"flex\",flexDirection:\"column\",fontSize:\"0.9rem\",color:\"#333\"},modalInput:{padding:\"0.5rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"1px solid #ccc\",marginTop:\"0.3rem\"},arError:{color:\"#c00\",fontSize:\"0.85em\",marginTop:\"2px\",fontWeight:\"bold\"},modalButtons:{display:\"flex\",justifyContent:\"flex-end\",gap:\"1rem\",marginTop:\"1rem\"},modalButton:{padding:\"0.5rem 1.2rem\",fontSize:\"1rem\",borderRadius:\"4px\",border:\"none\",cursor:\"pointer\",background:\"#3477eb\",color:\"#fff\",fontWeight:\"bold\",transition:\"background 0.2s\"},fieldRow4:{display:\"flex\",gap:\"0.45rem\",alignItems:\"flex-start\"},fieldItem4:{flex:1,minWidth:0},summaryBar:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",background:\"rgba(247, 250, 255, 0.65)\",backdropFilter:\"blur(6px)\",border:\"1px solid #e0e0e0\",borderRadius:\"8px\",padding:\"0.6rem 1rem\",marginBottom:\"1rem\",fontSize:\"1rem\",color:\"#333\",boxShadow:\"0 1px 4px rgba(0,0,0,0.05)\"},summaryItem:{display:\"flex\",alignItems:\"center\",gap:\"0.4rem\",fontWeight:\"600\"},summaryValue:{color:\"#3477eb\",fontWeight:\"700\",marginLeft:\"4px\"},// New badge style used next to search (matching personnel)\nsummaryBadge:{padding:\"0.4rem 0.6rem\",background:\"rgba(255,255,255,0.9)\",borderRadius:8,border:\"1px solid #e6eefb\",display:\"flex\",alignItems:\"center\",gap:8,fontWeight:700,color:\"#14355f\"},page:{padding:\"2rem\",textAlign:\"center\"}};if(typeof document!==\"undefined\"&&!document.getElementById(\"drawer-hover-style\")){const style=document.createElement(\"style\");style.id=\"drawer-hover-style\";style.innerHTML=\"\\n    .drawerButtonHover {\\n      position: relative;\\n      overflow: hidden;\\n      transition: all 0.25s ease;\\n      z-index: 0;\\n    }\\n    .drawerButtonHover::before {\\n      content: \\\"\\\";\\n      position: absolute;\\n      top: 0;\\n      left: -100%;\\n      width: 100%;\\n      height: 100%;\\n      background: linear-gradient(90deg, rgba(52,119,235,0.15) 0%, rgba(235,52,52,0.65) 100%);\\n      transition: left 0.45s ease-in-out;\\n      z-index: -1;\\n    }\\n    .drawerButtonHover:hover::before {\\n      left: 0;\\n    }\\n  \";document.head.appendChild(style);}export default ClientPage;","map":{"version":3,"names":["React","useEffect","useState","jsPDF","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TABLE_FIELDS","NATIONALITIES","translations","fr","title","searchPlaceholder","selectRowAlert","addClient","editClient","confirmDelete","name","concat","save","cancel","addButton","editButton","deleteButton","printButton","ficheButton","errorLoad","errorSave","errorDelete","saisieArabe","tableHeaders","modalLabels","nom","prenom","nom_ar","prenom_ar","prenom_pere","prenom_pere_ar","nom_mere","prenom_mere","nom_mere_ar","prenom_mere_ar","date_de_naissance","lieu_de_naissance","nationalite","passport_number","date_delivrance","date_expiration","addresse","telephone","credit","photo","ar","formatDateToFR","dateString","test","yyyy","mm","dd","split","formatDateToISO","isArabic","str","unformatCredit","value","undefined","String","replace","trim","formatCreditForDisplay","cleaned","num","parseFloat","Number","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","e","generateClientPDF","client","locale","_client$credit_format","doc","y","setFontSize","text","L","printField","label","creditForPDF","credit_formatted","startsWith","addImage","pdfBlob","output","arrayBuffer","uint8Array","Uint8Array","binary","i","length","fromCharCode","base64PDF","window","btoa","pywebview","api","open_pdf_base64","alert","ClientPage","_ref","clients","setClients","selectedIndex","setSelectedIndex","searchQuery","setSearchQuery","showModal","setShowModal","modalMode","setModalMode","clientForm","setClientForm","id","arErrors","setArErrors","isDeleting","setIsDeleting","isLoading","setIsLoading","isRtl","displayedHeaders","reverse","tableFieldsOrder","directionStyle","direction","tableStyle","_objectSpread","styles","table","fetchClients","result","get_clients","normalized","map","c","_c$credit_formatted","err","filteredClients","filter","q","toLowerCase","includes","toString","totalClients","totalCredit","reduce","sum","_c$credit","valStr","val","emptyForm","handleAjouter","handleModifier","selected","canonicalCredit","handleSupprimer","clientId","clientName","confirm","delete_client","prev","handleCloseModal","handleArInput","field","handleSaveClient","preventDefault","newErrors","f","Object","keys","endsWith","values","some","Boolean","payload","newClient","add_client","_newClient$credit_for","updatedClient","update_client","_updatedClient$credit","handlePhotoChange","file","s","reader","FileReader","onload","readAsDataURL","photoSrc","tableContainerStyle","maxHeight","overflowY","border","borderRadius","spinnerStyle","margin","borderTop","width","height","animation","document","getElementById","style","createElement","innerHTML","head","appendChild","renderTableCell","_client$field","src","tableCell","padding","textAlign","minWidth","maxWidth","verticalAlign","background","children","alt","objectFit","display","_client$credit_format2","formatted","modalRows","handleImpression","print","handleFicheClient","drawerLeft","drawer","left","right","bottom","justifyContent","drawerButton","onClick","drawerRight","color","pageContainer","gap","marginBottom","alignItems","searchContainer","flexDirection","searchIcon","type","placeholder","onChange","target","searchInput","marginLeft","summaryBadge","tableHeaderRow","h","tableHeader","className","idx","tableRow","colSpan","modalOverlay","modalContent","onSubmit","modalForm","row","rowIdx","fieldRow4","fieldItem4","modalLabel","modalInput","min","step","nat","dir","lang","pattern","arError","required","Array","_","flex","accept","files","marginTop","modalButtons","modalButton","position","minHeight","boxSizing","fontSize","marginRight","borderCollapse","tableLayout","fontWeight","cursor","wordBreak","boxShadow","zIndex","transition","top","summaryBar","backdropFilter","summaryItem","summaryValue","page"],"sources":["C:/Users/R-TECH/Desktop/00/my-app/src/client.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { jsPDF } from \"jspdf\";\n\n// Table columns\nconst TABLE_FIELDS = [\n  \"nom\",\n  \"prenom\",\n  \"date_de_naissance\",\n  \"lieu_de_naissance\",\n  \"passport_number\",\n  \"date_delivrance\",\n  \"date_expiration\",\n  \"addresse\",\n  \"telephone\",\n  \"credit\",\n  \"photo\"\n];\n\nconst NATIONALITIES = [\n  \"AlgÃ©rienne\", \"Marocaine\", \"Tunisienne\", \"FranÃ§aise\", \"Espagnole\", \"Italienne\", \"Turque\", \"Saoudienne\", \"Ã‰gyptienne\", \"Ù„ÙŠØ¨ÙŠØ©\", \"Autre\"\n];\n\nconst translations = {\n  fr: {\n    title: \"Liste des Clients\",\n    searchPlaceholder: \"Rechercher...\",\n    selectRowAlert: \"Veuillez sÃ©lectionner une ligne client.\",\n    addClient: \"Ajouter Nouveau Client\",\n    editClient: \"Modifier Client\",\n    confirmDelete: (name) => `Supprimer le client ${name} ?`,\n    save: \"Enregistrer\",\n    cancel: \"Annuler\",\n    addButton: \"âž• Ajouter\",\n    editButton: \"âœï¸ Modifier\",\n    deleteButton: \"ðŸ—‘ï¸ Supprimer\",\n    printButton: \"ðŸ–¨ï¸ Impression\",\n    ficheButton: \"ðŸ§¾ Fiche client\",\n    errorLoad: \"Erreur lors du chargement des clients\",\n    errorSave: \"Erreur lors de l'enregistrement !\",\n    errorDelete: \"Erreur lors de la suppression !\",\n    saisieArabe: \"Saisir en arabe\",\n    tableHeaders: [\n      \"#\",\n      \"Nom\",\n      \"PrÃ©nom\",\n      \"Date de naissance\",\n      \"Lieu de naissance\",\n      \"NÂ° Passport\",\n      \"Date dÃ©livrance\",\n      \"Date expiration\",\n      \"Adresse\",\n      \"NÂ° TÃ©lÃ©phone\",\n      \"CrÃ©dit\",\n      \"Photo\"\n    ],\n    modalLabels: {\n      nom: \"Nom\",\n      prenom: \"PrÃ©nom\",\n      nom_ar: \"Nom (arabe)\",\n      prenom_ar: \"PrÃ©nom (arabe)\",\n      prenom_pere: \"PrÃ©nom pÃ¨re\",\n      prenom_pere_ar: \"PrÃ©nom pÃ¨re (arabe)\",\n      nom_mere: \"Nom mÃ¨re\",\n      prenom_mere: \"PrÃ©nom mÃ¨re\",\n      nom_mere_ar: \"Nom mÃ¨re (arabe)\",\n      prenom_mere_ar: \"PrÃ©nom mÃ¨re (arabe)\",\n      date_de_naissance: \"Date de naissance\",\n      lieu_de_naissance: \"Lieu de naissance\",\n      nationalite: \"NationalitÃ©\",\n      passport_number: \"NÂ° Passport\",\n      date_delivrance: \"Date dÃ©livrance\",\n      date_expiration: \"Date expiration\",\n      addresse: \"Adresse\",\n      telephone: \"NÂ° TÃ©lÃ©phone\",\n      credit: \"CrÃ©dit\",\n      photo: \"Photo (jpg/png)\"\n    }\n  },\n  ar: {\n    title: \"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\n    searchPlaceholder: \"Ø¨Ø­Ø«...\",\n    selectRowAlert: \"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ ØµÙ Ø§Ù„Ø¹Ù…ÙŠÙ„.\",\n    addClient: \"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯\",\n    editClient: \"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„\",\n    confirmDelete: (name) => `Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ ${name}ØŸ`,\n    save: \"Ø­ÙØ¸\",\n    cancel: \"Ø¥Ù„ØºØ§Ø¡\",\n    addButton: \"âž• Ø¥Ø¶Ø§ÙØ©\",\n    editButton: \"âœï¸ ØªØ¹Ø¯ÙŠÙ„\",\n    deleteButton: \"ðŸ—‘ï¸ Ø­Ø°Ù\",\n    printButton: \"ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©\",\n    ficheButton: \"ðŸ§¾ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„\",\n    errorLoad: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\",\n    errorSave: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸!\",\n    errorDelete: \"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù!\",\n    saisieArabe: \"ÙŠØ±Ø¬Ù‰ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\",\n    tableHeaders: [\n      \"#\",\n      \"Ø§Ù„Ù„Ù‚Ø¨\",\n      \"Ø§Ù„Ø§Ø³Ù…\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      \"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      \"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\n      \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\n      \"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\n      \"Ø§Ù„Ù‡Ø§ØªÙ\",\n      \"Ø¯ÙŽÙŠÙ†\",\n      \"Ø§Ù„ØµÙˆØ±Ø©\"\n    ],\n    modalLabels: {\n      nom: \"Ø§Ù„Ù„Ù‚Ø¨\",\n      prenom: \"Ø§Ù„Ø§Ø³Ù…\",\n      nom_ar: \"Ø§Ù„Ù„Ù‚Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_ar: \"Ø§Ù„Ø§Ø³Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_pere: \"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨\",\n      prenom_pere_ar: \"Ø§Ø³Ù… Ø§Ù„Ø£Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      nom_mere: \"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù…\",\n      prenom_mere: \"Ø§Ø³Ù… Ø§Ù„Ø£Ù…\",\n      nom_mere_ar: \"Ù„Ù‚Ø¨ Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      prenom_mere_ar: \"Ø§Ø³Ù… Ø§Ù„Ø£Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)\",\n      date_de_naissance: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      lieu_de_naissance: \"Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯\",\n      nationalite: \"Ø§Ù„Ø¬Ù†Ø³ÙŠØ©\",\n      passport_number: \"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ø²\",\n      date_delivrance: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±\",\n      date_expiration: \"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡\",\n      addresse: \"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†\",\n      telephone: \"Ø§Ù„Ù‡Ø§ØªÙ\",\n      credit: \"Ø¯ÙŽÙŠÙ†\",\n      photo: \"Ø§Ù„ØµÙˆØ±Ø© (jpg/png)\"\n    }\n  }\n};\n\n// Format helpers (credit and dates)\nfunction formatDateToFR(dateString) {\n  if (!dateString) return \"\";\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\n    const [yyyy, mm, dd] = dateString.split(\"-\");\n    return `${dd}/${mm}/${yyyy}`;\n  } else if (/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)) {\n    const [dd, mm, yyyy] = dateString.split(\"-\");\n    return `${dd}/${mm}/${yyyy}`;\n  } else if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)) {\n    return dateString;\n  }\n  return dateString;\n}\n\nfunction formatDateToISO(dateString) {\n  if (!dateString) return \"\";\n  let dd, mm, yyyy;\n  if (/^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(dateString)) {\n    [dd, mm, yyyy] = dateString.split(\"/\");\n  } else if (/^\\d{2}-\\d{2}-\\d{4}$/.test(dateString)) {\n    [dd, mm, yyyy] = dateString.split(\"-\");\n  } else if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\n    return dateString;\n  }\n  if (yyyy && mm && dd) {\n    return `${yyyy}-${mm}-${dd}`;\n  }\n  return dateString;\n}\n\nfunction isArabic(str) {\n  return /^[\\u0600-\\u06FF\\s]+$/.test(str);\n}\n\n// Helper: unformat credit input (remove spaces/commas)\nfunction unformatCredit(value) {\n  if (value === undefined || value === null) return \"\";\n  return String(value).replace(/\\s+/g, \"\").replace(/,/g, \"\").trim();\n}\n\n// Helper: format number/string to \"x xxx.xx\" for display (fallback if backend doesn't provide formatted)\nfunction formatCreditForDisplay(value) {\n  if (value === undefined || value === null || value === \"\") return \"\";\n  try {\n    const cleaned = String(value).replace(/\\s+/g, \"\").replace(/,/g, \"\");\n    const num = parseFloat(cleaned);\n    if (Number.isNaN(num)) return String(value);\n    return num.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(/\\u202f/g, ' ');\n  } catch (e) {\n    return String(value);\n  }\n}\n\n// PDF generator for Fiche client, sends to backend for system preview\nasync function generateClientPDF(client, locale, translations) {\n  const doc = new jsPDF();\n  let y = 12;\n  doc.setFontSize(18);\n  doc.text(translations[locale].ficheButton, 12, y);\n  y += 10;\n  doc.setFontSize(12);\n\n  const L = translations[locale].modalLabels;\n  const printField = (label, value) => {\n    doc.text(`${label}: ${value ?? \"\"}`, 12, y);\n    y += 8;\n  };\n\n  printField(L.nom, client.nom);\n  printField(L.prenom, client.prenom);\n  printField(L.nom_ar, client.nom_ar);\n  printField(L.prenom_ar, client.prenom_ar);\n  printField(L.prenom_pere, client.prenom_pere);\n  printField(L.prenom_pere_ar, client.prenom_pere_ar);\n  printField(L.nom_mere, client.nom_mere);\n  printField(L.prenom_mere, client.prenom_mere);\n  printField(L.nom_mere_ar, client.nom_mere_ar);\n  printField(L.prenom_mere_ar, client.prenom_mere_ar);\n  printField(L.date_de_naissance, client.date_de_naissance);\n  printField(L.lieu_de_naissance, client.lieu_de_naissance);\n  printField(L.nationalite, client.nationalite);\n  printField(L.passport_number, client.passport_number);\n  printField(L.date_delivrance, client.date_delivrance);\n  printField(L.date_expiration, client.date_expiration);\n  printField(L.addresse, client.addresse);\n  printField(L.telephone, client.telephone);\n  // Use formatted credit if available, else format from canonical credit\n  const creditForPDF = client.credit_formatted ?? formatCreditForDisplay(client.credit);\n  printField(L.credit, creditForPDF);\n\n  if (client.photo && client.photo.startsWith(\"data:\")) {\n    try {\n      doc.addImage(client.photo, \"JPEG\", 140, 12, 40, 32);\n    } catch (e) {}\n  }\n\n  // Get PDF as Uint8Array and then to base64\n  const pdfBlob = doc.output(\"blob\");\n  const arrayBuffer = await pdfBlob.arrayBuffer();\n  const uint8Array = new Uint8Array(arrayBuffer);\n  let binary = '';\n  for (let i = 0; i < uint8Array.length; i++) {\n    binary += String.fromCharCode(uint8Array[i]);\n  }\n  const base64PDF = window.btoa(binary);\n\n  // Send to backend for system PDF preview\n  if (window.pywebview && window.pywebview.api && window.pywebview.api.open_pdf_base64) {\n    await window.pywebview.api.open_pdf_base64(base64PDF);\n  } else {\n    alert(\"PDF preview not supported in this environment.\");\n  }\n}\n\nfunction ClientPage({ locale = \"fr\" }) {\n  const [clients, setClients] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [modalMode, setModalMode] = useState(\"add\");\n  const [clientForm, setClientForm] = useState({\n    id: null,\n    nom: \"\",\n    prenom: \"\",\n    nom_ar: \"\",\n    prenom_ar: \"\",\n    prenom_pere: \"\",\n    prenom_pere_ar: \"\",\n    nom_mere: \"\",\n    prenom_mere: \"\",\n    nom_mere_ar: \"\",\n    prenom_mere_ar: \"\",\n    date_de_naissance: \"\",\n    lieu_de_naissance: \"\",\n    nationalite: \"AlgÃ©rienne\",\n    passport_number: \"\",\n    date_delivrance: \"\",\n    date_expiration: \"\",\n    addresse: \"\",\n    telephone: \"\",\n    credit: \"\",\n    photo: \"\"\n  });\n  const [arErrors, setArErrors] = useState({});\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const isRtl = locale === \"ar\";\n  const displayedHeaders = isRtl\n    ? [...translations[locale].tableHeaders].reverse()\n    : translations[locale].tableHeaders;\n  const tableFieldsOrder = isRtl\n    ? [...TABLE_FIELDS].reverse()\n    : [...TABLE_FIELDS];\n  const directionStyle = isRtl\n    ? { direction: \"rtl\" }\n    : { direction: \"ltr\" };\n  const tableStyle = isRtl\n    ? { ...styles.table, direction: \"rtl\" }\n    : styles.table;\n\n  const fetchClients = async () => {\n    setIsLoading(true);\n    try {\n      const result = await window.pywebview.api.get_clients();\n      // ensure credit fields are normalized and formatted as backend may return\n      const normalized = (result || []).map(c => ({\n        ...c,\n        credit: c.credit !== undefined && c.credit !== null ? String(c.credit) : \"\",\n        credit_formatted: c.credit_formatted ?? (c.credit ? formatCreditForDisplay(c.credit) : \"\")\n      }));\n      setClients(normalized);\n    } catch (err) {\n      setClients([]);\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchClients();\n    // eslint-disable-next-line\n  }, [locale]);\n\n  const filteredClients = clients.filter((c) => {\n    const q = searchQuery.trim().toLowerCase();\n    if (!q) return true;\n    return (\n      (c.nom || \"\").toLowerCase().includes(q) ||\n      (c.prenom || \"\").toLowerCase().includes(q) ||\n      (c.date_de_naissance || \"\").toLowerCase().includes(q) ||\n      (c.lieu_de_naissance || \"\").toLowerCase().includes(q) ||\n      (c.nationalite || \"\").toLowerCase().includes(q) ||\n      (c.passport_number || \"\").toString().toLowerCase().includes(q) ||\n      (c.telephone || \"\").toLowerCase().includes(q)\n    );\n  });\n\n  // SUMMARY BADGES (same UX as personnel)\n  const totalClients = filteredClients.length;\n  const totalCredit = filteredClients.reduce((sum, c) => {\n    const valStr = c.credit ?? \"\";\n    const val = parseFloat(String(valStr).replace(/\\s+/g, \"\").replace(/,/g, \"\"));\n    return sum + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  const emptyForm = {\n    id: null,\n    nom: \"\",\n    prenom: \"\",\n    nom_ar: \"\",\n    prenom_ar: \"\",\n    prenom_pere: \"\",\n    prenom_pere_ar: \"\",\n    nom_mere: \"\",\n    prenom_mere: \"\",\n    nom_mere_ar: \"\",\n    prenom_mere_ar: \"\",\n    date_de_naissance: \"\",\n    lieu_de_naissance: \"\",\n    nationalite: \"AlgÃ©rienne\",\n    passport_number: \"\",\n    date_delivrance: \"\",\n    date_expiration: \"\",\n    addresse: \"\",\n    telephone: \"\",\n    credit: \"\",\n    photo: \"\"\n  };\n\n  const handleAjouter = () => {\n    setModalMode(\"add\");\n    setClientForm({ ...emptyForm });\n    setArErrors({});\n    setShowModal(true);\n  };\n\n  const handleModifier = () => {\n    if (selectedIndex !== null && filteredClients[selectedIndex]) {\n      const selected = filteredClients[selectedIndex];\n      setModalMode(\"edit\");\n      // Load canonical credit into form for editing (fallback to unformat formatted)\n      const canonicalCredit = selected.credit !== undefined && selected.credit !== null && selected.credit !== \"\"\n        ? selected.credit\n        : unformatCredit(selected.credit_formatted || \"\");\n      setClientForm({\n        ...selected,\n        date_de_naissance: formatDateToFR(selected.date_de_naissance),\n        date_delivrance: formatDateToFR(selected.date_delivrance),\n        date_expiration: formatDateToFR(selected.date_expiration),\n        credit: canonicalCredit\n      });\n      setArErrors({});\n      setShowModal(true);\n    } else {\n      alert(translations[locale].selectRowAlert);\n    }\n  };\n\n  const handleSupprimer = async () => {\n    if (selectedIndex === null || !filteredClients[selectedIndex]) {\n      alert(translations[locale].selectRowAlert);\n      return;\n    }\n    if (isDeleting) return;\n    const clientId = filteredClients[selectedIndex].id;\n    const clientName =\n      filteredClients[selectedIndex].nom ||\n      filteredClients[selectedIndex].prenom ||\n      filteredClients[selectedIndex].passport_number ||\n      \"\";\n    const confirmDelete = window.confirm(\n      translations[locale].confirmDelete(clientName)\n    );\n    if (!confirmDelete) return;\n    try {\n      setIsDeleting(true);\n      await window.pywebview.api.delete_client(clientId);\n      setClients(prev => prev.filter(c => c.id !== clientId));\n      setSelectedIndex(null);\n    } catch (err) {\n      alert(translations[locale].errorDelete);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setArErrors({});\n    setClientForm({ ...emptyForm });\n  };\n\n  const handleArInput = (field, value) => {\n    let err = \"\";\n    if (value && !isArabic(value)) {\n      err = translations[locale].saisieArabe;\n    }\n    setClientForm((prev) => ({ ...prev, [field]: value }));\n    setArErrors((prev) => ({ ...prev, [field]: err }));\n  };\n\n  const handleSaveClient = async (e) => {\n    e.preventDefault();\n    let newErrors = {};\n    for (const f of Object.keys(clientForm)) {\n      if (f.endsWith(\"_ar\") && clientForm[f] && !isArabic(clientForm[f])) {\n        newErrors[f] = translations[locale].saisieArabe;\n      }\n    }\n    setArErrors(newErrors);\n    if (Object.values(newErrors).some(Boolean)) return;\n\n    try {\n      // Prepare payload: ensure credit is sent in canonical unformatted form\n      const payload = {\n        ...clientForm,\n        date_de_naissance: formatDateToISO(clientForm.date_de_naissance),\n        date_delivrance: formatDateToISO(clientForm.date_delivrance),\n        date_expiration: formatDateToISO(clientForm.date_expiration),\n        credit: unformatCredit(clientForm.credit)\n      };\n      if (modalMode === \"add\") {\n        const newClient = await window.pywebview.api.add_client(payload);\n        if (newClient && newClient.id !== undefined) {\n          setClients(prev => [...prev, {\n            ...newClient,\n            credit: newClient.credit !== undefined && newClient.credit !== null ? String(newClient.credit) : \"\",\n            credit_formatted: newClient.credit_formatted ?? (newClient.credit ? formatCreditForDisplay(newClient.credit) : \"\")\n          }]);\n        } else {\n          await fetchClients();\n        }\n      } else {\n        const updatedClient = await window.pywebview.api.update_client(payload);\n        if (updatedClient && updatedClient.id !== undefined) {\n          setClients(prev =>\n            prev.map(c => (c.id === updatedClient.id ? {\n              ...updatedClient,\n              credit: updatedClient.credit !== undefined && updatedClient.credit !== null ? String(updatedClient.credit) : \"\",\n              credit_formatted: updatedClient.credit_formatted ?? (updatedClient.credit ? formatCreditForDisplay(updatedClient.credit) : \"\")\n            } : c))\n          );\n        } else {\n          await fetchClients();\n        }\n      }\n      handleCloseModal();\n    } catch (err) {\n      alert(translations[locale].errorSave);\n    }\n  };\n\n  const handlePhotoChange = (file) => {\n    if (!file) {\n      setClientForm((s) => ({ ...s, photo: \"\" }));\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      setClientForm((s) => ({ ...s, photo: reader.result }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const photoSrc = (val) => {\n    if (!val) return null;\n    if (typeof val !== \"string\") return null;\n    if (val.startsWith(\"data:\")) return val;\n    return `data:image/png;base64,${val}`;\n  };\n\n  const tableContainerStyle = {\n    maxHeight: \"60vh\",\n    overflowY: \"auto\",\n    border: \"1px solid #e0e0e0\",\n    borderRadius: \"6px\"\n  };\n\n  const spinnerStyle = {\n    margin: \"60px auto\",\n    border: \"8px solid #eee\",\n    borderTop: \"8px solid #3477eb\",\n    borderRadius: \"50%\",\n    width: 48,\n    height: 48,\n    animation: \"spin 1s linear infinite\"\n  };\n\n  if (typeof document !== \"undefined\" && !document.getElementById(\"client-spinner-style\")) {\n    const style = document.createElement(\"style\");\n    style.id = \"client-spinner-style\";\n    style.innerHTML = `\n      @keyframes spin { to { transform: rotate(360deg); } }\n      .tableHeaderSticky { position: sticky; top: 0; background: #e8f0fe; z-index: 2; }\n    `;\n    document.head.appendChild(style);\n  }\n\n  function renderTableCell(client, field) {\n    if (field === \"photo\") {\n      const src = photoSrc(client[field]);\n      return (\n        <td\n          key={`${client.id}-${field}`}\n          style={{\n            ...styles.tableCell,\n            padding: 0,\n            textAlign: \"center\",\n            minWidth: 50,\n            maxWidth: 70,\n            width: 60,\n            verticalAlign: \"middle\",\n            background: \"#fff\"\n          }}\n        >\n          {src ? (\n            <img\n              src={src}\n              alt=\"photo\"\n              style={{\n                width: 50,\n                height: 36,\n                objectFit: \"cover\",\n                borderRadius: 6,\n                display: \"block\",\n                margin: \"0 auto\"\n              }}\n            />\n          ) : (\n            \"-\"\n          )}\n        </td>\n      );\n    }\n\n    if (field === \"credit\") {\n      // Prefer backend-provided formatted value, otherwise format on the fly\n      const formatted = client.credit_formatted ?? formatCreditForDisplay(client.credit);\n      return (\n        <td key={`${client.id}-${field}`} style={styles.tableCell}>\n          {formatted || \"-\"}\n        </td>\n      );\n    }\n\n    if (\n      field === \"date_de_naissance\" ||\n      field === \"date_delivrance\" ||\n      field === \"date_expiration\"\n    ) {\n      return (\n        <td key={`${client.id}-${field}`} style={styles.tableCell}>\n          {formatDateToFR(client[field])}\n        </td>\n      );\n    }\n    return (\n      <td key={`${client.id}-${field}`} style={styles.tableCell}>\n        {client[field] ?? \"-\"}\n      </td>\n    );\n  }\n\n  // For modal: 4 fields per line, photo on its own line\n  const modalRows = [\n    [\"nom\", \"prenom\", \"nom_ar\", \"prenom_ar\"],\n    [\"prenom_pere\", \"prenom_pere_ar\", \"nom_mere\", \"prenom_mere\"],\n    [\"nom_mere_ar\", \"prenom_mere_ar\", \"date_de_naissance\", \"lieu_de_naissance\"],\n    [\"nationalite\", \"passport_number\", \"date_delivrance\", \"date_expiration\"],\n    [\"addresse\", \"telephone\", \"credit\"]\n  ];\n\n  // Print handler (opens system print dialog for current page)\n  const handleImpression = () => {\n    window.print();\n  };\n\n  // Fiche client handler: generate PDF of client info and send to backend for preview\n  const handleFicheClient = () => {\n    if (selectedIndex === null || !filteredClients[selectedIndex]) {\n      alert(translations[locale].selectRowAlert);\n      return;\n    }\n    generateClientPDF(filteredClients[selectedIndex], locale, translations);\n  };\n\n  // Two drawers: left and right, slightly lower (bottom: 28px)\n  const drawerLeft = (\n    <div\n      style={{\n        ...styles.drawer,\n        left: 20,\n        right: \"unset\",\n        bottom: 28,\n        justifyContent: \"flex-start\",\n        width: \"auto\",\n        minWidth: 0,\n      }}\n    >\n      <button style={styles.drawerButton} onClick={handleAjouter}>\n        {translations[locale].addButton}\n      </button>\n      <button style={styles.drawerButton} onClick={handleModifier}>\n        {translations[locale].editButton}\n      </button>\n      <button style={styles.drawerButton} onClick={handleSupprimer}>\n        {translations[locale].deleteButton}\n      </button>\n    </div>\n  );\n  const drawerRight = (\n    <div\n      style={{\n        ...styles.drawer,\n        right: 20,\n        left: \"unset\",\n        bottom: 28,\n        justifyContent: \"flex-end\",\n        width: \"auto\",\n        minWidth: 0,\n      }}\n    >\n      <button style={{ ...styles.drawerButton, background: \"#1b9e5c\", color: \"#fff\" }} onClick={handleFicheClient}>\n        {translations[locale].ficheButton}\n      </button>\n      <button style={{ ...styles.drawerButton, background: \"#3477eb\", color: \"#fff\" }} onClick={handleImpression}>\n        {translations[locale].printButton}\n      </button>\n    </div>\n  );\n\n  return (\n    <div style={{ ...styles.pageContainer, ...directionStyle }}>\n      <h2 style={{ textAlign: \"center\" }}>{translations[locale].title}</h2>\n\n      {/* Search + summary badges (same layout and sizing as personnel) */}\n      <div style={{ display: \"flex\", gap: 12, marginBottom: 12, alignItems: \"center\" }}>\n        <div style={{ ...styles.searchContainer, maxWidth: 420, flexDirection: isRtl ? \"row-reverse\" : \"row\" }}>\n          <span style={styles.searchIcon}>ðŸ”</span>\n          <input\n            type=\"text\"\n            placeholder={translations[locale].searchPlaceholder}\n            value={searchQuery}\n            onChange={(e) => {\n              setSearchQuery(e.target.value);\n              setSelectedIndex(null);\n            }}\n            style={styles.searchInput}\n          />\n        </div>\n\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\n          <div style={styles.summaryBadge}>\n            ðŸ‘¥ {locale === \"fr\" ? \"Total Clients\" : \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡\"}:\n            <strong style={{ marginLeft: 6 }}>{totalClients}</strong>\n          </div>\n          <div style={styles.summaryBadge}>\n            ðŸ’° {locale === \"fr\" ? \"Total CrÃ©dit\" : \"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙˆÙ†\"}:\n            <strong style={{ marginLeft: 6 }}>\n              {totalCredit.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} DZD\n            </strong>\n          </div>\n        </div>\n      </div>\n\n      {isLoading ? (\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <div style={spinnerStyle}></div>\n        </div>\n      ) : (\n        <div style={tableContainerStyle}>\n          <table style={tableStyle}>\n            <thead>\n              <tr style={styles.tableHeaderRow}>\n                {isRtl\n                  ? [...displayedHeaders].reverse().map((h, i) => (\n                      <th\n                        key={i}\n                        style={{\n                          ...styles.tableHeader,\n                          ...(h === \"#\" ? { width: 36, minWidth: 24, maxWidth: 40 } : {}),\n                          ...(h === \"Photo\" || h === \"Ø§Ù„ØµÙˆØ±Ø©\" ? { minWidth: 50, maxWidth: 70, width: 60 } : {}),\n                        }}\n                        className=\"tableHeaderSticky\"\n                      >\n                        {h}\n                      </th>\n                    ))\n                  : displayedHeaders.map((h, i) => (\n                      <th\n                        key={i}\n                        style={{\n                          ...styles.tableHeader,\n                          ...(h === \"#\" ? { width: 36, minWidth: 24, maxWidth: 40 } : {}),\n                          ...(h === \"Photo\" || h === \"Ø§Ù„ØµÙˆØ±Ø©\" ? { minWidth: 50, maxWidth: 70, width: 60 } : {}),\n                        }}\n                        className=\"tableHeaderSticky\"\n                      >\n                        {h}\n                      </th>\n                    ))}\n              </tr>\n            </thead>\n            <tbody>\n              {filteredClients.map((client, idx) => (\n                <tr\n                  key={client.id || (client.nom + idx)}\n                  style={{\n                    ...styles.tableRow,\n                    background:\n                      idx === selectedIndex\n                        ? \"#cce5ff\"\n                        : idx % 2 === 0\n                        ? \"#fff\"\n                        : \"#f4f8ff\"\n                  }}\n                  onClick={() => setSelectedIndex(idx)}\n                >\n                  {isRtl ? (\n                    <>\n                      <td style={styles.tableCell}>{idx + 1}</td>\n                      {[...tableFieldsOrder].reverse().map(field => renderTableCell(client, field))}\n                    </>\n                  ) : (\n                    <>\n                      <td style={styles.tableCell}>{idx + 1}</td>\n                      {tableFieldsOrder.map(field => renderTableCell(client, field))}\n                    </>\n                  )}\n                </tr>\n              ))}\n              {filteredClients.length === 0 && !isLoading && (\n                <tr>\n                  <td colSpan={displayedHeaders.length} style={{ padding: \"1rem\", textAlign: \"center\", color: \"#666\" }}>\n                    {translations[locale].errorLoad}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n      {drawerLeft}\n      {drawerRight}\n      {/* Modal for Adding/Editing a Client */}\n      {showModal && (\n        <div style={styles.modalOverlay}>\n          <div style={{ ...styles.modalContent, ...(isRtl ? { direction: \"rtl\", textAlign: \"right\" } : {}) }}>\n            <h3>\n              {modalMode === \"add\"\n                ? translations[locale].addClient\n                : translations[locale].editClient}\n            </h3>\n            <form onSubmit={handleSaveClient} style={styles.modalForm}>\n              {modalRows.map((row, rowIdx) => (\n                <div style={styles.fieldRow4} key={rowIdx}>\n                  {row.map((field, i) => {\n                    // For date fields, use native date input (like group js)\n                    if (\n                      field === \"date_de_naissance\" ||\n                      field === \"date_delivrance\" ||\n                      field === \"date_expiration\"\n                    ) {\n                      return (\n                        <div style={styles.fieldItem4} key={i}>\n                          <label style={styles.modalLabel}>\n                            {translations[locale].modalLabels[field]}:\n                            <input\n                              type=\"date\"\n                              value={\n                                clientForm[field]\n                                  ? formatDateToISO(clientForm[field])\n                                  : \"\"\n                              }\n                              onChange={e =>\n                                setClientForm(prev => ({\n                                  ...prev,\n                                  [field]: e.target.value\n                                    ? formatDateToFR(e.target.value)\n                                    : \"\"\n                                }))\n                              }\n                              style={styles.modalInput}\n                            />\n                          </label>\n                        </div>\n                      );\n                    }\n                    // For credit, use a number input (show canonical credit in editor)\n                    if (field === \"credit\") {\n                      return (\n                        <div style={styles.fieldItem4} key={i}>\n                          <label style={styles.modalLabel}>\n                            {translations[locale].modalLabels.credit}:\n                            <input\n                              type=\"number\"\n                              value={clientForm.credit || \"\"}\n                              onChange={e =>\n                                setClientForm({ ...clientForm, credit: e.target.value })\n                              }\n                              style={styles.modalInput}\n                              min={0}\n                              step=\"0.01\"\n                            />\n                          </label>\n                        </div>\n                      );\n                    }\n                    return (\n                      <div style={styles.fieldItem4} key={i}>\n                        <label style={styles.modalLabel}>\n                          {translations[locale].modalLabels[field]}:\n                          {field === \"nationalite\" ? (\n                            <select\n                              value={clientForm.nationalite}\n                              onChange={e =>\n                                setClientForm({ ...clientForm, nationalite: e.target.value })\n                              }\n                              style={styles.modalInput}\n                            >\n                              {NATIONALITIES.map(nat => (\n                                <option value={nat} key={nat}>{nat}</option>\n                              ))}\n                            </select>\n                          ) : field.endsWith(\"_ar\") ? (\n                            <>\n                              <input\n                                type=\"text\"\n                                value={clientForm[field] || \"\"}\n                                onChange={e => handleArInput(field, e.target.value)}\n                                style={styles.modalInput}\n                                dir=\"rtl\"\n                                lang=\"ar\"\n                                pattern=\"[\\u0600-\\u06FF\\s]+\"\n                                title={translations[locale].saisieArabe}\n                                placeholder=\"...\"\n                              />\n                              {arErrors[field] && (\n                                <span style={styles.arError}>{arErrors[field]}</span>\n                              )}\n                            </>\n                          ) : (\n                            <input\n                              type=\"text\"\n                              value={clientForm[field] || \"\"}\n                              onChange={e =>\n                                setClientForm({ ...clientForm, [field]: e.target.value })\n                              }\n                              style={styles.modalInput}\n                              required={\n                                [\"nom\", \"prenom\", \"passport_number\"].includes(field)\n                              }\n                            />\n                          )}\n                        </label>\n                      </div>\n                    );\n                  })}\n                  {row.length < 4 &&\n                    [...Array(4 - row.length)].map((_, idx) => (\n                      <div style={styles.fieldItem4} key={\"empty\" + idx}></div>\n                    ))}\n                </div>\n              ))}\n              <div style={styles.fieldRow4}>\n                <div style={{ ...styles.fieldItem4, flex: 1 }}>\n                  <label style={styles.modalLabel}>\n                    {translations[locale].modalLabels.photo}:\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => handlePhotoChange(e.target.files[0])}\n                      style={{ marginTop: 6 }}\n                    />\n                    {clientForm.photo ? (\n                      <div style={{ marginTop: 8 }}>\n                        <img\n                          src={photoSrc(clientForm.photo)}\n                          alt=\"preview\"\n                          style={{ width: 80, height: 60, objectFit: \"cover\", borderRadius: 6 }}\n                        />\n                      </div>\n                    ) : null}\n                  </label>\n                </div>\n                <div style={styles.fieldItem4}></div>\n                <div style={styles.fieldItem4}></div>\n                <div style={styles.fieldItem4}></div>\n              </div>\n              <div style={styles.modalButtons}>\n                <button type=\"submit\" style={styles.modalButton}>\n                  {translations[locale].save}\n                </button>\n                <button type=\"button\" style={styles.modalButton} onClick={handleCloseModal}>\n                  {translations[locale].cancel}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst styles = {\n  pageContainer: {\n    padding: \"1.25rem\",\n    position: \"relative\",\n    minHeight: \"100vh\",\n    boxSizing: \"border-box\"\n  },\n  // Updated to match personel search sizing/spacing: flex layout, gap and maxWidth 420\n  searchContainer: {\n    marginBottom: \"1rem\",\n    display: \"flex\",\n    alignItems: \"center\",\n    maxWidth: \"420px\",\n    gap: 8,\n    flex: 1\n  },\n  searchIcon: {\n    fontSize: \"1.2rem\",\n    marginRight: \"0.5rem\"\n  },\n  // Use full-width input style like personel\n  searchInput: {\n    width: \"100%\",\n    padding: \"0.5rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"1px solid #ccc\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    marginTop: \"0\",\n    tableLayout: \"fixed\"\n  },\n  tableHeaderRow: {\n    background: \"#e8f0fe\"\n  },\n  tableHeader: {\n    padding: \"0.5rem\",\n    border: \"1px solid #c2c2c2\",\n    fontWeight: \"bold\",\n    fontSize: \"0.98rem\",\n    background: \"#e8f0fe\"\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableCell: {\n    padding: \"0.35rem 0.45rem\",\n    border: \"1px solid #e0e0e0\",\n    fontSize: \"0.96rem\",\n    wordBreak: \"break-word\",\n    verticalAlign: \"middle\"\n  },\n  drawer: {\n    position: \"fixed\",\n    background: \"transparent\",\n    padding: \"1rem\",\n    borderRadius: \"8px\",\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    gap: \"0.5rem\",\n    zIndex: 8,\n    minWidth: 0,\n    width: \"auto\",\n    alignItems: \"center\"\n  },\n  drawerButton: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"0.3rem\",\n    padding: \"0.5rem 1rem\",\n    fontSize: \"1rem\",\n    color: \"#3477eb\",\n    background: \"#eaf3ff\",\n    border: \"none\",\n    borderRadius: \"4px\",\n    cursor: \"pointer\",\n    transition: \"background 0.2s\"\n  },\n  modalOverlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100vw\",\n    height: \"100vh\",\n    background: \"rgba(0, 0, 0, 0.5)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 1000\n  },\n  modalContent: {\n    background: \"#fff\",\n    padding: \"2rem\",\n    borderRadius: \"8px\",\n    width: \"96%\",\n    maxWidth: \"980px\",\n    boxShadow: \"0 2px 16px rgba(0,0,0,0.25)\"\n  },\n  modalForm: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"1rem\"\n  },\n  modalLabel: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    fontSize: \"0.9rem\",\n    color: \"#333\"\n  },\n  modalInput: {\n    padding: \"0.5rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"1px solid #ccc\",\n    marginTop: \"0.3rem\"\n  },\n  arError: {\n    color: \"#c00\",\n    fontSize: \"0.85em\",\n    marginTop: \"2px\",\n    fontWeight: \"bold\"\n  },\n  modalButtons: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: \"1rem\",\n    marginTop: \"1rem\"\n  },\n  modalButton: {\n    padding: \"0.5rem 1.2rem\",\n    fontSize: \"1rem\",\n    borderRadius: \"4px\",\n    border: \"none\",\n    cursor: \"pointer\",\n    background: \"#3477eb\",\n    color: \"#fff\",\n    fontWeight: \"bold\",\n    transition: \"background 0.2s\"\n  },\n  fieldRow4: {\n    display: \"flex\",\n    gap: \"0.45rem\",\n    alignItems: \"flex-start\"\n  },\n  fieldItem4: {\n    flex: 1,\n    minWidth: 0\n  },\n  summaryBar: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    background: \"rgba(247, 250, 255, 0.65)\",\n    backdropFilter: \"blur(6px)\",\n    border: \"1px solid #e0e0e0\",\n    borderRadius: \"8px\",\n    padding: \"0.6rem 1rem\",\n    marginBottom: \"1rem\",\n    fontSize: \"1rem\",\n    color: \"#333\",\n    boxShadow: \"0 1px 4px rgba(0,0,0,0.05)\"\n  },\n  summaryItem: {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"0.4rem\",\n    fontWeight: \"600\",\n  },\n  summaryValue: {\n    color: \"#3477eb\",\n    fontWeight: \"700\",\n    marginLeft: \"4px\",\n  },\n  // New badge style used next to search (matching personnel)\n  summaryBadge: {\n    padding: \"0.4rem 0.6rem\",\n    background: \"rgba(255,255,255,0.9)\",\n    borderRadius: 8,\n    border: \"1px solid #e6eefb\",\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: 8,\n    fontWeight: 700,\n    color: \"#14355f\"\n  },\n  page: {\n    padding: \"2rem\",\n    textAlign: \"center\"\n  }\n};\nif (typeof document !== \"undefined\" && !document.getElementById(\"drawer-hover-style\")) {\n  const style = document.createElement(\"style\");\n  style.id = \"drawer-hover-style\";\n  style.innerHTML = `\n    .drawerButtonHover {\n      position: relative;\n      overflow: hidden;\n      transition: all 0.25s ease;\n      z-index: 0;\n    }\n    .drawerButtonHover::before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: -100%;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(90deg, rgba(52,119,235,0.15) 0%, rgba(235,52,52,0.65) 100%);\n      transition: left 0.45s ease-in-out;\n      z-index: -1;\n    }\n    .drawerButtonHover:hover::before {\n      left: 0;\n    }\n  `;\n  document.head.appendChild(style);\n}\n\nexport default ClientPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}